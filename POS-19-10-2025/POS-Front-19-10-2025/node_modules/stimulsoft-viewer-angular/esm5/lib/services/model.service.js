import { __decorate, __values } from "tslib";
import { Injectable } from '@angular/core';
import { ControlClass } from './objects';
var ModelService = /** @class */ (function () {
    function ModelService() {
        this._reportParams = {};
        this.controls = new ControlClass();
        this.pages = [];
        this.months = [];
        this.dayOfWeek = [];
        this.dateRanges = [];
        this.encodingData = [];
        this.pdfSecurityCertificates = [];
        this.paperSizes = [];
        this.drillDownButtons = [];
        this.showProgress = false;
    }
    Object.defineProperty(ModelService.prototype, "reportParams", {
        get: function () {
            return this._reportParams;
        },
        set: function (parameters) {
            this._reportParams.pagesArray = parameters.pagesArray;
            // Apply new report parameters, if not update current page
            if (parameters.action && parameters.action !== 'GetPages') {
                this.reportParams.type = parameters.reportType;
                this.reportParams.drillDownGuid = parameters.drillDownGuid;
                this.reportParams.dashboardDrillDownGuid = parameters.dashboardDrillDownGuid;
                this.reportParams.pagesCount = parameters.pagesCount;
                if (parameters.pageNumber != null) {
                    this.reportParams.pageNumber = parameters.pageNumber;
                }
                this.reportParams.zoom = parameters.zoom;
                this.reportParams.viewMode = parameters.viewMode;
                this.reportParams.reportFileName = parameters.reportFileName;
                this.reportParams.collapsingStates = parameters.collapsingStates;
                if (parameters.bookmarksContent) {
                    this.reportParams.bookmarksContent = parameters.bookmarksContent;
                }
                if (parameters.resources) {
                    this.reportParams.resources = parameters.resources;
                }
                this.reportParams.isCompilationMode = parameters.isCompilationMode;
                if (parameters.variablesValues) {
                    this.reportParams.variablesValues = parameters.variablesValues;
                }
                if (parameters.parametersDateFormat) {
                    this.options.appearance.parametersPanelDateFormat = parameters.parametersDateFormat;
                }
                if (parameters.tableOfContentsPointers)
                    this.reportParams.tableOfContentsPointers = parameters.tableOfContentsPointers;
                this.reportParams.isEditableReport = parameters.isEditableReport;
                if (parameters.userValues) {
                    this.options.userValues = parameters.userValues;
                }
                this.reportParams.dashboards = parameters.dashboards;
                this.reportParams.previewSettings = parameters.previewSettings;
            }
        },
        enumerable: true,
        configurable: true
    });
    ModelService.prototype.setReportParams = function (parameters) {
        this._reportParams = parameters;
    };
    ModelService.prototype.getReportParams = function () {
        return this.copyObject(this._reportParams);
    };
    ModelService.prototype.copyObject = function (o) {
        if (!o || 'object' !== typeof o) {
            return o;
        }
        var c = 'function' === typeof o.pop ? [] : {};
        var p;
        var v;
        for (p in o) {
            if (o.hasOwnProperty(p) && p !== 'pagesArray') {
                v = o[p];
                if (v && 'object' === typeof v) {
                    c[p] = this.copyObject(v);
                }
                else {
                    c[p] = v;
                }
            }
        }
        return c;
    };
    Object.defineProperty(ModelService.prototype, "options", {
        get: function () {
            return this._options;
        },
        set: function (data) {
            this._options = this.toLower(data.options);
            if (data.jsOptions) {
                for (var key in data.jsOptions) {
                    if (data.jsOptions.hasOwnProperty(key)) {
                        this._options[key] = data.jsOptions[key];
                    }
                }
            }
            this._options.exports.defaultSettings = data.defaultSettings;
            this.localization = data.loc;
            this.months = data.months;
            this.dayOfWeek = data.dayOfWeek;
            this.images = data.images;
            this.dateRanges = data.dateRanges;
            this.paperSizes = data.paperSizes;
            this.encodingData = data.encodingData;
            this.pdfSecurityCertificates = data.pdfSecurityCertificates;
            this.clearViewerState();
            this.setupOptions();
        },
        enumerable: true,
        configurable: true
    });
    ModelService.prototype.loc = function (attr) {
        var _a;
        return _a = this.localization[attr], (_a !== null && _a !== void 0 ? _a : attr);
    };
    ModelService.prototype.img = function (name) {
        var _a;
        if (name != null && name.length > 0 && !this.images[name]) {
            //console.warn(`Image: ${name} not found`);
        }
        return _a = this.images[name], (_a !== null && _a !== void 0 ? _a : '');
    };
    ModelService.prototype.toLower = function (obj) {
        var _this = this;
        var result = {};
        Object.keys(obj).forEach(function (key) {
            result[key.substr(0, 1).toLowerCase() + key.substr(1)] = (typeof (obj[key]) === 'object' && obj[key] !== null) ? _this.toLower(obj[key]) : obj[key];
        });
        return result;
    };
    ModelService.prototype.clear = function () {
        this._options = undefined;
        this._reportParams = {};
        this._imagesForBookmark = undefined;
        this.pages = [];
        this.form = null;
    };
    ModelService.prototype.clearViewerState = function () {
        this.reportParams = {};
        this.reportParams.type = 'Auto';
        this.reportParams.pageNumber = 0;
        this.reportParams.originalPageNumber = 0;
        this.reportParams.drillDownGuid = null;
        this.reportParams.dashboardDrillDownGuid = null;
        this.reportParams.collapsingStates = null;
        this.reportParams.bookmarksContent = null;
        this.reportParams.editableParameters = null;
        this.reportParams.resources = null;
        this.reportParams.drillDownParameters = [];
        this.reportParams.elementName = null;
        this.reportParams.variablesValues = null;
        this.reportParams.tableOfContentsPointers = [];
        this.reportParams.isEditableReport = false;
        this.options.viewerId = this.newToken();
        this.options.clientGuid = this.newToken();
        this.options.paramsVariables = null;
        this.options.multiFilterStates = null;
        this.options.isParametersReceived = false;
        this.options.drillDownInProgress = false;
        // this.controls.mainPanel.style.background = '';
        // this.tableElementGridStates = {};
        // Restore current page number, if reload current report
        if (this.reportParams.prevPageNumber) {
            this.reportParams.pageNumber = this.reportParams.prevPageNumber;
            delete this.reportParams.prevPageNumber;
        }
        this.fullScreenOptions = null;
        this.drillDownButtons = [];
        this.controls.parametersPanel.visible = false;
        this.controls.bookmarksPanel.visible = false;
        this.interactions = null;
        /*
        this.controls.drillDownPanel.visible = false;
        this.controls.findPanel.visible = false;
        this.controls.parametersPanel.visible = false;
        this.controls.resourcesPanel.visible = false;*/
    };
    ModelService.prototype.style = function (value) {
        return value !== '' && value != null ? value : '';
    };
    ModelService.prototype.createPostParameters = function (data, asObject, useOptions) {
        if (asObject === void 0) { asObject = true; }
        if (useOptions === void 0) { useOptions = true; }
        var _a, _b, _c, _d;
        var params;
        // Object params
        var postParams = {
            stiweb_component: 'Viewer',
            stiweb_imagesScalingFactor: this.getImagesScalingFactor()
        };
        if (this.properties) {
            postParams['properties'] = btoa(JSON.stringify(this.properties));
        }
        if (this.options && useOptions) {
            params = {
                viewerId: this.options.viewerId,
                routes: this.options.routes,
                formValues: this.options.formValues,
                clientGuid: this.options.clientGuid,
                drillDownGuid: this.reportParams.drillDownGuid,
                dashboardDrillDownGuid: this.reportParams.dashboardDrillDownGuid,
                cacheMode: this.options.server.cacheMode,
                cacheTimeout: this.options.server.cacheTimeout,
                cacheItemPriority: this.options.server.cacheItemPriority,
                pageNumber: this.reportParams.pageNumber,
                originalPageNumber: this.reportParams.originalPageNumber,
                reportType: this.reportParams.type,
                zoom: (this.reportParams.zoom && this.reportParams.zoom > 0) ? this.reportParams.zoom : (((_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.toolbar) === null || _b === void 0 ? void 0 : _b.zoom) > 0 ? (_d = (_c = this.options) === null || _c === void 0 ? void 0 : _c.toolbar) === null || _d === void 0 ? void 0 : _d.zoom : 100),
                viewMode: this.reportParams.viewMode || this.options.toolbar.viewMode,
                multiPageWidthCount: this.reportParams.multiPageWidthCount,
                multiPageHeightCount: this.reportParams.multiPageHeightCount,
                multiPageContainerWidth: this.reportParams.multiPageContainerWidth,
                multiPageContainerHeight: this.reportParams.multiPageContainerHeight,
                multiPageMargins: this.reportParams.multiPageMargins,
                showBookmarks: this.options.toolbar.showBookmarksButton,
                openLinksWindow: this.options.appearance.openLinksWindow,
                chartRenderType: this.options.appearance.chartRenderType,
                reportDisplayMode: this.options.appearance.reportDisplayMode,
                drillDownParameters: this.reportParams.drillDownParameters,
                editableParameters: this.reportParams.editableParameters,
                useRelativeUrls: this.options.server.useRelativeUrls,
                passQueryParametersForResources: this.options.server.passQueryParametersForResources,
                passQueryParametersToReport: this.options.server.passQueryParametersToReport,
                version: this.options.shortProductVersion,
                reportDesignerMode: this.options.reportDesignerMode,
                imagesQuality: this.options.appearance.imagesQuality,
                parametersPanelSortDataItems: this.options.appearance.parametersPanelSortDataItems,
                combineReportPages: this.options.appearance.combineReportPages,
                isAngular: true,
                allowAutoUpdateCookies: this.options.server.allowAutoUpdateCookies
            };
            if (this.options.server.useLocalizedCache && this.options.localization) {
                params['useLocalizedCache'] = true;
                params['localization'] = this.options.localization;
            }
            if (this.options.userValues) {
                params['userValues'] = this.options.userValues;
            }
        }
        else {
            params = {};
        }
        if (data) {
            Object.keys(data).forEach(function (key) { return params[key] = data[key]; });
        }
        // Object params
        if (params.action) {
            postParams['stiweb_action'] = params.action;
            delete params.action;
        }
        if (params.base64Data) {
            postParams['stiweb_data'] = params.base64Data;
            delete params.base64Data;
        }
        if (this.options && useOptions) {
            // Params
            var jsonParams = JSON.stringify(params);
            if (this.options.server.useCompression) {
                // postParams['stiweb_packed_parameters'] = StiGZipHelper.pack(jsonParams);
                postParams['stiweb_parameters'] = btoa(jsonParams);
            }
            else {
                postParams['stiweb_parameters'] = btoa(jsonParams);
            }
        }
        if (asObject) {
            return postParams;
        }
    };
    ModelService.prototype.newToken = function () {
        var a = '1234567890abcdefghijklmnopqrstuvwxyz'.split('');
        var b = [];
        var length = 32;
        for (var i = 0; i < length; i++) {
            var j = (Math.random() * (a.length - 1)).toFixed(0);
            b[i] = a[j];
        }
        return b.join('');
    };
    ModelService.prototype.setupOptions = function () {
        var _a, _b, _c, _d, _e, _f;
        if (!this.options.exports.showExportToPowerPoint && !this.options.exports.showExportToPdf && !this.options.exports.showExportToXps &&
            !this.options.exports.showExportToOpenDocumentWriter && !this.options.exports.showExportToOpenDocumentCalc && !this.options.exports.showExportToText &&
            !this.options.exports.showExportToRtf && !this.options.exports.showExportToWord2007 && !this.options.exports.showExportToCsv && !this.options.exports.showExportToJson &&
            !this.options.exports.showExportToDbf && !this.options.exports.showExportToXml && !this.options.exports.showExportToDif && !this.options.exports.showExportToSylk &&
            !this.options.exports.showExportToExcel && !this.options.exports.showExportToExcel2007 && !this.options.exports.showExportToExcelXml && !this.options.exports.showExportToHtml &&
            !this.options.exports.showExportToHtml5 && !this.options.exports.showExportToMht && !this.options.exports.showExportToImageBmp && !this.options.exports.showExportToImageGif &&
            !this.options.exports.showExportToImageJpeg && !this.options.exports.showExportToImageMetafile && !this.options.exports.showExportToImagePcx &&
            !this.options.exports.showExportToImagePng && !this.options.exports.showExportToImageTiff && !this.options.exports.showExportToImageSvg && !this.options.exports.showExportToImageSvgz) {
            if (!this.options.exports.showExportToDocument) {
                this.options.toolbar.showSaveButton = false;
            }
            this.options.toolbar.showSendEmailButton = false;
        }
        // Options
        this.options.isTouchDevice = this.options.appearance.interfaceType === 'Auto'
            ? this.isTouchDevice() && this.isMobileDevice()
            : this.options.appearance.interfaceType === 'Touch';
        this.options.isMobileDevice = this.options.appearance.interfaceType === 'Auto' && !this.options.reportDesignerMode
            ? this.isTouchDevice() && this.isMobileDevice()
            : this.options.appearance.interfaceType === 'Mobile';
        if (this.options.isMobileDevice) {
            this.initializeMobile();
        }
        else {
            this.options.toolbar.showPinToolbarButton = false;
        }
        this.controls.toolbar.visible = this.options.toolbar.visible;
        this.options.menuAnimDuration = 150;
        this.options.formAnimDuration = 200;
        this.options.scrollDuration = 350;
        this.options.menuHideDelay = 250;
        this.options.server.timeoutAutoUpdateCache = 180000;
        this.options.toolbar.backgroundColor = this.getHTMLColor(this.options.toolbar.backgroundColor);
        this.options.toolbar.borderColor = this.getHTMLColor(this.options.toolbar.borderColor);
        this.options.toolbar.fontColor = this.getHTMLColor(this.options.toolbar.fontColor);
        this.options.appearance.pageBorderColor = this.getHTMLColor(this.options.appearance.pageBorderColor);
        this.options.parametersValues = {};
        this.options.parameterRowHeight = this.options.isTouchDevice ? 35 : 30;
        this.options.minParametersCountForMultiColumns = 5;
        // First Day Of Week
        if (this.options.appearance.datePickerFirstDayOfWeek === 'Sunday') {
            this.dayOfWeek.splice(6, 1);
            this.dayOfWeek.splice(0, 0, 'Sunday');
        }
        if (((_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.toolbar) === null || _b === void 0 ? void 0 : _b.zoom) === -1 || ((_d = (_c = this.options) === null || _c === void 0 ? void 0 : _c.toolbar) === null || _d === void 0 ? void 0 : _d.zoom) === -2) {
            this.reportParams.autoZoom = (_f = (_e = this.options) === null || _e === void 0 ? void 0 : _e.toolbar) === null || _f === void 0 ? void 0 : _f.zoom;
        }
        // Actions
        if (!this.options.actions.getReport) {
            this.options.actions.getReport = this.options.actions.viewerEvent;
        }
        if (!this.options.actions.printReport) {
            this.options.actions.printReport = this.options.actions.viewerEvent;
        }
        if (!this.options.actions.openReport) {
            this.options.actions.openReport = this.options.actions.viewerEvent;
        }
        if (!this.options.actions.exportReport) {
            this.options.actions.exportReport = this.options.actions.viewerEvent;
        }
        if (!this.options.actions.interaction) {
            this.options.actions.interaction = this.options.actions.viewerEvent;
        }
        if (!(window.File && window.FileReader && window.FileList && window.Blob)) {
            this.options.toolbar.showOpenButton = false;
        }
        // Render JsViewer styles into HEAD
        if (this.options.requestResourcesUrl || this.options.appearance.customStylesUrl) {
            var viewerStyles = document.createElement('link');
            viewerStyles.setAttribute('type', 'text/css');
            viewerStyles.setAttribute('rel', 'stylesheet');
            viewerStyles.setAttribute('href', this.options.appearance.customStylesUrl || this.getResourceUrl('styles'));
            this.controls.head.appendChild(viewerStyles);
        }
        this.options.viewerId = (Math.random() * 1000000).toString();
    };
    ModelService.prototype.pagesNavigationIsActive = function () {
        return (this.options.appearance.fullScreenMode || this.options.appearance.scrollbarsMode) && this.reportParams.viewMode === 'Continuous';
    };
    Object.defineProperty(ModelService.prototype, "imagesForBookmark", {
        get: function () {
            var _this = this;
            if (!this._imagesForBookmark) {
                var names = ['root', 'folder', 'folderOpen', 'node', 'empty', 'line', 'join', 'joinBottom', 'plus', 'plusBottom', 'minus', 'minusBottom'];
                var imagesForBookmarks_1 = {};
                names.forEach(function (name) { return imagesForBookmarks_1[name] = _this.images['Bookmarks' + name + '.png']; });
                this._imagesForBookmark = imagesForBookmarks_1;
            }
            return this._imagesForBookmark;
        },
        enumerable: true,
        configurable: true
    });
    ModelService.prototype.isTouchDevice = function () {
        return ('ontouchstart' in document.documentElement);
    };
    ModelService.prototype.isMobileDevice = function () {
        return /iPhone|iPad|iPod|Macintosh|Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    };
    ModelService.prototype.initializeMobile = function () {
        var e_1, _a;
        var isViewPortExist = false;
        var metas = this.controls.head.getElementsByTagName('meta');
        try {
            for (var metas_1 = __values(metas), metas_1_1 = metas_1.next(); !metas_1_1.done; metas_1_1 = metas_1.next()) {
                var meta = metas_1_1.value;
                if (meta.name && meta.name.toLowerCase() === 'viewport') {
                    isViewPortExist = true;
                    break;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (metas_1_1 && !metas_1_1.done && (_a = metas_1.return)) _a.call(metas_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        if (!isViewPortExist) {
            var viewPortTag = document.createElement('meta');
            viewPortTag.id = 'viewport';
            viewPortTag.name = 'viewport';
            viewPortTag.content = 'initial-scale=1.0,width=device-width,user-scalable=0';
            this.controls.head.appendChild(viewPortTag);
        }
        this.options.appearance.fullScreenMode = true;
        this.options.appearance.scrollbarsMode = true;
        this.options.appearance.parametersPanelPosition = 'Left';
        this.options.appearance.parametersPanelColumnsCount = 1;
        this.options.toolbar.displayMode = 'Separated';
        this.options.toolbar.viewMode = 'SinglePage';
        this.options.toolbar.showZoomButton = false;
        var defaultZoom = this.options.toolbar.zoom === -2 ? -2 : -1; // PageWidth or PageHeight
        this.options.toolbar.zoom = this.reportParams.zoom = defaultZoom;
        this.options.toolbar.showButtonCaptions = false;
        this.options.toolbar.showOpenButton = false;
        this.options.toolbar.showFindButton = false;
        this.options.toolbar.showEditorButton = false;
        this.options.toolbar.showFullScreenButton = false;
        this.options.toolbar.showAboutButton = false;
        this.options.toolbar.showViewModeButton = false;
    };
    ModelService.prototype.getImagesScalingFactor = function () {
        var wnd = window;
        var devicePixelRatio = window.devicePixelRatio || (wnd.deviceXDPI && wnd.logicalXDPI ? wnd.deviceXDPI / wnd.logicalXDPI : 1);
        if (!devicePixelRatio || devicePixelRatio <= 1) {
            return '1';
        }
        else {
            return devicePixelRatio.toString();
        }
    };
    ModelService.prototype.getHTMLColor = function (color) {
        if (color.indexOf(',') > 0 && color.indexOf('rgb') < 0) {
            return "rgb(" + color + ")";
        }
        return color;
    };
    ModelService.prototype.getResourceUrl = function (resourceParameter) {
        var url = this.getActionRequestUrl(this.options.requestResourcesUrl, this.options.actions.viewerEvent);
        url += url.indexOf('?') > 0 ? '&' : '?';
        url += 'stiweb_component=Viewer&stiweb_action=Resource&stiweb_data=' + resourceParameter + '&stiweb_theme=' + this.options.theme;
        url += '&stiweb_cachemode=' + (this.options.server.useCacheForResources
            ? this.options.server.cacheMode === 'ObjectSession' || this.options.server.cacheMode === 'StringSession'
                ? 'session'
                : 'cache'
            : 'none');
        url += '&stiweb_version=' + this.options.shortProductVersion;
        return url;
    };
    ModelService.prototype.getActionRequestUrl = function (requestUrl, action) {
        if (!action) {
            return requestUrl;
        }
        if (action.indexOf('?') < 0) {
            return requestUrl.replace('{action}', action);
        }
        var query = action.substring(action.indexOf('?') + 1);
        action = action.substring(0, action.indexOf('?'));
        return requestUrl.replace('{action}', action) + (requestUrl.indexOf('?') > 0 ? '&' : '?') + query;
    };
    ModelService = __decorate([
        Injectable()
    ], ModelService);
    return ModelService;
}());
export { ModelService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3N0aW11bHNvZnQtdmlld2VyLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvc2VydmljZXMvbW9kZWwuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsWUFBWSxFQUEyRixNQUFNLFdBQVcsQ0FBQztBQUdsSTtJQW1DRTtRQWpDUSxrQkFBYSxHQUFRLEVBQUUsQ0FBQztRQVF6QixhQUFRLEdBQWlCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDNUMsVUFBSyxHQUFVLEVBQUUsQ0FBQztRQUNsQixXQUFNLEdBQWEsRUFBRSxDQUFDO1FBQ3RCLGNBQVMsR0FBYSxFQUFFLENBQUM7UUFDekIsZUFBVSxHQUFhLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFVLEVBQUUsQ0FBQztRQUN6Qiw0QkFBdUIsR0FBVSxFQUFFLENBQUM7UUFDcEMsZUFBVSxHQUFhLEVBQUUsQ0FBQztRQUUxQixxQkFBZ0IsR0FBZ0IsRUFBRSxDQUFDO1FBU25DLGlCQUFZLEdBQUcsS0FBSyxDQUFDO0lBT1osQ0FBQztJQUVqQixzQkFBVyxzQ0FBWTthQUF2QjtZQUNFLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM1QixDQUFDO2FBRUQsVUFBd0IsVUFBZTtZQUNyQyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDO1lBRXRELDBEQUEwRDtZQUMxRCxJQUFJLFVBQVUsQ0FBQyxNQUFNLElBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxVQUFVLEVBQUU7Z0JBQ3pELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUM7Z0JBQy9DLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxHQUFHLFVBQVUsQ0FBQyxhQUFhLENBQUM7Z0JBQzNELElBQUksQ0FBQyxZQUFZLENBQUMsc0JBQXNCLEdBQUcsVUFBVSxDQUFDLHNCQUFzQixDQUFDO2dCQUM3RSxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsVUFBVSxDQUFDO2dCQUNyRCxJQUFJLFVBQVUsQ0FBQyxVQUFVLElBQUksSUFBSSxFQUFFO29CQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyxVQUFVLENBQUM7aUJBQUU7Z0JBQzVGLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUM7Z0JBQ3pDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUM7Z0JBQ2pELElBQUksQ0FBQyxZQUFZLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQyxjQUFjLENBQUM7Z0JBQzdELElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLGdCQUFnQixDQUFDO2dCQUNqRSxJQUFJLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRTtvQkFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixHQUFHLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQztpQkFBRTtnQkFDdEcsSUFBSSxVQUFVLENBQUMsU0FBUyxFQUFFO29CQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUM7aUJBQUU7Z0JBQ2pGLElBQUksQ0FBQyxZQUFZLENBQUMsaUJBQWlCLEdBQUcsVUFBVSxDQUFDLGlCQUFpQixDQUFDO2dCQUNuRSxJQUFJLFVBQVUsQ0FBQyxlQUFlLEVBQUU7b0JBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQztpQkFBRTtnQkFDbkcsSUFBSSxVQUFVLENBQUMsb0JBQW9CLEVBQUU7b0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMseUJBQXlCLEdBQUcsVUFBVSxDQUFDLG9CQUFvQixDQUFDO2lCQUFFO2dCQUM3SCxJQUFJLFVBQVUsQ0FBQyx1QkFBdUI7b0JBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyx1QkFBdUIsR0FBRyxVQUFVLENBQUMsdUJBQXVCLENBQUM7Z0JBQ3ZILElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEdBQUcsVUFBVSxDQUFDLGdCQUFnQixDQUFDO2dCQUNqRSxJQUFJLFVBQVUsQ0FBQyxVQUFVLEVBQUU7b0JBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQztpQkFBRTtnQkFDL0UsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQztnQkFDckQsSUFBSSxDQUFDLFlBQVksQ0FBQyxlQUFlLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQzthQUNoRTtRQUNILENBQUM7OztPQTNCQTtJQTZCTSxzQ0FBZSxHQUF0QixVQUF1QixVQUFlO1FBQ3BDLElBQUksQ0FBQyxhQUFhLEdBQUcsVUFBVSxDQUFDO0lBQ2xDLENBQUM7SUFFTSxzQ0FBZSxHQUF0QjtRQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDN0MsQ0FBQztJQUVNLGlDQUFVLEdBQWpCLFVBQWtCLENBQU07UUFDdEIsSUFBSSxDQUFDLENBQUMsSUFBSSxRQUFRLEtBQUssT0FBTyxDQUFDLEVBQUU7WUFDL0IsT0FBTyxDQUFDLENBQUM7U0FDVjtRQUNELElBQU0sQ0FBQyxHQUFHLFVBQVUsS0FBSyxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ2hELElBQUksQ0FBQyxDQUFDO1FBQ04sSUFBSSxDQUFDLENBQUM7UUFDTixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDWCxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLFlBQVksRUFBRTtnQkFDN0MsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDVCxJQUFJLENBQUMsSUFBSSxRQUFRLEtBQUssT0FBTyxDQUFDLEVBQUU7b0JBQzlCLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUMzQjtxQkFBTTtvQkFDTCxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUNWO2FBQ0Y7U0FDRjtRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVELHNCQUFXLGlDQUFPO2FBdUJsQjtZQUNFLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUN2QixDQUFDO2FBekJELFVBQW1CLElBQVM7WUFDMUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzQyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7Z0JBQ2xCLEtBQUssSUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtvQkFDaEMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTt3QkFDdEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO3FCQUMxQztpQkFDRjthQUNGO1lBRUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUM7WUFDN0QsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQzdCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUMxQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDaEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUNsQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7WUFDbEMsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ3RDLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUM7WUFDNUQsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDeEIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RCLENBQUM7OztPQUFBO0lBTU0sMEJBQUcsR0FBVixVQUFXLElBQVk7O1FBQ3JCLFlBQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsdUNBQUksSUFBSSxFQUFDO0lBQ3pDLENBQUM7SUFFTSwwQkFBRyxHQUFWLFVBQVcsSUFBWTs7UUFDckIsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUN6RCwyQ0FBMkM7U0FDNUM7UUFDRCxZQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLHVDQUFJLEVBQUUsRUFBQztJQUNqQyxDQUFDO0lBRU8sOEJBQU8sR0FBZixVQUFnQixHQUFRO1FBQXhCLGlCQU1DO1FBTEMsSUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsR0FBRztZQUMxQixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLFFBQVEsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNySixDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7SUFFTSw0QkFBSyxHQUFaO1FBQ0UsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7UUFDMUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLFNBQVMsQ0FBQztRQUNwQyxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNuQixDQUFDO0lBRU0sdUNBQWdCLEdBQXZCO1FBQ0UsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztRQUNqQyxJQUFJLENBQUMsWUFBWSxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7UUFDdkMsSUFBSSxDQUFDLFlBQVksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUM7UUFDaEQsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFDMUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUM7UUFDMUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7UUFDNUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ25DLElBQUksQ0FBQyxZQUFZLENBQUMsbUJBQW1CLEdBQUcsRUFBRSxDQUFDO1FBQzNDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUNyQyxJQUFJLENBQUMsWUFBWSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7UUFDekMsSUFBSSxDQUFDLFlBQVksQ0FBQyx1QkFBdUIsR0FBRyxFQUFFLENBQUM7UUFDL0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFFM0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMxQyxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7UUFDcEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7UUFDdEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsR0FBRyxLQUFLLENBQUM7UUFDMUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7UUFDekMsaURBQWlEO1FBQ2pELG9DQUFvQztRQUVwQyx3REFBd0Q7UUFDeEQsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLGNBQWMsRUFBRTtZQUNwQyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQztZQUNoRSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDO1NBQ3pDO1FBRUQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7UUFDOUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztRQUM3QyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUN6Qjs7Ozt1REFJK0M7SUFDakQsQ0FBQztJQUVNLDRCQUFLLEdBQVosVUFBYSxLQUFhO1FBQ3hCLE9BQU8sS0FBSyxLQUFLLEVBQUUsSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNwRCxDQUFDO0lBRU0sMkNBQW9CLEdBQTNCLFVBQTRCLElBQVUsRUFBRSxRQUF3QixFQUFFLFVBQTBCO1FBQXBELHlCQUFBLEVBQUEsZUFBd0I7UUFBRSwyQkFBQSxFQUFBLGlCQUEwQjs7UUFDMUYsSUFBSSxNQUFXLENBQUM7UUFFaEIsZ0JBQWdCO1FBQ2hCLElBQU0sVUFBVSxHQUFHO1lBQ2pCLGdCQUFnQixFQUFFLFFBQVE7WUFDMUIsMEJBQTBCLEVBQUUsSUFBSSxDQUFDLHNCQUFzQixFQUFFO1NBQzFELENBQUM7UUFFRixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsVUFBVSxDQUFDLFlBQVksQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1NBQ2xFO1FBRUQsSUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLFVBQVUsRUFBRTtZQUM5QixNQUFNLEdBQUc7Z0JBQ1AsUUFBUSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUTtnQkFDL0IsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTTtnQkFDM0IsVUFBVSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVTtnQkFDbkMsVUFBVSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVTtnQkFDbkMsYUFBYSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYTtnQkFDOUMsc0JBQXNCLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxzQkFBc0I7Z0JBQ2hFLFNBQVMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTO2dCQUN4QyxZQUFZLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsWUFBWTtnQkFDOUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsaUJBQWlCO2dCQUN4RCxVQUFVLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVO2dCQUN4QyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLGtCQUFrQjtnQkFDeEQsVUFBVSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSTtnQkFDbEMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQUEsSUFBSSxDQUFDLE9BQU8sMENBQUUsT0FBTywwQ0FBRSxJQUFJLElBQUcsQ0FBQyxDQUFDLENBQUMsYUFBQyxJQUFJLENBQUMsT0FBTywwQ0FBRSxPQUFPLDBDQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO2dCQUM3SixRQUFRLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUTtnQkFDckUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxtQkFBbUI7Z0JBQzFELG9CQUFvQixFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsb0JBQW9CO2dCQUM1RCx1QkFBdUIsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLHVCQUF1QjtnQkFDbEUsd0JBQXdCLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyx3QkFBd0I7Z0JBQ3BFLGdCQUFnQixFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCO2dCQUNwRCxhQUFhLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsbUJBQW1CO2dCQUN2RCxlQUFlLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsZUFBZTtnQkFDeEQsZUFBZSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGVBQWU7Z0JBQ3hELGlCQUFpQixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGlCQUFpQjtnQkFDNUQsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxtQkFBbUI7Z0JBQzFELGtCQUFrQixFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsa0JBQWtCO2dCQUN4RCxlQUFlLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsZUFBZTtnQkFDcEQsK0JBQStCLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsK0JBQStCO2dCQUNwRiwyQkFBMkIsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQywyQkFBMkI7Z0JBQzVFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQjtnQkFDekMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxrQkFBa0I7Z0JBQ25ELGFBQWEsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxhQUFhO2dCQUNwRCw0QkFBNEIsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyw0QkFBNEI7Z0JBQ2xGLGtCQUFrQixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGtCQUFrQjtnQkFDOUQsU0FBUyxFQUFFLElBQUk7Z0JBQ2Ysc0JBQXNCLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsc0JBQXNCO2FBQ25FLENBQUM7WUFFRixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFO2dCQUN0RSxNQUFNLENBQUMsbUJBQW1CLENBQUMsR0FBRyxJQUFJLENBQUM7Z0JBQ25DLE1BQU0sQ0FBQyxjQUFjLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQzthQUNwRDtZQUVELElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUU7Z0JBQzNCLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQzthQUNoRDtTQUVGO2FBQU07WUFDTCxNQUFNLEdBQUcsRUFBRSxDQUFDO1NBQ2I7UUFFRCxJQUFJLElBQUksRUFBRTtZQUNSLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsR0FBRyxJQUFJLE9BQUEsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBdkIsQ0FBdUIsQ0FBQyxDQUFDO1NBQzNEO1FBRUQsZ0JBQWdCO1FBQ2hCLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRTtZQUNqQixVQUFVLENBQUMsZUFBZSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUM1QyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUM7U0FDdEI7UUFDRCxJQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQUU7WUFDckIsVUFBVSxDQUFDLGFBQWEsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7WUFDOUMsT0FBTyxNQUFNLENBQUMsVUFBVSxDQUFDO1NBQzFCO1FBRUQsSUFBSSxJQUFJLENBQUMsT0FBTyxJQUFJLFVBQVUsRUFBRTtZQUM5QixTQUFTO1lBQ1QsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMxQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGNBQWMsRUFBRTtnQkFDdEMsMkVBQTJFO2dCQUMzRSxVQUFVLENBQUMsbUJBQW1CLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7YUFDcEQ7aUJBQU07Z0JBQ0wsVUFBVSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2FBQ3BEO1NBQ0Y7UUFFRCxJQUFJLFFBQVEsRUFBRTtZQUFFLE9BQU8sVUFBVSxDQUFDO1NBQUU7SUFDdEMsQ0FBQztJQUVPLCtCQUFRLEdBQWhCO1FBQ0UsSUFBTSxDQUFDLEdBQUcsc0NBQXNDLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQzNELElBQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNsQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQy9CLElBQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0RCxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2I7UUFDRCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDcEIsQ0FBQztJQUVPLG1DQUFZLEdBQXBCOztRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGVBQWUsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGVBQWU7WUFDaEksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyw4QkFBOEIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLDRCQUE0QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsZ0JBQWdCO1lBQ3BKLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsZUFBZSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsb0JBQW9CLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0I7WUFDdEssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0I7WUFDakssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLHFCQUFxQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsb0JBQW9CLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0I7WUFDOUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGVBQWUsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG9CQUFvQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsb0JBQW9CO1lBQzVLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMscUJBQXFCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG9CQUFvQjtZQUM1SSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG9CQUFvQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMscUJBQXFCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLHFCQUFxQixFQUFFO1lBQ3hMLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsRUFBRTtnQkFDOUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQzthQUM3QztZQUNELElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG1CQUFtQixHQUFHLEtBQUssQ0FBQztTQUNsRDtRQUNELFVBQVU7UUFDVixJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxhQUFhLEtBQUssTUFBTTtZQUMzRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUU7WUFDL0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGFBQWEsS0FBSyxPQUFPLENBQUM7UUFDdEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsYUFBYSxLQUFLLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCO1lBQ2hILENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUMvQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsYUFBYSxLQUFLLFFBQVEsQ0FBQztRQUV2RCxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFFO1lBQy9CLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1NBQ3pCO2FBQU07WUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsR0FBRyxLQUFLLENBQUM7U0FDbkQ7UUFFRCxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBQzdELElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsR0FBRyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsR0FBRyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLEdBQUcsQ0FBQztRQUNsQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUM7UUFFakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsc0JBQXNCLEdBQUcsTUFBTSxDQUFDO1FBQ3BELElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQy9GLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3ZGLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ25GLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3JHLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO1FBQ25DLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxPQUFPLENBQUMsaUNBQWlDLEdBQUcsQ0FBQyxDQUFDO1FBRW5ELG9CQUFvQjtRQUNwQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLHdCQUF3QixLQUFLLFFBQVEsRUFBRTtZQUNqRSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztTQUN2QztRQUVELElBQUksYUFBQSxJQUFJLENBQUMsT0FBTywwQ0FBRSxPQUFPLDBDQUFFLElBQUksTUFBSyxDQUFDLENBQUMsSUFBSSxhQUFBLElBQUksQ0FBQyxPQUFPLDBDQUFFLE9BQU8sMENBQUUsSUFBSSxNQUFLLENBQUMsQ0FBQyxFQUFFO1lBQzVFLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxlQUFHLElBQUksQ0FBQyxPQUFPLDBDQUFFLE9BQU8sMENBQUUsSUFBSSxDQUFDO1NBQzFEO1FBRUQsVUFBVTtRQUNWLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1NBQUU7UUFDM0csSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7U0FBRTtRQUMvRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztTQUFFO1FBQzdHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1NBQUU7UUFDakgsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7U0FBRTtRQUUvRyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxVQUFVLElBQUksTUFBTSxDQUFDLFFBQVEsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1NBQUU7UUFFM0gsbUNBQW1DO1FBQ25DLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxlQUFlLEVBQUU7WUFDL0UsSUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNwRCxZQUFZLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQztZQUM5QyxZQUFZLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQztZQUMvQyxZQUFZLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQzVHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUM5QztRQUVELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQy9ELENBQUM7SUFFTSw4Q0FBdUIsR0FBOUI7UUFDRSxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsY0FBYyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxLQUFLLFlBQVksQ0FBQztJQUMzSSxDQUFDO0lBRUQsc0JBQUksMkNBQWlCO2FBQXJCO1lBQUEsaUJBUUM7WUFQQyxJQUFJLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFO2dCQUM1QixJQUFNLEtBQUssR0FBRyxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxPQUFPLEVBQUUsYUFBYSxDQUFDLENBQUM7Z0JBQzVJLElBQU0sb0JBQWtCLEdBQUcsRUFBRSxDQUFDO2dCQUM5QixLQUFLLENBQUMsT0FBTyxDQUFDLFVBQUEsSUFBSSxJQUFJLE9BQUEsb0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsSUFBSSxHQUFHLE1BQU0sQ0FBQyxFQUFuRSxDQUFtRSxDQUFDLENBQUM7Z0JBQzNGLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxvQkFBa0IsQ0FBQzthQUM5QztZQUNELE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO1FBQ2pDLENBQUM7OztPQUFBO0lBRU0sb0NBQWEsR0FBcEI7UUFDRSxPQUFPLENBQUMsY0FBYyxJQUFJLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUN0RCxDQUFDO0lBRU0scUNBQWMsR0FBckI7UUFDRSxPQUFPLG9FQUFvRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDeEcsQ0FBQztJQUVNLHVDQUFnQixHQUF2Qjs7UUFDRSxJQUFJLGVBQWUsR0FBRyxLQUFLLENBQUM7UUFDNUIsSUFBTSxLQUFLLEdBQVEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUM7O1lBQ25FLEtBQW1CLElBQUEsVUFBQSxTQUFBLEtBQUssQ0FBQSw0QkFBQSwrQ0FBRTtnQkFBckIsSUFBTSxJQUFJLGtCQUFBO2dCQUNiLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLFVBQVUsRUFBRTtvQkFDdkQsZUFBZSxHQUFHLElBQUksQ0FBQztvQkFDdkIsTUFBTTtpQkFDUDthQUNGOzs7Ozs7Ozs7UUFFRCxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3BCLElBQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbkQsV0FBVyxDQUFDLEVBQUUsR0FBRyxVQUFVLENBQUM7WUFDNUIsV0FBVyxDQUFDLElBQUksR0FBRyxVQUFVLENBQUM7WUFDOUIsV0FBVyxDQUFDLE9BQU8sR0FBRyxzREFBc0QsQ0FBQztZQUM3RSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDN0M7UUFFRCxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQzlDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDOUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsdUJBQXVCLEdBQUcsTUFBTSxDQUFDO1FBQ3pELElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLDJCQUEyQixHQUFHLENBQUMsQ0FBQztRQUN4RCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9DLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBRyxZQUFZLENBQUM7UUFDN0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztRQUM1QyxJQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLDBCQUEwQjtRQUMxRixJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEdBQUcsV0FBVyxDQUFDO1FBQ2pFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztRQUNoRCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1FBQzVDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFDNUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO1FBQzlDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG9CQUFvQixHQUFHLEtBQUssQ0FBQztRQUNsRCxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDO1FBQzdDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztJQUNsRCxDQUFDO0lBRU0sNkNBQXNCLEdBQTdCO1FBQ0UsSUFBTSxHQUFHLEdBQVEsTUFBTSxDQUFDO1FBQ3hCLElBQU0sZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLGdCQUFnQixJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsSUFBSSxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9ILElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxnQkFBZ0IsSUFBSSxDQUFDLEVBQUU7WUFDOUMsT0FBTyxHQUFHLENBQUM7U0FDWjthQUFNO1lBQ0wsT0FBTyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUNwQztJQUNILENBQUM7SUFFTSxtQ0FBWSxHQUFuQixVQUFvQixLQUFVO1FBQzVCLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDdEQsT0FBTyxTQUFPLEtBQUssTUFBRyxDQUFDO1NBQ3hCO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRU0scUNBQWMsR0FBckIsVUFBc0IsaUJBQXlCO1FBQzdDLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3ZHLEdBQUcsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDeEMsR0FBRyxJQUFJLDZEQUE2RCxHQUFHLGlCQUFpQixHQUFHLGdCQUFnQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBQ2pJLEdBQUcsSUFBSSxvQkFBb0IsR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLG9CQUFvQjtZQUNyRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxLQUFLLGVBQWUsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLEtBQUssZUFBZTtnQkFDdEcsQ0FBQyxDQUFDLFNBQVM7Z0JBQ1gsQ0FBQyxDQUFDLE9BQU87WUFDWCxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDWixHQUFHLElBQUksa0JBQWtCLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztRQUU3RCxPQUFPLEdBQUcsQ0FBQztJQUNiLENBQUM7SUFFTSwwQ0FBbUIsR0FBMUIsVUFBMkIsVUFBa0IsRUFBRSxNQUFlO1FBQzVELElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDWCxPQUFPLFVBQVUsQ0FBQztTQUNuQjtRQUVELElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDM0IsT0FBTyxVQUFVLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztTQUMvQztRQUVELElBQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4RCxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRWxELE9BQU8sVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDcEcsQ0FBQztJQTlkVSxZQUFZO1FBRHhCLFVBQVUsRUFBRTtPQUNBLFlBQVksQ0ErZHhCO0lBQUQsbUJBQUM7Q0FBQSxBQS9kRCxJQStkQztTQS9kWSxZQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sQ2xhc3MsIERyaWxsRG93biwgRXJyb3JNZXNzYWdlLCBJbnRlcmFjdGlvbk9iamVjdCwgQm9va21hcmtOb2RlLCBGb3JtLCBOb3RpZmljYXRpb25Gb3JtT3B0aW9ucyB9IGZyb20gJy4vb2JqZWN0cyc7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBNb2RlbFNlcnZpY2Uge1xyXG4gIHByaXZhdGUgX29wdGlvbnM6IGFueTtcclxuICBwcml2YXRlIF9yZXBvcnRQYXJhbXM6IGFueSA9IHt9O1xyXG4gIHByaXZhdGUgX2ltYWdlc0ZvckJvb2ttYXJrOiBhbnk7XHJcblxyXG4gIHB1YmxpYyByZXF1ZXN0VXJsOiBzdHJpbmc7XHJcbiAgcHVibGljIGFjdGlvbjogc3RyaW5nO1xyXG4gIHB1YmxpYyBwcm9wZXJ0aWVzOiBhbnk7XHJcblxyXG4gIHB1YmxpYyBsb2NhbGl6YXRpb246IGFueTtcclxuICBwdWJsaWMgY29udHJvbHM6IENvbnRyb2xDbGFzcyA9IG5ldyBDb250cm9sQ2xhc3MoKTtcclxuICBwdWJsaWMgcGFnZXM6IGFueVtdID0gW107XHJcbiAgcHVibGljIG1vbnRoczogc3RyaW5nW10gPSBbXTtcclxuICBwdWJsaWMgZGF5T2ZXZWVrOiBzdHJpbmdbXSA9IFtdO1xyXG4gIHB1YmxpYyBkYXRlUmFuZ2VzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIHB1YmxpYyBlbmNvZGluZ0RhdGE6IGFueVtdID0gW107XHJcbiAgcHVibGljIHBkZlNlY3VyaXR5Q2VydGlmaWNhdGVzOiBhbnlbXSA9IFtdO1xyXG4gIHB1YmxpYyBwYXBlclNpemVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gIHB1YmxpYyB2aWV3ZXJTaXplOiBhbnk7XHJcbiAgcHVibGljIGRyaWxsRG93bkJ1dHRvbnM6IERyaWxsRG93bltdID0gW107XHJcbiAgcHVibGljIG9wZW5EaWFsb2dGaWxlTWFzazogc3RyaW5nO1xyXG4gIHB1YmxpYyBpbWFnZXM6IGFueTtcclxuICBwdWJsaWMgZXJyb3JNZXNzYWdlOiBFcnJvck1lc3NhZ2U7XHJcbiAgcHVibGljIGh0dHBFcnJvcjogYW55O1xyXG4gIHB1YmxpYyBpbnRlcmFjdGlvbnM6IEludGVyYWN0aW9uT2JqZWN0O1xyXG4gIHB1YmxpYyBub2RlczogQm9va21hcmtOb2RlW107XHJcbiAgcHVibGljIG5hdmlnYXRlTm9kZTogQm9va21hcmtOb2RlO1xyXG4gIHB1YmxpYyBmdWxsU2NyZWVuT3B0aW9uczogYW55O1xyXG4gIHB1YmxpYyBzaG93UHJvZ3Jlc3MgPSBmYWxzZTtcclxuICBwdWJsaWMgdGltZXJBdXRvVXBkYXRlQ2FjaGU6IGFueTtcclxuICBwdWJsaWMgcmVmcmVzaFJlcG9ydFRpbWVyOiBhbnk7XHJcbiAgcHVibGljIHRvb2xiYXJIaWRlVGltZXI6IGFueTtcclxuICBwdWJsaWMgZm9ybTogRm9ybTtcclxuICBwdWJsaWMgbm90aWZpY2F0aW9uRm9ybU9wdGlvbnM6IE5vdGlmaWNhdGlvbkZvcm1PcHRpb25zO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICBwdWJsaWMgZ2V0IHJlcG9ydFBhcmFtcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9yZXBvcnRQYXJhbXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IHJlcG9ydFBhcmFtcyhwYXJhbWV0ZXJzOiBhbnkpIHtcclxuICAgIHRoaXMuX3JlcG9ydFBhcmFtcy5wYWdlc0FycmF5ID0gcGFyYW1ldGVycy5wYWdlc0FycmF5O1xyXG5cclxuICAgIC8vIEFwcGx5IG5ldyByZXBvcnQgcGFyYW1ldGVycywgaWYgbm90IHVwZGF0ZSBjdXJyZW50IHBhZ2VcclxuICAgIGlmIChwYXJhbWV0ZXJzLmFjdGlvbiAmJiBwYXJhbWV0ZXJzLmFjdGlvbiAhPT0gJ0dldFBhZ2VzJykge1xyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy50eXBlID0gcGFyYW1ldGVycy5yZXBvcnRUeXBlO1xyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy5kcmlsbERvd25HdWlkID0gcGFyYW1ldGVycy5kcmlsbERvd25HdWlkO1xyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy5kYXNoYm9hcmREcmlsbERvd25HdWlkID0gcGFyYW1ldGVycy5kYXNoYm9hcmREcmlsbERvd25HdWlkO1xyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy5wYWdlc0NvdW50ID0gcGFyYW1ldGVycy5wYWdlc0NvdW50O1xyXG4gICAgICBpZiAocGFyYW1ldGVycy5wYWdlTnVtYmVyICE9IG51bGwpIHsgdGhpcy5yZXBvcnRQYXJhbXMucGFnZU51bWJlciA9IHBhcmFtZXRlcnMucGFnZU51bWJlcjsgfVxyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy56b29tID0gcGFyYW1ldGVycy56b29tO1xyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy52aWV3TW9kZSA9IHBhcmFtZXRlcnMudmlld01vZGU7XHJcbiAgICAgIHRoaXMucmVwb3J0UGFyYW1zLnJlcG9ydEZpbGVOYW1lID0gcGFyYW1ldGVycy5yZXBvcnRGaWxlTmFtZTtcclxuICAgICAgdGhpcy5yZXBvcnRQYXJhbXMuY29sbGFwc2luZ1N0YXRlcyA9IHBhcmFtZXRlcnMuY29sbGFwc2luZ1N0YXRlcztcclxuICAgICAgaWYgKHBhcmFtZXRlcnMuYm9va21hcmtzQ29udGVudCkgeyB0aGlzLnJlcG9ydFBhcmFtcy5ib29rbWFya3NDb250ZW50ID0gcGFyYW1ldGVycy5ib29rbWFya3NDb250ZW50OyB9XHJcbiAgICAgIGlmIChwYXJhbWV0ZXJzLnJlc291cmNlcykgeyB0aGlzLnJlcG9ydFBhcmFtcy5yZXNvdXJjZXMgPSBwYXJhbWV0ZXJzLnJlc291cmNlczsgfVxyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy5pc0NvbXBpbGF0aW9uTW9kZSA9IHBhcmFtZXRlcnMuaXNDb21waWxhdGlvbk1vZGU7XHJcbiAgICAgIGlmIChwYXJhbWV0ZXJzLnZhcmlhYmxlc1ZhbHVlcykgeyB0aGlzLnJlcG9ydFBhcmFtcy52YXJpYWJsZXNWYWx1ZXMgPSBwYXJhbWV0ZXJzLnZhcmlhYmxlc1ZhbHVlczsgfVxyXG4gICAgICBpZiAocGFyYW1ldGVycy5wYXJhbWV0ZXJzRGF0ZUZvcm1hdCkgeyB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5wYXJhbWV0ZXJzUGFuZWxEYXRlRm9ybWF0ID0gcGFyYW1ldGVycy5wYXJhbWV0ZXJzRGF0ZUZvcm1hdDsgfVxyXG4gICAgICBpZiAocGFyYW1ldGVycy50YWJsZU9mQ29udGVudHNQb2ludGVycykgdGhpcy5yZXBvcnRQYXJhbXMudGFibGVPZkNvbnRlbnRzUG9pbnRlcnMgPSBwYXJhbWV0ZXJzLnRhYmxlT2ZDb250ZW50c1BvaW50ZXJzO1xyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy5pc0VkaXRhYmxlUmVwb3J0ID0gcGFyYW1ldGVycy5pc0VkaXRhYmxlUmVwb3J0O1xyXG4gICAgICBpZiAocGFyYW1ldGVycy51c2VyVmFsdWVzKSB7IHRoaXMub3B0aW9ucy51c2VyVmFsdWVzID0gcGFyYW1ldGVycy51c2VyVmFsdWVzOyB9XHJcbiAgICAgIHRoaXMucmVwb3J0UGFyYW1zLmRhc2hib2FyZHMgPSBwYXJhbWV0ZXJzLmRhc2hib2FyZHM7XHJcbiAgICAgIHRoaXMucmVwb3J0UGFyYW1zLnByZXZpZXdTZXR0aW5ncyA9IHBhcmFtZXRlcnMucHJldmlld1NldHRpbmdzO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldFJlcG9ydFBhcmFtcyhwYXJhbWV0ZXJzOiBhbnkpIHtcclxuICAgIHRoaXMuX3JlcG9ydFBhcmFtcyA9IHBhcmFtZXRlcnM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0UmVwb3J0UGFyYW1zKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29weU9iamVjdCh0aGlzLl9yZXBvcnRQYXJhbXMpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNvcHlPYmplY3QobzogYW55KTogYW55IHtcclxuICAgIGlmICghbyB8fCAnb2JqZWN0JyAhPT0gdHlwZW9mIG8pIHtcclxuICAgICAgcmV0dXJuIG87XHJcbiAgICB9XHJcbiAgICBjb25zdCBjID0gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG8ucG9wID8gW10gOiB7fTtcclxuICAgIGxldCBwO1xyXG4gICAgbGV0IHY7XHJcbiAgICBmb3IgKHAgaW4gbykge1xyXG4gICAgICBpZiAoby5oYXNPd25Qcm9wZXJ0eShwKSAmJiBwICE9PSAncGFnZXNBcnJheScpIHtcclxuICAgICAgICB2ID0gb1twXTtcclxuICAgICAgICBpZiAodiAmJiAnb2JqZWN0JyA9PT0gdHlwZW9mIHYpIHtcclxuICAgICAgICAgIGNbcF0gPSB0aGlzLmNvcHlPYmplY3Qodik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNbcF0gPSB2O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0IG9wdGlvbnMoZGF0YTogYW55KSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gdGhpcy50b0xvd2VyKGRhdGEub3B0aW9ucyk7XHJcbiAgICBpZiAoZGF0YS5qc09wdGlvbnMpIHtcclxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YS5qc09wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZGF0YS5qc09wdGlvbnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgdGhpcy5fb3B0aW9uc1trZXldID0gZGF0YS5qc09wdGlvbnNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9vcHRpb25zLmV4cG9ydHMuZGVmYXVsdFNldHRpbmdzID0gZGF0YS5kZWZhdWx0U2V0dGluZ3M7XHJcbiAgICB0aGlzLmxvY2FsaXphdGlvbiA9IGRhdGEubG9jO1xyXG4gICAgdGhpcy5tb250aHMgPSBkYXRhLm1vbnRocztcclxuICAgIHRoaXMuZGF5T2ZXZWVrID0gZGF0YS5kYXlPZldlZWs7XHJcbiAgICB0aGlzLmltYWdlcyA9IGRhdGEuaW1hZ2VzO1xyXG4gICAgdGhpcy5kYXRlUmFuZ2VzID0gZGF0YS5kYXRlUmFuZ2VzO1xyXG4gICAgdGhpcy5wYXBlclNpemVzID0gZGF0YS5wYXBlclNpemVzO1xyXG4gICAgdGhpcy5lbmNvZGluZ0RhdGEgPSBkYXRhLmVuY29kaW5nRGF0YTtcclxuICAgIHRoaXMucGRmU2VjdXJpdHlDZXJ0aWZpY2F0ZXMgPSBkYXRhLnBkZlNlY3VyaXR5Q2VydGlmaWNhdGVzO1xyXG4gICAgdGhpcy5jbGVhclZpZXdlclN0YXRlKCk7XHJcbiAgICB0aGlzLnNldHVwT3B0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldCBvcHRpb25zKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbG9jKGF0dHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5sb2NhbGl6YXRpb25bYXR0cl0gPz8gYXR0cjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpbWcobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmIChuYW1lICE9IG51bGwgJiYgbmFtZS5sZW5ndGggPiAwICYmICF0aGlzLmltYWdlc1tuYW1lXSkge1xyXG4gICAgICAvL2NvbnNvbGUud2FybihgSW1hZ2U6ICR7bmFtZX0gbm90IGZvdW5kYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5pbWFnZXNbbmFtZV0gPz8gJyc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHRvTG93ZXIob2JqOiBhbnkpOiBhbnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0ge307XHJcbiAgICBPYmplY3Qua2V5cyhvYmopLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgcmVzdWx0W2tleS5zdWJzdHIoMCwgMSkudG9Mb3dlckNhc2UoKSArIGtleS5zdWJzdHIoMSldID0gKHR5cGVvZiAob2JqW2tleV0pID09PSAnb2JqZWN0JyAmJiBvYmpba2V5XSAhPT0gbnVsbCkgPyB0aGlzLnRvTG93ZXIob2JqW2tleV0pIDogb2JqW2tleV07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fcmVwb3J0UGFyYW1zID0ge307XHJcbiAgICB0aGlzLl9pbWFnZXNGb3JCb29rbWFyayA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMucGFnZXMgPSBbXTtcclxuICAgIHRoaXMuZm9ybSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY2xlYXJWaWV3ZXJTdGF0ZSgpIHtcclxuICAgIHRoaXMucmVwb3J0UGFyYW1zID0ge307XHJcbiAgICB0aGlzLnJlcG9ydFBhcmFtcy50eXBlID0gJ0F1dG8nO1xyXG4gICAgdGhpcy5yZXBvcnRQYXJhbXMucGFnZU51bWJlciA9IDA7XHJcbiAgICB0aGlzLnJlcG9ydFBhcmFtcy5vcmlnaW5hbFBhZ2VOdW1iZXIgPSAwO1xyXG4gICAgdGhpcy5yZXBvcnRQYXJhbXMuZHJpbGxEb3duR3VpZCA9IG51bGw7XHJcbiAgICB0aGlzLnJlcG9ydFBhcmFtcy5kYXNoYm9hcmREcmlsbERvd25HdWlkID0gbnVsbDtcclxuICAgIHRoaXMucmVwb3J0UGFyYW1zLmNvbGxhcHNpbmdTdGF0ZXMgPSBudWxsO1xyXG4gICAgdGhpcy5yZXBvcnRQYXJhbXMuYm9va21hcmtzQ29udGVudCA9IG51bGw7XHJcbiAgICB0aGlzLnJlcG9ydFBhcmFtcy5lZGl0YWJsZVBhcmFtZXRlcnMgPSBudWxsO1xyXG4gICAgdGhpcy5yZXBvcnRQYXJhbXMucmVzb3VyY2VzID0gbnVsbDtcclxuICAgIHRoaXMucmVwb3J0UGFyYW1zLmRyaWxsRG93blBhcmFtZXRlcnMgPSBbXTtcclxuICAgIHRoaXMucmVwb3J0UGFyYW1zLmVsZW1lbnROYW1lID0gbnVsbDtcclxuICAgIHRoaXMucmVwb3J0UGFyYW1zLnZhcmlhYmxlc1ZhbHVlcyA9IG51bGw7XHJcbiAgICB0aGlzLnJlcG9ydFBhcmFtcy50YWJsZU9mQ29udGVudHNQb2ludGVycyA9IFtdO1xyXG4gICAgdGhpcy5yZXBvcnRQYXJhbXMuaXNFZGl0YWJsZVJlcG9ydCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMub3B0aW9ucy52aWV3ZXJJZCA9IHRoaXMubmV3VG9rZW4oKTtcclxuICAgIHRoaXMub3B0aW9ucy5jbGllbnRHdWlkID0gdGhpcy5uZXdUb2tlbigpO1xyXG4gICAgdGhpcy5vcHRpb25zLnBhcmFtc1ZhcmlhYmxlcyA9IG51bGw7XHJcbiAgICB0aGlzLm9wdGlvbnMubXVsdGlGaWx0ZXJTdGF0ZXMgPSBudWxsO1xyXG4gICAgdGhpcy5vcHRpb25zLmlzUGFyYW1ldGVyc1JlY2VpdmVkID0gZmFsc2U7XHJcbiAgICB0aGlzLm9wdGlvbnMuZHJpbGxEb3duSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gICAgLy8gdGhpcy5jb250cm9scy5tYWluUGFuZWwuc3R5bGUuYmFja2dyb3VuZCA9ICcnO1xyXG4gICAgLy8gdGhpcy50YWJsZUVsZW1lbnRHcmlkU3RhdGVzID0ge307XHJcblxyXG4gICAgLy8gUmVzdG9yZSBjdXJyZW50IHBhZ2UgbnVtYmVyLCBpZiByZWxvYWQgY3VycmVudCByZXBvcnRcclxuICAgIGlmICh0aGlzLnJlcG9ydFBhcmFtcy5wcmV2UGFnZU51bWJlcikge1xyXG4gICAgICB0aGlzLnJlcG9ydFBhcmFtcy5wYWdlTnVtYmVyID0gdGhpcy5yZXBvcnRQYXJhbXMucHJldlBhZ2VOdW1iZXI7XHJcbiAgICAgIGRlbGV0ZSB0aGlzLnJlcG9ydFBhcmFtcy5wcmV2UGFnZU51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmZ1bGxTY3JlZW5PcHRpb25zID0gbnVsbDtcclxuICAgIHRoaXMuZHJpbGxEb3duQnV0dG9ucyA9IFtdO1xyXG4gICAgdGhpcy5jb250cm9scy5wYXJhbWV0ZXJzUGFuZWwudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5jb250cm9scy5ib29rbWFya3NQYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmludGVyYWN0aW9ucyA9IG51bGw7XHJcbiAgICAvKlxyXG4gICAgdGhpcy5jb250cm9scy5kcmlsbERvd25QYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmZpbmRQYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmNvbnRyb2xzLnBhcmFtZXRlcnNQYW5lbC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmNvbnRyb2xzLnJlc291cmNlc1BhbmVsLnZpc2libGUgPSBmYWxzZTsqL1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0eWxlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHZhbHVlICE9PSAnJyAmJiB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiAnJztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBjcmVhdGVQb3N0UGFyYW1ldGVycyhkYXRhPzogYW55LCBhc09iamVjdDogYm9vbGVhbiA9IHRydWUsIHVzZU9wdGlvbnM6IGJvb2xlYW4gPSB0cnVlKTogYW55IHtcclxuICAgIGxldCBwYXJhbXM6IGFueTtcclxuXHJcbiAgICAvLyBPYmplY3QgcGFyYW1zXHJcbiAgICBjb25zdCBwb3N0UGFyYW1zID0ge1xyXG4gICAgICBzdGl3ZWJfY29tcG9uZW50OiAnVmlld2VyJyxcclxuICAgICAgc3Rpd2ViX2ltYWdlc1NjYWxpbmdGYWN0b3I6IHRoaXMuZ2V0SW1hZ2VzU2NhbGluZ0ZhY3RvcigpXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICh0aGlzLnByb3BlcnRpZXMpIHtcclxuICAgICAgcG9zdFBhcmFtc1sncHJvcGVydGllcyddID0gYnRvYShKU09OLnN0cmluZ2lmeSh0aGlzLnByb3BlcnRpZXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHVzZU9wdGlvbnMpIHtcclxuICAgICAgcGFyYW1zID0ge1xyXG4gICAgICAgIHZpZXdlcklkOiB0aGlzLm9wdGlvbnMudmlld2VySWQsXHJcbiAgICAgICAgcm91dGVzOiB0aGlzLm9wdGlvbnMucm91dGVzLFxyXG4gICAgICAgIGZvcm1WYWx1ZXM6IHRoaXMub3B0aW9ucy5mb3JtVmFsdWVzLFxyXG4gICAgICAgIGNsaWVudEd1aWQ6IHRoaXMub3B0aW9ucy5jbGllbnRHdWlkLFxyXG4gICAgICAgIGRyaWxsRG93bkd1aWQ6IHRoaXMucmVwb3J0UGFyYW1zLmRyaWxsRG93bkd1aWQsXHJcbiAgICAgICAgZGFzaGJvYXJkRHJpbGxEb3duR3VpZDogdGhpcy5yZXBvcnRQYXJhbXMuZGFzaGJvYXJkRHJpbGxEb3duR3VpZCxcclxuICAgICAgICBjYWNoZU1vZGU6IHRoaXMub3B0aW9ucy5zZXJ2ZXIuY2FjaGVNb2RlLFxyXG4gICAgICAgIGNhY2hlVGltZW91dDogdGhpcy5vcHRpb25zLnNlcnZlci5jYWNoZVRpbWVvdXQsXHJcbiAgICAgICAgY2FjaGVJdGVtUHJpb3JpdHk6IHRoaXMub3B0aW9ucy5zZXJ2ZXIuY2FjaGVJdGVtUHJpb3JpdHksXHJcbiAgICAgICAgcGFnZU51bWJlcjogdGhpcy5yZXBvcnRQYXJhbXMucGFnZU51bWJlcixcclxuICAgICAgICBvcmlnaW5hbFBhZ2VOdW1iZXI6IHRoaXMucmVwb3J0UGFyYW1zLm9yaWdpbmFsUGFnZU51bWJlcixcclxuICAgICAgICByZXBvcnRUeXBlOiB0aGlzLnJlcG9ydFBhcmFtcy50eXBlLFxyXG4gICAgICAgIHpvb206ICh0aGlzLnJlcG9ydFBhcmFtcy56b29tICYmIHRoaXMucmVwb3J0UGFyYW1zLnpvb20gPiAwKSA/IHRoaXMucmVwb3J0UGFyYW1zLnpvb20gOiAodGhpcy5vcHRpb25zPy50b29sYmFyPy56b29tID4gMCA/IHRoaXMub3B0aW9ucz8udG9vbGJhcj8uem9vbSA6IDEwMCksXHJcbiAgICAgICAgdmlld01vZGU6IHRoaXMucmVwb3J0UGFyYW1zLnZpZXdNb2RlIHx8IHRoaXMub3B0aW9ucy50b29sYmFyLnZpZXdNb2RlLFxyXG4gICAgICAgIG11bHRpUGFnZVdpZHRoQ291bnQ6IHRoaXMucmVwb3J0UGFyYW1zLm11bHRpUGFnZVdpZHRoQ291bnQsXHJcbiAgICAgICAgbXVsdGlQYWdlSGVpZ2h0Q291bnQ6IHRoaXMucmVwb3J0UGFyYW1zLm11bHRpUGFnZUhlaWdodENvdW50LFxyXG4gICAgICAgIG11bHRpUGFnZUNvbnRhaW5lcldpZHRoOiB0aGlzLnJlcG9ydFBhcmFtcy5tdWx0aVBhZ2VDb250YWluZXJXaWR0aCxcclxuICAgICAgICBtdWx0aVBhZ2VDb250YWluZXJIZWlnaHQ6IHRoaXMucmVwb3J0UGFyYW1zLm11bHRpUGFnZUNvbnRhaW5lckhlaWdodCxcclxuICAgICAgICBtdWx0aVBhZ2VNYXJnaW5zOiB0aGlzLnJlcG9ydFBhcmFtcy5tdWx0aVBhZ2VNYXJnaW5zLFxyXG4gICAgICAgIHNob3dCb29rbWFya3M6IHRoaXMub3B0aW9ucy50b29sYmFyLnNob3dCb29rbWFya3NCdXR0b24sXHJcbiAgICAgICAgb3BlbkxpbmtzV2luZG93OiB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5vcGVuTGlua3NXaW5kb3csXHJcbiAgICAgICAgY2hhcnRSZW5kZXJUeXBlOiB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5jaGFydFJlbmRlclR5cGUsXHJcbiAgICAgICAgcmVwb3J0RGlzcGxheU1vZGU6IHRoaXMub3B0aW9ucy5hcHBlYXJhbmNlLnJlcG9ydERpc3BsYXlNb2RlLFxyXG4gICAgICAgIGRyaWxsRG93blBhcmFtZXRlcnM6IHRoaXMucmVwb3J0UGFyYW1zLmRyaWxsRG93blBhcmFtZXRlcnMsXHJcbiAgICAgICAgZWRpdGFibGVQYXJhbWV0ZXJzOiB0aGlzLnJlcG9ydFBhcmFtcy5lZGl0YWJsZVBhcmFtZXRlcnMsXHJcbiAgICAgICAgdXNlUmVsYXRpdmVVcmxzOiB0aGlzLm9wdGlvbnMuc2VydmVyLnVzZVJlbGF0aXZlVXJscyxcclxuICAgICAgICBwYXNzUXVlcnlQYXJhbWV0ZXJzRm9yUmVzb3VyY2VzOiB0aGlzLm9wdGlvbnMuc2VydmVyLnBhc3NRdWVyeVBhcmFtZXRlcnNGb3JSZXNvdXJjZXMsXHJcbiAgICAgICAgcGFzc1F1ZXJ5UGFyYW1ldGVyc1RvUmVwb3J0OiB0aGlzLm9wdGlvbnMuc2VydmVyLnBhc3NRdWVyeVBhcmFtZXRlcnNUb1JlcG9ydCxcclxuICAgICAgICB2ZXJzaW9uOiB0aGlzLm9wdGlvbnMuc2hvcnRQcm9kdWN0VmVyc2lvbixcclxuICAgICAgICByZXBvcnREZXNpZ25lck1vZGU6IHRoaXMub3B0aW9ucy5yZXBvcnREZXNpZ25lck1vZGUsXHJcbiAgICAgICAgaW1hZ2VzUXVhbGl0eTogdGhpcy5vcHRpb25zLmFwcGVhcmFuY2UuaW1hZ2VzUXVhbGl0eSxcclxuICAgICAgICBwYXJhbWV0ZXJzUGFuZWxTb3J0RGF0YUl0ZW1zOiB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5wYXJhbWV0ZXJzUGFuZWxTb3J0RGF0YUl0ZW1zLFxyXG4gICAgICAgIGNvbWJpbmVSZXBvcnRQYWdlczogdGhpcy5vcHRpb25zLmFwcGVhcmFuY2UuY29tYmluZVJlcG9ydFBhZ2VzLFxyXG4gICAgICAgIGlzQW5ndWxhcjogdHJ1ZSxcclxuICAgICAgICBhbGxvd0F1dG9VcGRhdGVDb29raWVzOiB0aGlzLm9wdGlvbnMuc2VydmVyLmFsbG93QXV0b1VwZGF0ZUNvb2tpZXNcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2VydmVyLnVzZUxvY2FsaXplZENhY2hlICYmIHRoaXMub3B0aW9ucy5sb2NhbGl6YXRpb24pIHtcclxuICAgICAgICBwYXJhbXNbJ3VzZUxvY2FsaXplZENhY2hlJ10gPSB0cnVlO1xyXG4gICAgICAgIHBhcmFtc1snbG9jYWxpemF0aW9uJ10gPSB0aGlzLm9wdGlvbnMubG9jYWxpemF0aW9uO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnVzZXJWYWx1ZXMpIHtcclxuICAgICAgICBwYXJhbXNbJ3VzZXJWYWx1ZXMnXSA9IHRoaXMub3B0aW9ucy51c2VyVmFsdWVzO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcGFyYW1zID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChrZXkgPT4gcGFyYW1zW2tleV0gPSBkYXRhW2tleV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE9iamVjdCBwYXJhbXNcclxuICAgIGlmIChwYXJhbXMuYWN0aW9uKSB7XHJcbiAgICAgIHBvc3RQYXJhbXNbJ3N0aXdlYl9hY3Rpb24nXSA9IHBhcmFtcy5hY3Rpb247XHJcbiAgICAgIGRlbGV0ZSBwYXJhbXMuYWN0aW9uO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhcmFtcy5iYXNlNjREYXRhKSB7XHJcbiAgICAgIHBvc3RQYXJhbXNbJ3N0aXdlYl9kYXRhJ10gPSBwYXJhbXMuYmFzZTY0RGF0YTtcclxuICAgICAgZGVsZXRlIHBhcmFtcy5iYXNlNjREYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLm9wdGlvbnMgJiYgdXNlT3B0aW9ucykge1xyXG4gICAgICAvLyBQYXJhbXNcclxuICAgICAgY29uc3QganNvblBhcmFtcyA9IEpTT04uc3RyaW5naWZ5KHBhcmFtcyk7XHJcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2VydmVyLnVzZUNvbXByZXNzaW9uKSB7XHJcbiAgICAgICAgLy8gcG9zdFBhcmFtc1snc3Rpd2ViX3BhY2tlZF9wYXJhbWV0ZXJzJ10gPSBTdGlHWmlwSGVscGVyLnBhY2soanNvblBhcmFtcyk7XHJcbiAgICAgICAgcG9zdFBhcmFtc1snc3Rpd2ViX3BhcmFtZXRlcnMnXSA9IGJ0b2EoanNvblBhcmFtcyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcG9zdFBhcmFtc1snc3Rpd2ViX3BhcmFtZXRlcnMnXSA9IGJ0b2EoanNvblBhcmFtcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXNPYmplY3QpIHsgcmV0dXJuIHBvc3RQYXJhbXM7IH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbmV3VG9rZW4oKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGEgPSAnMTIzNDU2Nzg5MGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6Jy5zcGxpdCgnJyk7XHJcbiAgICBjb25zdCBiID0gW107XHJcbiAgICBjb25zdCBsZW5ndGggPSAzMjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgaiA9IChNYXRoLnJhbmRvbSgpICogKGEubGVuZ3RoIC0gMSkpLnRvRml4ZWQoMCk7XHJcbiAgICAgIGJbaV0gPSBhW2pdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGIuam9pbignJyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldHVwT3B0aW9ucygpIHtcclxuICAgIGlmICghdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvUG93ZXJQb2ludCAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvUGRmICYmICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9YcHMgJiZcclxuICAgICAgIXRoaXMub3B0aW9ucy5leHBvcnRzLnNob3dFeHBvcnRUb09wZW5Eb2N1bWVudFdyaXRlciAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvT3BlbkRvY3VtZW50Q2FsYyAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvVGV4dCAmJlxyXG4gICAgICAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvUnRmICYmICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9Xb3JkMjAwNyAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvQ3N2ICYmICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9Kc29uICYmXHJcbiAgICAgICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9EYmYgJiYgIXRoaXMub3B0aW9ucy5leHBvcnRzLnNob3dFeHBvcnRUb1htbCAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvRGlmICYmICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9TeWxrICYmXHJcbiAgICAgICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9FeGNlbCAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvRXhjZWwyMDA3ICYmICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9FeGNlbFhtbCAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvSHRtbCAmJlxyXG4gICAgICAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvSHRtbDUgJiYgIXRoaXMub3B0aW9ucy5leHBvcnRzLnNob3dFeHBvcnRUb01odCAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvSW1hZ2VCbXAgJiYgIXRoaXMub3B0aW9ucy5leHBvcnRzLnNob3dFeHBvcnRUb0ltYWdlR2lmICYmXHJcbiAgICAgICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9JbWFnZUpwZWcgJiYgIXRoaXMub3B0aW9ucy5leHBvcnRzLnNob3dFeHBvcnRUb0ltYWdlTWV0YWZpbGUgJiYgIXRoaXMub3B0aW9ucy5leHBvcnRzLnNob3dFeHBvcnRUb0ltYWdlUGN4ICYmXHJcbiAgICAgICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9JbWFnZVBuZyAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvSW1hZ2VUaWZmICYmICF0aGlzLm9wdGlvbnMuZXhwb3J0cy5zaG93RXhwb3J0VG9JbWFnZVN2ZyAmJiAhdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvSW1hZ2VTdmd6KSB7XHJcbiAgICAgIGlmICghdGhpcy5vcHRpb25zLmV4cG9ydHMuc2hvd0V4cG9ydFRvRG9jdW1lbnQpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5zaG93U2F2ZUJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub3B0aW9ucy50b29sYmFyLnNob3dTZW5kRW1haWxCdXR0b24gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIE9wdGlvbnNcclxuICAgIHRoaXMub3B0aW9ucy5pc1RvdWNoRGV2aWNlID0gdGhpcy5vcHRpb25zLmFwcGVhcmFuY2UuaW50ZXJmYWNlVHlwZSA9PT0gJ0F1dG8nXHJcbiAgICAgID8gdGhpcy5pc1RvdWNoRGV2aWNlKCkgJiYgdGhpcy5pc01vYmlsZURldmljZSgpXHJcbiAgICAgIDogdGhpcy5vcHRpb25zLmFwcGVhcmFuY2UuaW50ZXJmYWNlVHlwZSA9PT0gJ1RvdWNoJztcclxuICAgIHRoaXMub3B0aW9ucy5pc01vYmlsZURldmljZSA9IHRoaXMub3B0aW9ucy5hcHBlYXJhbmNlLmludGVyZmFjZVR5cGUgPT09ICdBdXRvJyAmJiAhdGhpcy5vcHRpb25zLnJlcG9ydERlc2lnbmVyTW9kZVxyXG4gICAgICA/IHRoaXMuaXNUb3VjaERldmljZSgpICYmIHRoaXMuaXNNb2JpbGVEZXZpY2UoKVxyXG4gICAgICA6IHRoaXMub3B0aW9ucy5hcHBlYXJhbmNlLmludGVyZmFjZVR5cGUgPT09ICdNb2JpbGUnO1xyXG5cclxuICAgIGlmICh0aGlzLm9wdGlvbnMuaXNNb2JpbGVEZXZpY2UpIHtcclxuICAgICAgdGhpcy5pbml0aWFsaXplTW9iaWxlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5zaG93UGluVG9vbGJhckJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY29udHJvbHMudG9vbGJhci52aXNpYmxlID0gdGhpcy5vcHRpb25zLnRvb2xiYXIudmlzaWJsZTtcclxuICAgIHRoaXMub3B0aW9ucy5tZW51QW5pbUR1cmF0aW9uID0gMTUwO1xyXG4gICAgdGhpcy5vcHRpb25zLmZvcm1BbmltRHVyYXRpb24gPSAyMDA7XHJcbiAgICB0aGlzLm9wdGlvbnMuc2Nyb2xsRHVyYXRpb24gPSAzNTA7XHJcbiAgICB0aGlzLm9wdGlvbnMubWVudUhpZGVEZWxheSA9IDI1MDtcclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuc2VydmVyLnRpbWVvdXRBdXRvVXBkYXRlQ2FjaGUgPSAxODAwMDA7XHJcbiAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmdldEhUTUxDb2xvcih0aGlzLm9wdGlvbnMudG9vbGJhci5iYWNrZ3JvdW5kQ29sb3IpO1xyXG4gICAgdGhpcy5vcHRpb25zLnRvb2xiYXIuYm9yZGVyQ29sb3IgPSB0aGlzLmdldEhUTUxDb2xvcih0aGlzLm9wdGlvbnMudG9vbGJhci5ib3JkZXJDb2xvcik7XHJcbiAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5mb250Q29sb3IgPSB0aGlzLmdldEhUTUxDb2xvcih0aGlzLm9wdGlvbnMudG9vbGJhci5mb250Q29sb3IpO1xyXG4gICAgdGhpcy5vcHRpb25zLmFwcGVhcmFuY2UucGFnZUJvcmRlckNvbG9yID0gdGhpcy5nZXRIVE1MQ29sb3IodGhpcy5vcHRpb25zLmFwcGVhcmFuY2UucGFnZUJvcmRlckNvbG9yKTtcclxuICAgIHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzVmFsdWVzID0ge307XHJcbiAgICB0aGlzLm9wdGlvbnMucGFyYW1ldGVyUm93SGVpZ2h0ID0gdGhpcy5vcHRpb25zLmlzVG91Y2hEZXZpY2UgPyAzNSA6IDMwO1xyXG4gICAgdGhpcy5vcHRpb25zLm1pblBhcmFtZXRlcnNDb3VudEZvck11bHRpQ29sdW1ucyA9IDU7XHJcblxyXG4gICAgLy8gRmlyc3QgRGF5IE9mIFdlZWtcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5kYXRlUGlja2VyRmlyc3REYXlPZldlZWsgPT09ICdTdW5kYXknKSB7XHJcbiAgICAgIHRoaXMuZGF5T2ZXZWVrLnNwbGljZSg2LCAxKTtcclxuICAgICAgdGhpcy5kYXlPZldlZWsuc3BsaWNlKDAsIDAsICdTdW5kYXknKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5vcHRpb25zPy50b29sYmFyPy56b29tID09PSAtMSB8fCB0aGlzLm9wdGlvbnM/LnRvb2xiYXI/Lnpvb20gPT09IC0yKSB7XHJcbiAgICAgIHRoaXMucmVwb3J0UGFyYW1zLmF1dG9ab29tID0gdGhpcy5vcHRpb25zPy50b29sYmFyPy56b29tO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdGlvbnNcclxuICAgIGlmICghdGhpcy5vcHRpb25zLmFjdGlvbnMuZ2V0UmVwb3J0KSB7IHRoaXMub3B0aW9ucy5hY3Rpb25zLmdldFJlcG9ydCA9IHRoaXMub3B0aW9ucy5hY3Rpb25zLnZpZXdlckV2ZW50OyB9XHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5hY3Rpb25zLnByaW50UmVwb3J0KSB7IHRoaXMub3B0aW9ucy5hY3Rpb25zLnByaW50UmVwb3J0ID0gdGhpcy5vcHRpb25zLmFjdGlvbnMudmlld2VyRXZlbnQ7IH1cclxuICAgIGlmICghdGhpcy5vcHRpb25zLmFjdGlvbnMub3BlblJlcG9ydCkgeyB0aGlzLm9wdGlvbnMuYWN0aW9ucy5vcGVuUmVwb3J0ID0gdGhpcy5vcHRpb25zLmFjdGlvbnMudmlld2VyRXZlbnQ7IH1cclxuICAgIGlmICghdGhpcy5vcHRpb25zLmFjdGlvbnMuZXhwb3J0UmVwb3J0KSB7IHRoaXMub3B0aW9ucy5hY3Rpb25zLmV4cG9ydFJlcG9ydCA9IHRoaXMub3B0aW9ucy5hY3Rpb25zLnZpZXdlckV2ZW50OyB9XHJcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5hY3Rpb25zLmludGVyYWN0aW9uKSB7IHRoaXMub3B0aW9ucy5hY3Rpb25zLmludGVyYWN0aW9uID0gdGhpcy5vcHRpb25zLmFjdGlvbnMudmlld2VyRXZlbnQ7IH1cclxuXHJcbiAgICBpZiAoISh3aW5kb3cuRmlsZSAmJiB3aW5kb3cuRmlsZVJlYWRlciAmJiB3aW5kb3cuRmlsZUxpc3QgJiYgd2luZG93LkJsb2IpKSB7IHRoaXMub3B0aW9ucy50b29sYmFyLnNob3dPcGVuQnV0dG9uID0gZmFsc2U7IH1cclxuXHJcbiAgICAvLyBSZW5kZXIgSnNWaWV3ZXIgc3R5bGVzIGludG8gSEVBRFxyXG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZXF1ZXN0UmVzb3VyY2VzVXJsIHx8IHRoaXMub3B0aW9ucy5hcHBlYXJhbmNlLmN1c3RvbVN0eWxlc1VybCkge1xyXG4gICAgICBjb25zdCB2aWV3ZXJTdHlsZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XHJcbiAgICAgIHZpZXdlclN0eWxlcy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTtcclxuICAgICAgdmlld2VyU3R5bGVzLnNldEF0dHJpYnV0ZSgncmVsJywgJ3N0eWxlc2hlZXQnKTtcclxuICAgICAgdmlld2VyU3R5bGVzLnNldEF0dHJpYnV0ZSgnaHJlZicsIHRoaXMub3B0aW9ucy5hcHBlYXJhbmNlLmN1c3RvbVN0eWxlc1VybCB8fCB0aGlzLmdldFJlc291cmNlVXJsKCdzdHlsZXMnKSk7XHJcbiAgICAgIHRoaXMuY29udHJvbHMuaGVhZC5hcHBlbmRDaGlsZCh2aWV3ZXJTdHlsZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMub3B0aW9ucy52aWV3ZXJJZCA9IChNYXRoLnJhbmRvbSgpICogMTAwMDAwMCkudG9TdHJpbmcoKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBwYWdlc05hdmlnYXRpb25Jc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAodGhpcy5vcHRpb25zLmFwcGVhcmFuY2UuZnVsbFNjcmVlbk1vZGUgfHwgdGhpcy5vcHRpb25zLmFwcGVhcmFuY2Uuc2Nyb2xsYmFyc01vZGUpICYmIHRoaXMucmVwb3J0UGFyYW1zLnZpZXdNb2RlID09PSAnQ29udGludW91cyc7XHJcbiAgfVxyXG5cclxuICBnZXQgaW1hZ2VzRm9yQm9va21hcmsoKTogYW55IHtcclxuICAgIGlmICghdGhpcy5faW1hZ2VzRm9yQm9va21hcmspIHtcclxuICAgICAgY29uc3QgbmFtZXMgPSBbJ3Jvb3QnLCAnZm9sZGVyJywgJ2ZvbGRlck9wZW4nLCAnbm9kZScsICdlbXB0eScsICdsaW5lJywgJ2pvaW4nLCAnam9pbkJvdHRvbScsICdwbHVzJywgJ3BsdXNCb3R0b20nLCAnbWludXMnLCAnbWludXNCb3R0b20nXTtcclxuICAgICAgY29uc3QgaW1hZ2VzRm9yQm9va21hcmtzID0ge307XHJcbiAgICAgIG5hbWVzLmZvckVhY2gobmFtZSA9PiBpbWFnZXNGb3JCb29rbWFya3NbbmFtZV0gPSB0aGlzLmltYWdlc1snQm9va21hcmtzJyArIG5hbWUgKyAnLnBuZyddKTtcclxuICAgICAgdGhpcy5faW1hZ2VzRm9yQm9va21hcmsgPSBpbWFnZXNGb3JCb29rbWFya3M7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5faW1hZ2VzRm9yQm9va21hcms7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgaXNUb3VjaERldmljZSgpIHtcclxuICAgIHJldHVybiAoJ29udG91Y2hzdGFydCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc01vYmlsZURldmljZSgpIHtcclxuICAgIHJldHVybiAvaVBob25lfGlQYWR8aVBvZHxNYWNpbnRvc2h8QW5kcm9pZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXRpYWxpemVNb2JpbGUoKSB7XHJcbiAgICBsZXQgaXNWaWV3UG9ydEV4aXN0ID0gZmFsc2U7XHJcbiAgICBjb25zdCBtZXRhczogYW55ID0gdGhpcy5jb250cm9scy5oZWFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJyk7XHJcbiAgICBmb3IgKGNvbnN0IG1ldGEgb2YgbWV0YXMpIHtcclxuICAgICAgaWYgKG1ldGEubmFtZSAmJiBtZXRhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3ZpZXdwb3J0Jykge1xyXG4gICAgICAgIGlzVmlld1BvcnRFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzVmlld1BvcnRFeGlzdCkge1xyXG4gICAgICBjb25zdCB2aWV3UG9ydFRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKTtcclxuICAgICAgdmlld1BvcnRUYWcuaWQgPSAndmlld3BvcnQnO1xyXG4gICAgICB2aWV3UG9ydFRhZy5uYW1lID0gJ3ZpZXdwb3J0JztcclxuICAgICAgdmlld1BvcnRUYWcuY29udGVudCA9ICdpbml0aWFsLXNjYWxlPTEuMCx3aWR0aD1kZXZpY2Utd2lkdGgsdXNlci1zY2FsYWJsZT0wJztcclxuICAgICAgdGhpcy5jb250cm9scy5oZWFkLmFwcGVuZENoaWxkKHZpZXdQb3J0VGFnKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5mdWxsU2NyZWVuTW9kZSA9IHRydWU7XHJcbiAgICB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5zY3JvbGxiYXJzTW9kZSA9IHRydWU7XHJcbiAgICB0aGlzLm9wdGlvbnMuYXBwZWFyYW5jZS5wYXJhbWV0ZXJzUGFuZWxQb3NpdGlvbiA9ICdMZWZ0JztcclxuICAgIHRoaXMub3B0aW9ucy5hcHBlYXJhbmNlLnBhcmFtZXRlcnNQYW5lbENvbHVtbnNDb3VudCA9IDE7XHJcbiAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9ICdTZXBhcmF0ZWQnO1xyXG4gICAgdGhpcy5vcHRpb25zLnRvb2xiYXIudmlld01vZGUgPSAnU2luZ2xlUGFnZSc7XHJcbiAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5zaG93Wm9vbUJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgY29uc3QgZGVmYXVsdFpvb20gPSB0aGlzLm9wdGlvbnMudG9vbGJhci56b29tID09PSAtMiA/IC0yIDogLTE7IC8vIFBhZ2VXaWR0aCBvciBQYWdlSGVpZ2h0XHJcbiAgICB0aGlzLm9wdGlvbnMudG9vbGJhci56b29tID0gdGhpcy5yZXBvcnRQYXJhbXMuem9vbSA9IGRlZmF1bHRab29tO1xyXG4gICAgdGhpcy5vcHRpb25zLnRvb2xiYXIuc2hvd0J1dHRvbkNhcHRpb25zID0gZmFsc2U7XHJcbiAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5zaG93T3BlbkJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5vcHRpb25zLnRvb2xiYXIuc2hvd0ZpbmRCdXR0b24gPSBmYWxzZTtcclxuICAgIHRoaXMub3B0aW9ucy50b29sYmFyLnNob3dFZGl0b3JCdXR0b24gPSBmYWxzZTtcclxuICAgIHRoaXMub3B0aW9ucy50b29sYmFyLnNob3dGdWxsU2NyZWVuQnV0dG9uID0gZmFsc2U7XHJcbiAgICB0aGlzLm9wdGlvbnMudG9vbGJhci5zaG93QWJvdXRCdXR0b24gPSBmYWxzZTtcclxuICAgIHRoaXMub3B0aW9ucy50b29sYmFyLnNob3dWaWV3TW9kZUJ1dHRvbiA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldEltYWdlc1NjYWxpbmdGYWN0b3IoKSB7XHJcbiAgICBjb25zdCB3bmQ6IGFueSA9IHdpbmRvdztcclxuICAgIGNvbnN0IGRldmljZVBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAod25kLmRldmljZVhEUEkgJiYgd25kLmxvZ2ljYWxYRFBJID8gd25kLmRldmljZVhEUEkgLyB3bmQubG9naWNhbFhEUEkgOiAxKTtcclxuICAgIGlmICghZGV2aWNlUGl4ZWxSYXRpbyB8fCBkZXZpY2VQaXhlbFJhdGlvIDw9IDEpIHtcclxuICAgICAgcmV0dXJuICcxJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBkZXZpY2VQaXhlbFJhdGlvLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0SFRNTENvbG9yKGNvbG9yOiBhbnkpIHtcclxuICAgIGlmIChjb2xvci5pbmRleE9mKCcsJykgPiAwICYmIGNvbG9yLmluZGV4T2YoJ3JnYicpIDwgMCkge1xyXG4gICAgICByZXR1cm4gYHJnYigke2NvbG9yfSlgO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbG9yO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFJlc291cmNlVXJsKHJlc291cmNlUGFyYW1ldGVyOiBzdHJpbmcpIHtcclxuICAgIGxldCB1cmwgPSB0aGlzLmdldEFjdGlvblJlcXVlc3RVcmwodGhpcy5vcHRpb25zLnJlcXVlc3RSZXNvdXJjZXNVcmwsIHRoaXMub3B0aW9ucy5hY3Rpb25zLnZpZXdlckV2ZW50KTtcclxuICAgIHVybCArPSB1cmwuaW5kZXhPZignPycpID4gMCA/ICcmJyA6ICc/JztcclxuICAgIHVybCArPSAnc3Rpd2ViX2NvbXBvbmVudD1WaWV3ZXImc3Rpd2ViX2FjdGlvbj1SZXNvdXJjZSZzdGl3ZWJfZGF0YT0nICsgcmVzb3VyY2VQYXJhbWV0ZXIgKyAnJnN0aXdlYl90aGVtZT0nICsgdGhpcy5vcHRpb25zLnRoZW1lO1xyXG4gICAgdXJsICs9ICcmc3Rpd2ViX2NhY2hlbW9kZT0nICsgKHRoaXMub3B0aW9ucy5zZXJ2ZXIudXNlQ2FjaGVGb3JSZXNvdXJjZXNcclxuICAgICAgPyB0aGlzLm9wdGlvbnMuc2VydmVyLmNhY2hlTW9kZSA9PT0gJ09iamVjdFNlc3Npb24nIHx8IHRoaXMub3B0aW9ucy5zZXJ2ZXIuY2FjaGVNb2RlID09PSAnU3RyaW5nU2Vzc2lvbidcclxuICAgICAgICA/ICdzZXNzaW9uJ1xyXG4gICAgICAgIDogJ2NhY2hlJ1xyXG4gICAgICA6ICdub25lJyk7XHJcbiAgICB1cmwgKz0gJyZzdGl3ZWJfdmVyc2lvbj0nICsgdGhpcy5vcHRpb25zLnNob3J0UHJvZHVjdFZlcnNpb247XHJcblxyXG4gICAgcmV0dXJuIHVybDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRBY3Rpb25SZXF1ZXN0VXJsKHJlcXVlc3RVcmw6IHN0cmluZywgYWN0aW9uPzogc3RyaW5nKSB7XHJcbiAgICBpZiAoIWFjdGlvbikge1xyXG4gICAgICByZXR1cm4gcmVxdWVzdFVybDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWN0aW9uLmluZGV4T2YoJz8nKSA8IDApIHtcclxuICAgICAgcmV0dXJuIHJlcXVlc3RVcmwucmVwbGFjZSgne2FjdGlvbn0nLCBhY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHF1ZXJ5ID0gYWN0aW9uLnN1YnN0cmluZyhhY3Rpb24uaW5kZXhPZignPycpICsgMSk7XHJcbiAgICBhY3Rpb24gPSBhY3Rpb24uc3Vic3RyaW5nKDAsIGFjdGlvbi5pbmRleE9mKCc/JykpO1xyXG5cclxuICAgIHJldHVybiByZXF1ZXN0VXJsLnJlcGxhY2UoJ3thY3Rpb259JywgYWN0aW9uKSArIChyZXF1ZXN0VXJsLmluZGV4T2YoJz8nKSA+IDAgPyAnJicgOiAnPycpICsgcXVlcnk7XHJcbiAgfVxyXG59XHJcbiJdfQ==