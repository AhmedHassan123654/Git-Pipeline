import { __decorate, __values } from "tslib";
import { Injectable } from '@angular/core';
import { ModelService } from './model.service';
var StylesService = /** @class */ (function () {
    function StylesService(model) {
        this.model = model;
        this.pagesCss = {};
    }
    StylesService.prototype.setupStyle = function (style, id) {
        var _a;
        if (this.pagesCss[id] == null) {
            this.pagesCss[id] = document.createElement('STYLE');
            this.pagesCss[id].id = ((_a = this.model.options) === null || _a === void 0 ? void 0 : _a.viewerId) + 'Styles';
            this.pagesCss[id].setAttribute('type', 'text/css');
            this.model.controls.head.appendChild(this.pagesCss[id]);
        }
        if (this.pagesCss[id].styleSheet) {
            this.pagesCss[id].styleSheet.cssText = style;
        }
        else {
            this.pagesCss[id].innerHTML = style;
        }
    };
    StylesService.prototype.addCustomFontStyles = function (customFonts) {
        if (!customFonts) {
            return;
        }
        var existsStyles = [];
        try {
            existsStyles = document.getElementsByTagName('head')[0].getElementsByTagName('style');
        }
        catch (e) { }
        customFonts.forEach(function (customFont) {
            var e_1, _a;
            if (customFont.contentForCss && customFont.originalFontFamily) {
                var style = document.createElement('style');
                style.innerHTML = "@font-face {\r\nfont-family: '" + customFont.originalFontFamily + "';\r\n src: url(" + customFont.contentForCss + ");\r\n }";
                var existsThisStyle = false;
                try {
                    for (var existsStyles_1 = __values(existsStyles), existsStyles_1_1 = existsStyles_1.next(); !existsStyles_1_1.done; existsStyles_1_1 = existsStyles_1.next()) {
                        var estyle = existsStyles_1_1.value;
                        if (estyle.innerHTML.indexOf("font-family: '" + customFont.originalFontFamily + "'") > 0) {
                            existsThisStyle = true;
                            break;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (existsStyles_1_1 && !existsStyles_1_1.done && (_a = existsStyles_1.return)) _a.call(existsStyles_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                if (!existsThisStyle) {
                    document.getElementsByTagName('head')[0].appendChild(style);
                }
            }
        });
    };
    StylesService.prototype.addChartScript = function (script) {
        var currChartScripts = document.getElementById(this.model.options.viewerId + 'chartScriptJsViewer');
        if (currChartScripts) {
            this.model.controls.head.removeChild(currChartScripts);
        }
        if (script) {
            var chartScripts = document.createElement('Script');
            chartScripts.setAttribute('type', 'text/javascript');
            chartScripts.id = this.model.options.viewerId + 'chartScriptJsViewer';
            chartScripts.textContent = script;
            this.model.controls.head.appendChild(chartScripts);
        }
    };
    StylesService.ctorParameters = function () { return [
        { type: ModelService }
    ]; };
    StylesService = __decorate([
        Injectable()
    ], StylesService);
    return StylesService;
}());
export { StylesService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3R5bGVzLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL3N0eWxlcy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUcvQztJQUdFLHVCQUFvQixLQUFtQjtRQUFuQixVQUFLLEdBQUwsS0FBSyxDQUFjO1FBRi9CLGFBQVEsR0FBRyxFQUFFLENBQUM7SUFFcUIsQ0FBQztJQUVyQyxrQ0FBVSxHQUFqQixVQUFrQixLQUFhLEVBQUUsRUFBVTs7UUFDekMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRTtZQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDcEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsT0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sMENBQUUsUUFBUSxJQUFHLFFBQVEsQ0FBQztZQUMvRCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDbkQsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDekQ7UUFDRCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFO1lBQ2hDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7U0FDOUM7YUFBTTtZQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztTQUNyQztJQUNILENBQUM7SUFFTSwyQ0FBbUIsR0FBMUIsVUFBMkIsV0FBa0I7UUFDM0MsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUFFLE9BQU87U0FBRTtRQUU3QixJQUFJLFlBQVksR0FBUSxFQUFFLENBQUM7UUFDM0IsSUFBSTtZQUNGLFlBQVksR0FBRyxRQUFRLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDdkY7UUFBQyxPQUFPLENBQUMsRUFBRSxHQUFHO1FBRWYsV0FBVyxDQUFDLE9BQU8sQ0FBQyxVQUFDLFVBQWU7O1lBQ2xDLElBQUksVUFBVSxDQUFDLGFBQWEsSUFBSSxVQUFVLENBQUMsa0JBQWtCLEVBQUU7Z0JBQzdELElBQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzlDLEtBQUssQ0FBQyxTQUFTLEdBQUcsbUNBQWlDLFVBQVUsQ0FBQyxrQkFBa0Isd0JBQW1CLFVBQVUsQ0FBQyxhQUFhLGFBQVUsQ0FBQztnQkFFdEksSUFBSSxlQUFlLEdBQUcsS0FBSyxDQUFDOztvQkFFNUIsS0FBcUIsSUFBQSxpQkFBQSxTQUFBLFlBQVksQ0FBQSwwQ0FBQSxvRUFBRTt3QkFBOUIsSUFBTSxNQUFNLHlCQUFBO3dCQUNmLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsbUJBQWlCLFVBQVUsQ0FBQyxrQkFBa0IsTUFBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFOzRCQUNuRixlQUFlLEdBQUcsSUFBSSxDQUFDOzRCQUN2QixNQUFNO3lCQUNQO3FCQUNGOzs7Ozs7Ozs7Z0JBRUQsSUFBSSxDQUFDLGVBQWUsRUFBRTtvQkFDcEIsUUFBUSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztpQkFDN0Q7YUFDRjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUdNLHNDQUFjLEdBQXJCLFVBQXNCLE1BQWM7UUFDbEMsSUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBRyxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3RHLElBQUksZ0JBQWdCLEVBQUU7WUFDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQ3hEO1FBRUQsSUFBSSxNQUFNLEVBQUU7WUFDVixJQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3RELFlBQVksQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLGlCQUFpQixDQUFDLENBQUM7WUFDckQsWUFBWSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcscUJBQXFCLENBQUM7WUFDdEUsWUFBWSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7WUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUNwRDtJQUNILENBQUM7O2dCQTNEMEIsWUFBWTs7SUFINUIsYUFBYTtRQUR6QixVQUFVLEVBQUU7T0FDQSxhQUFhLENBaUV6QjtJQUFELG9CQUFDO0NBQUEsQUFqRUQsSUFpRUM7U0FqRVksYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi9tb2RlbC5zZXJ2aWNlJztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIFN0eWxlc1NlcnZpY2Uge1xyXG4gIHByaXZhdGUgcGFnZXNDc3MgPSB7fTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtb2RlbDogTW9kZWxTZXJ2aWNlKSB7IH1cclxuXHJcbiAgcHVibGljIHNldHVwU3R5bGUoc3R5bGU6IHN0cmluZywgaWQ6IHN0cmluZykge1xyXG4gICAgaWYgKHRoaXMucGFnZXNDc3NbaWRdID09IG51bGwpIHtcclxuICAgICAgdGhpcy5wYWdlc0Nzc1tpZF0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTVFlMRScpO1xyXG4gICAgICB0aGlzLnBhZ2VzQ3NzW2lkXS5pZCA9IHRoaXMubW9kZWwub3B0aW9ucz8udmlld2VySWQgKyAnU3R5bGVzJztcclxuICAgICAgdGhpcy5wYWdlc0Nzc1tpZF0uc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7XHJcbiAgICAgIHRoaXMubW9kZWwuY29udHJvbHMuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnBhZ2VzQ3NzW2lkXSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wYWdlc0Nzc1tpZF0uc3R5bGVTaGVldCkge1xyXG4gICAgICB0aGlzLnBhZ2VzQ3NzW2lkXS5zdHlsZVNoZWV0LmNzc1RleHQgPSBzdHlsZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucGFnZXNDc3NbaWRdLmlubmVySFRNTCA9IHN0eWxlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFkZEN1c3RvbUZvbnRTdHlsZXMoY3VzdG9tRm9udHM6IGFueVtdKSB7XHJcbiAgICBpZiAoIWN1c3RvbUZvbnRzKSB7IHJldHVybjsgfVxyXG5cclxuICAgIGxldCBleGlzdHNTdHlsZXM6IGFueSA9IFtdO1xyXG4gICAgdHJ5IHtcclxuICAgICAgZXhpc3RzU3R5bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3R5bGUnKTtcclxuICAgIH0gY2F0Y2ggKGUpIHsgfVxyXG5cclxuICAgIGN1c3RvbUZvbnRzLmZvckVhY2goKGN1c3RvbUZvbnQ6IGFueSkgPT4ge1xyXG4gICAgICBpZiAoY3VzdG9tRm9udC5jb250ZW50Rm9yQ3NzICYmIGN1c3RvbUZvbnQub3JpZ2luYWxGb250RmFtaWx5KSB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IGBAZm9udC1mYWNlIHtcXHJcXG5mb250LWZhbWlseTogJyR7Y3VzdG9tRm9udC5vcmlnaW5hbEZvbnRGYW1pbHl9JztcXHJcXG4gc3JjOiB1cmwoJHtjdXN0b21Gb250LmNvbnRlbnRGb3JDc3N9KTtcXHJcXG4gfWA7XHJcblxyXG4gICAgICAgIGxldCBleGlzdHNUaGlzU3R5bGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBlc3R5bGUgb2YgZXhpc3RzU3R5bGVzKSB7XHJcbiAgICAgICAgICBpZiAoZXN0eWxlLmlubmVySFRNTC5pbmRleE9mKGBmb250LWZhbWlseTogJyR7Y3VzdG9tRm9udC5vcmlnaW5hbEZvbnRGYW1pbHl9J2ApID4gMCkge1xyXG4gICAgICAgICAgICBleGlzdHNUaGlzU3R5bGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZXhpc3RzVGhpc1N0eWxlKSB7XHJcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKHN0eWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBhZGRDaGFydFNjcmlwdChzY3JpcHQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgY3VyckNoYXJ0U2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMubW9kZWwub3B0aW9ucy52aWV3ZXJJZCArICdjaGFydFNjcmlwdEpzVmlld2VyJyk7XHJcbiAgICBpZiAoY3VyckNoYXJ0U2NyaXB0cykge1xyXG4gICAgICB0aGlzLm1vZGVsLmNvbnRyb2xzLmhlYWQucmVtb3ZlQ2hpbGQoY3VyckNoYXJ0U2NyaXB0cyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNjcmlwdCkge1xyXG4gICAgICBjb25zdCBjaGFydFNjcmlwdHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdTY3JpcHQnKTtcclxuICAgICAgY2hhcnRTY3JpcHRzLnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcclxuICAgICAgY2hhcnRTY3JpcHRzLmlkID0gdGhpcy5tb2RlbC5vcHRpb25zLnZpZXdlcklkICsgJ2NoYXJ0U2NyaXB0SnNWaWV3ZXInO1xyXG4gICAgICBjaGFydFNjcmlwdHMudGV4dENvbnRlbnQgPSBzY3JpcHQ7XHJcbiAgICAgIHRoaXMubW9kZWwuY29udHJvbHMuaGVhZC5hcHBlbmRDaGlsZChjaGFydFNjcmlwdHMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG59XHJcbiJdfQ==