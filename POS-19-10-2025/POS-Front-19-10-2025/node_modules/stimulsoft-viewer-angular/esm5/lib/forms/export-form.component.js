import { __decorate } from "tslib";
import { Component, Input, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { ExportService } from '../services/export.service';
import { HelperService } from '../services/helper.service';
import { FormService } from './form.service';
import { MenuService } from '../menu/menu.service';
import { CollectionsService } from '../services/collections.service';
import { ControllerService } from '../services/controller.service';
var ExportFormComponent = /** @class */ (function () {
    function ExportFormComponent(model, exportService, helper, formService, menuService, collections, controller) {
        this.model = model;
        this.exportService = exportService;
        this.helper = helper;
        this.formService = formService;
        this.menuService = menuService;
        this.collections = collections;
        this.controller = controller;
        this.PROPERTY_ALIAS = {
            ImageFormatForHtml: 'ImageFormat',
            EncodingTextOrCsvFile: 'Encoding',
            ExportModeRtf: 'ExportMode',
            EncodingDifFile: 'Encoding',
            EncodingDbfFile: 'CodePage'
        };
        this.formVisible = false;
        this.disabledComponents = {};
    }
    ExportFormComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        var _a, _b;
        if (this.baseForm && ((_b = (_a = this.formService) === null || _a === void 0 ? void 0 : _a.form) === null || _b === void 0 ? void 0 : _b.name) === this.baseForm.name) {
            setTimeout(function () { return _this.updateDisabledComponents(); });
        }
    };
    ExportFormComponent.prototype.ngOnInit = function () { };
    ExportFormComponent.prototype.action = function () {
        this.formService.closeForm(this.baseForm.name);
        if (this.model.options.exports.storeExportSettings) {
            this.helper.setCookie('StimulsoftWebViewerExportSettings' + this.exportService.getCommonExportFormat(), JSON.stringify(this.exportService.exportSettings));
        }
        this.exportService.postExport();
    };
    ExportFormComponent.prototype.updateDisabledComponents = function () {
        var _this = this;
        var _a;
        ['StandardPdfFonts', 'EmbeddedFonts', 'UseUnicode'].forEach(function (n) { return _this.disabledComponents[n] = (_this.exportService.exportSettings.PdfACompliance === true); });
        this.disabledComponents.ImageQuality = this.exportService.exportSettings.ImageCompressionMethod && this.exportService.exportSettings.ImageCompressionMethod !== 'Jpeg';
        this.disabledComponents.ExportObjectFormatting = this.exportService.exportSettings.DataExportMode === 'AllBands';
        this.disabledComponents.UseOnePageHeaderAndFooter = this.exportService.exportSettings.DataExportMode != 'AllBands';
        this.disabledComponents.EncodingDifFile = this.exportService.exportSettings.UseDefaultSystemEncoding;
        this.disabledComponents.TiffCompressionScheme = this.exportService.exportSettings.ImageType !== 'Tiff';
        this.disabledComponents.UseDigitalSignature = !this.exportService.exportSettings.UseDigitalSignature || !(((_a = this.model.pdfSecurityCertificates) === null || _a === void 0 ? void 0 : _a.length) > 0);
        this.disabledComponents.RemoveEmptySpaceAtBottom = this.exportService.exportSettings.UsePageHeadersAndFooters;
        if (this.exportService.exportSettings.ImageType != null) {
            var ifComponent = this.exportService.exportFormSettings.components.find(function (c) { return c.name === 'ImageFormat'; });
            if (ifComponent != null) {
                ifComponent.items = this.collections.getImageFormatItems(this.exportService.exportSettings.ImageType === 'Emf');
            }
        }
        this.disabledComponents.DitheringType = this.exportService.exportSettings.ImageFormat !== 'Monochrome';
        if (this.saveReportMdc) {
            this.saveReportMdc.click();
        }
        if (this.pagesRangeAll && !this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled) {
            this.pagesRangeAll.click();
        }
        if (this.pageRangeCurrentPage && this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled) {
            this.pageRangeCurrentPage.click();
        }
        if (this.exportService.exportSettings.CompressToArchive === true) {
            this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled = false;
        }
        if (this.exportService.exportSettings.CompressToArchive === false) {
            this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled = true;
        }
    };
    ExportFormComponent.prototype.componentAction = function (comp, value) {
        var property = this.PROPERTY_ALIAS[comp.name] || comp.name;
        switch (property) {
            case 'EmbeddedFonts':
            case 'UseUnicode':
                if (value) {
                    this.exportService.exportSettings.StandardPdfFonts = false;
                }
                break;
            case 'StandardPdfFonts':
                if (value) {
                    this.exportService.exportSettings.EmbeddedFonts = false;
                    this.exportService.exportSettings.UseUnicode = false;
                }
                break;
            case 'ImageType':
                this.exportService.export('Image' + value, true);
                break;
            case 'DataType':
            case 'HtmlType':
                this.exportService.export(value, true);
                break;
            case 'ExcelType':
                var exportFormat = value === 'ExcelBinary' ? 'Excel' : value;
                this.exportService.export(exportFormat, true);
                break;
            case 'UseDigitalSignature':
                if (!(value === true || value === false)) {
                    property = 'CertificateThumbprint';
                }
                if (value === true && this.collections.getPdfSecurityCertificatesItems().length == 0) {
                    value = false;
                    this.controller.showError('Warning', 'Certificate Not Found!');
                }
                break;
            case 'UsePageHeadersAndFooters':
                if (value === true) {
                    this.exportService.exportSettings.RemoveEmptySpaceAtBottom = true;
                }
                break;
        }
        this.exportService.exportSettings[property] = value;
        this.updateDisabledComponents();
    };
    ExportFormComponent.prototype.getValue = function (comp, component) {
        var property = this.PROPERTY_ALIAS[comp.name] || comp.name;
        switch (property) {
            case 'Zoom2':
                return this.exportService.exportSettings[property].toString();
            case 'UseDigitalSignature':
                if (component == 'dropDownList') {
                    return this.exportService.exportSettings['CertificateThumbprint'];
                }
            default:
                return this.exportService.exportSettings[property];
        }
    };
    ExportFormComponent.prototype.changeVisibility = function (state) {
        var _a, _b;
        this.formVisible = state === 'visible';
        if (state === 'hidden' && ((_b = (_a = this.exportFormSettings) === null || _a === void 0 ? void 0 : _a.groups) === null || _b === void 0 ? void 0 : _b.savingReportGroup)) {
            this.helper.setCookie('StimulsoftWebViewerExportSettingsOpeningGroups', JSON.stringify({
                SavingReportGroup: this.exportFormSettings.groups.savingReportGroup.opened,
                PageRangeGroup: this.exportFormSettings.groups.pageRangeGroup.opened,
                SettingsGroup: this.exportFormSettings.groups.settingsGroup.opened
            }));
        }
        if (state === 'visible') {
            this.updateDisabledComponents();
        }
    };
    ExportFormComponent.prototype.showMenu = function (comp, button) {
        var _this = this;
        var menuName = 'documentSecurityMenu';
        if (comp.name === 'DocumentSecurityButton') {
            this.menuService.addMenu({
                type: menuName, name: menuName, items: [], parent: button.button,
                itemStyleName: 'stiJsViewerMenuStandartItem', menuStyleName: 'stiJsViewerDropdownMenu'
            });
        }
        else {
            menuName = this.menuService.VERTICAL_MENU_NAME;
            this.menuService.addMenu({
                type: 'buttonMenu', name: menuName, items: this.collections.getPdfSecurityCertificatesItems(), parent: button.button,
                itemStyleName: 'stiJsViewerMenuStandartItem', menuStyleName: 'stiJsViewerDropdownMenu'
            });
        }
        setTimeout(function () {
            _this.menuService.showMenu(menuName);
        });
    };
    ExportFormComponent.prototype.getTextBoxType = function (name) {
        if (name === 'SaveReportPassword' || name === 'PasswordInputUser' || name === 'PasswordInputOwner') {
            return this.formVisible ? 'password' : '';
        }
        return null;
    };
    ExportFormComponent.ctorParameters = function () { return [
        { type: ModelService },
        { type: ExportService },
        { type: HelperService },
        { type: FormService },
        { type: MenuService },
        { type: CollectionsService },
        { type: ControllerService }
    ]; };
    __decorate([
        ViewChild('baseForm')
    ], ExportFormComponent.prototype, "baseForm", void 0);
    __decorate([
        ViewChild('saveReportMdc')
    ], ExportFormComponent.prototype, "saveReportMdc", void 0);
    __decorate([
        ViewChild('pagesRangeAll')
    ], ExportFormComponent.prototype, "pagesRangeAll", void 0);
    __decorate([
        ViewChild('pageRangeCurrentPage')
    ], ExportFormComponent.prototype, "pageRangeCurrentPage", void 0);
    __decorate([
        Input()
    ], ExportFormComponent.prototype, "exportFormSettings", void 0);
    ExportFormComponent = __decorate([
        Component({
            selector: 'sti-export-form',
            template: "\n    <sti-base-form #baseForm [fontFamily]=\"model.options.toolbar.fontFamily\"\n    [color]=\"model.options.toolbar.fontColor\"\n    [fontSize]=\"'12px'\"\n    [containerPadding]=\"'3px'\"\n    [name]=\"'exportForm'\"\n    [caption]=\"model.loc('ExportFormTitle')\"\n    [defaultTop]=\"150\"\n    (changeVisibility)=\"changeVisibility($event)\"\n    (action)=\"action()\">\n    <table class=\"stiJsViewerClearAllStyles\" cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%;\">\n      <tbody>\n          <tr *ngIf=\"exportFormSettings?.groups.savingReportGroup.visible\" class=\"stiJsViewerClearAllStyles\">\n            <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n              <sti-group-panel [caption]=\"model.loc('SavingReport')\"\n               [width]=\"390\"\n               [margin]=\"'4px'\"\n               [innerPadding]=\"'4px 0 4px 0'\"\n               [opened]=\"exportFormSettings.groups.savingReportGroup.opened\"\n               (action)=\"exportFormSettings.groups.savingReportGroup.opened=$event\">\n                <table class=\"stiJsViewerClearAllStyles\" cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%;\">\n                  <tbody>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-radio-button #saveReportMdc\n                           [name]=\"baseForm.name + 'SaveReportMdc'\"\n                           [groupName]=\"baseForm.name + 'SavingReportGroup'\"\n                           [caption]=\"model.loc('SaveReportMdc')\"\n                           [margin]=\"'6px 8px 3px 8px'\"\n                           [checked]=\"true\"\n                           (action)=\"exportService.exportSettings.Format = 'Mdc'\">\n                        </sti-radio-button>\n                      </td>\n                    </tr>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-radio-button\n                           [name]=\"baseForm.name + 'SaveReportMdz'\"\n                           [groupName]=\"baseForm.name + 'SavingReportGroup'\"\n                           [caption]=\"model.loc('SaveReportMdz')\"\n                           [margin]=\"'3px 8px 3px 8px'\"\n                           (action)=\"exportService.exportSettings.Format = 'Mdz'\">\n                        </sti-radio-button>\n                      </td>\n                    </tr>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-radio-button\n                           [name]=\"baseForm.name + 'SaveReportMdx'\"\n                           [groupName]=\"baseForm.name + 'SavingReportGroup'\"\n                           [caption]=\"model.loc('SaveReportMdx')\"\n                           [margin]=\"'3px 8px 0px 8px'\"\n                           (action)=\"exportService.exportSettings.Format = 'Mdx'\">\n                        </sti-radio-button>\n                      </td>\n                    </tr>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" style=\"padding: 0px 8px; min-width: 150px;\" [attr.title]=\"model.loc('PasswordSaveReportTooltip')\">\n                      {{model.loc('PasswordSaveReport')}}\n                      </td>\n                      <td>\n                        <sti-text-box\n                           [width]=\"140\"\n                           [tooltip]=\"model.loc('PasswordSaveReportTooltip')\"\n                           [margin]=\"'4px 8px 0px 8px'\"\n                           [type]=\"getTextBoxType('SaveReportPassword')\"\n                           [enabled]=\"exportService.exportSettings.Format == 'Mdx'\"\n                           (onchange)=\"exportService.exportSettings.Password = $event.value\">\n                        </sti-text-box>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </sti-group-panel>\n            </td>\n          </tr>\n\n          <tr *ngIf=\"exportFormSettings?.groups.pageRangeGroup.visible\" class=\"stiJsViewerClearAllStyles\">\n            <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n              <sti-group-panel [caption]=\"model.loc('PagesRange')\"\n               [width]=\"390\"\n               [margin]=\"'4px'\"\n               [innerPadding]=\"'4px 0 4px 0'\"\n               [opened]=\"exportFormSettings.groups.pageRangeGroup.opened\"\n               (action)=\"exportFormSettings.groups.pageRangeGroup.opened=$event\">\n                <table class=\"stiJsViewerClearAllStyles\" cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%;\">\n                  <tbody>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-radio-button #pagesRangeAll\n                           [name]=\"baseForm.name + 'PagesRangeAll'\"\n                           [groupName]=\"baseForm.name + 'PageRangeGroup'\"\n                           [caption]=\"model.loc('PagesRangeAll')\"\n                           [tooltip]=\"model.loc('PagesRangeAllTooltip')\"\n                           [margin]=\"'6px 8px 6px 8px'\"\n                           [checked]=\"!exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled\"\n                           [enabled]=\"!exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled\"\n                           (action)=\"exportService.exportSettings.PageRange = 'All'\">\n                        </sti-radio-button>\n                      </td>\n                    </tr>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-radio-button #pageRangeCurrentPage\n                           [name]=\"baseForm.name + 'PageRangeCurrentPage'\"\n                           [groupName]=\"baseForm.name + 'PageRangeGroup'\"\n                           [caption]=\"model.loc('PagesRangeCurrentPage')\"\n                           [tooltip]=\"model.loc('PagesRangeCurrentPageTooltip')\"\n                           [margin]=\"'0px 8px 4px 8px'\"\n                           [checked]=\"exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled\"\n                           (action)=\"exportService.exportSettings.PageRange = (model.reportParams.pageNumber + 1).toString()\">\n                        </sti-radio-button>\n                      </td>\n                    </tr>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-radio-button\n                           [name]=\"baseForm.name + 'PageRangePages'\"\n                           [groupName]=\"baseForm.name + 'PageRangeGroup'\"\n                           [caption]=\"model.loc('PagesRangePages')\"\n                           [tooltip]=\"model.loc('PagesRangePagesTooltip')\"\n                           [margin]=\"'0px 8px 0px 8px'\"\n                           [paddingLeftLastCell]=\"'60px'\"\n                           (action)=\"exportService.exportSettings.PageRange = pagesRange.element.nativeElement.value\">\n                              <sti-text-box #pagesRange\n                                [width]=\"130\"\n                                [tooltip]=\"model.loc('PagesRangePagesTooltip')\"\n                                [margin]=\"'0px 0px 0px 30px'\"\n                                (onchange)=\"exportService.exportSettings.PageRange = $event.value\"\n                                (onblur)=\"exportService.exportSettings.PageRange = $event.value\">\n                              </sti-text-box>\n                        </sti-radio-button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </sti-group-panel>\n            </td>\n          </tr>\n\n        <tr *ngIf=\"exportFormSettings?.groups.settingsGroup.visible\"class=\"stiJsViewerClearAllStyles\">\n            <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n              <sti-group-panel [caption]=\"model.loc('SettingsGroup')\"\n                [opened]=\"exportFormSettings.groups.settingsGroup.opened\"\n                [width]=\"390\"\n                [margin]=\"'4px'\"\n                [innerPadding]=\"'4px 0 4px 0'\"\n                (action)=\"exportFormSettings.groups.settingsGroup.opened=$event\">\n                <table class=\"stiJsViewerClearAllStyles\" cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%;\">\n                  <tbody>\n                    <tr *ngFor=\"let comp of exportFormSettings.components\">\n                      <td *ngIf=\"comp.label != null\" style=\"padding: 0px 8px; min-width: 150px;\" [attr.title]=\"comp.tooltip\">\n                        {{comp.label}}\n                      </td>\n\n                      <td *ngIf=\"comp.name == 'UseDigitalSignature'\">\n                        <sti-check-box\n                           [tooltip]=\"comp.tooltip\"\n                           [margin]=\"comp.margin\"\n                           [captionText]=\"comp.caption\"\n                           [isChecked]=\"getValue(comp)\"\n                           (action)=\"componentAction(comp, $event)\">\n                        </sti-check-box>\n                      </td>\n\n                      <td [attr.colSpan]=\"comp.label != null || comp.name == 'DocumentSecurityButton' || comp.name == 'UseDigitalSignature' ? 1 : 2\">\n                        <sti-drop-down-list-for-export-form *ngIf=\"comp.type == 'DropDownListForExportForm'\"\n                           [width]=\"comp.width\"\n                           [items]=\"comp.items\"\n                           [key]=\"getValue(comp, 'dropDownList')\"\n                           [margin]=\"comp.margin\"\n                           [verticalAlign]=\"comp.name == 'ImageQuality' || comp.name == 'ImageResolution' ? 'middle' : null\"\n                           [styleDisplay]=\"comp.name == 'ImageQuality' || comp.name == 'ImageResolution' ? 'inline-block' : null\"\n                           [enabled]=\"!disabledComponents[comp.name]\"\n                           (action)=\"componentAction(comp, $event.key)\">\n                        </sti-drop-down-list-for-export-form>\n\n                        <div *ngIf=\"comp.name == 'ImageQuality' || comp.name == 'ImageResolution'\"\n                           [style.display]=\"'inline-block'\">\n                          {{comp.name == 'ImageQuality' ? '%' : 'dpi'}}\n                        </div>\n\n                        <sti-text-box *ngIf=\"comp.type == 'TextBox'\"\n                           [width]=\"comp.width\"\n                           [tooltip]=\"comp.tooltip\"\n                           [margin]=\"comp.margin\"\n                           [type]=\"getTextBoxType(comp.name)\"\n                           [enabled]=\"!comp.disabled\"\n                           [value]=\"getValue(comp)\"\n                           [enabled]=\"!disabledComponents[comp.name]\"\n                           (onchange)=\"componentAction(comp, $event.value)\">\n                        </sti-text-box>\n\n                        <sti-check-box *ngIf=\"comp.type == 'CheckBox' || comp.type == 'DigitalSignature'\"\n                           [tooltip]=\"comp.tooltip\"\n                           [margin]=\"comp.margin\"\n                           [captionText]=\"comp.caption\"\n                           [isChecked]=\"getValue(comp)\"\n                           [isEnabled]=\"!disabledComponents[comp.name]\"\n                           (action)=\"componentAction(comp, $event)\">\n                        </sti-check-box>\n\n                      </td>\n\n                      <td *ngIf=\"comp.name == 'DocumentSecurityButton'\">\n                        <sti-button #button\n                           [width]=\"comp.width\"\n                           [arrow]=\"'Down'\"\n                           [minWidth]=\"'163px'\"\n                           [captionAlign]=\"'center'\"\n                           [display]=\"'inline-block'\"\n                           [styleName]=\"'stiJsViewerFormButton'\"\n                           [margin]=\"'2px 8px'\"\n                           [innerTableWidth]=\"'100%'\"\n                           [captionWidth]=\"'100%'\"\n                           [caption]=\"comp.name == 'DocumentSecurityButton' ? comp.caption : ''\"\n                           [enabled]=\"!disabledComponents[comp.name + 'Button']\"\n                           (action)=\"showMenu(comp, button)\">\n                        </sti-button>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n\n              </sti-group-panel>\n            </td>\n        </tr>\n\n        <tr *ngIf=\"model.options.exports.showOpenAfterExport && exportFormSettings?.openAfterExport && !exportService.sendMail\" class=\"stiJsViewerClearAllStyles\">\n            <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                <sti-check-box [captionText]=\"model.loc('OpenAfterExport')\"\n                  [tooltip]=\"model.loc('OpenAfterExportTooltip')\"\n                  [margin]=\"'4px 8px 4px 8px'\"\n                  [isChecked]=\"exportService.exportSettings.OpenAfterExport\"\n                  (action)=\"exportService.exportSettings.OpenAfterExport = $event\">\n                </sti-check-box>\n            </td>\n        </tr>\n      </tbody>\n    </table>\n\n    </sti-base-form>\n  "
        })
    ], ExportFormComponent);
    return ExportFormComponent;
}());
export { ExportFormComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0LWZvcm0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vc3RpbXVsc29mdC12aWV3ZXItYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9mb3Jtcy9leHBvcnQtZm9ybS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFhLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFekQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRTNELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRW5ELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBRXJFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBeVBuRTtJQW9CRSw2QkFBbUIsS0FBbUIsRUFBUyxhQUE0QixFQUFTLE1BQXFCLEVBQVMsV0FBd0IsRUFDakksV0FBd0IsRUFBUyxXQUErQixFQUFTLFVBQTZCO1FBRDVGLFVBQUssR0FBTCxLQUFLLENBQWM7UUFBUyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFTLFdBQU0sR0FBTixNQUFNLENBQWU7UUFBUyxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUNqSSxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUFTLGdCQUFXLEdBQVgsV0FBVyxDQUFvQjtRQUFTLGVBQVUsR0FBVixVQUFVLENBQW1CO1FBbkJ2RyxtQkFBYyxHQUFHO1lBQ3ZCLGtCQUFrQixFQUFFLGFBQWE7WUFDakMscUJBQXFCLEVBQUUsVUFBVTtZQUNqQyxhQUFhLEVBQUUsWUFBWTtZQUMzQixlQUFlLEVBQUUsVUFBVTtZQUMzQixlQUFlLEVBQUUsVUFBVTtTQUM1QixDQUFDO1FBU0YsZ0JBQVcsR0FBRyxLQUFLLENBQUM7UUFDcEIsdUJBQWtCLEdBQVEsRUFBRSxDQUFDO0lBR3NGLENBQUM7SUFFcEgseUNBQVcsR0FBWCxVQUFZLE9BQThDO1FBQTFELGlCQUlDOztRQUhDLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxhQUFBLElBQUksQ0FBQyxXQUFXLDBDQUFFLElBQUksMENBQUUsSUFBSSxNQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFO1lBQ3hFLFVBQVUsQ0FBQyxjQUFNLE9BQUEsS0FBSSxDQUFDLHdCQUF3QixFQUFFLEVBQS9CLENBQStCLENBQUMsQ0FBQztTQUNuRDtJQUNILENBQUM7SUFFRCxzQ0FBUSxHQUFSLGNBQWEsQ0FBQztJQUVkLG9DQUFNLEdBQU47UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRS9DLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG1CQUFtQixFQUFFO1lBQ2xELElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLG1DQUFtQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMscUJBQXFCLEVBQUUsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztTQUM1SjtRQUVELElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVELHNEQUF3QixHQUF4QjtRQUFBLGlCQXdDQzs7UUF2Q0MsQ0FBQyxrQkFBa0IsRUFBRSxlQUFlLEVBQUUsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsQ0FBQyxJQUFJLE9BQUEsS0FBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsY0FBYyxLQUFLLElBQUksQ0FBQyxFQUF4RixDQUF3RixDQUFDLENBQUM7UUFFM0osSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsS0FBSyxNQUFNLENBQUM7UUFFdkssSUFBSSxDQUFDLGtCQUFrQixDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLGNBQWMsS0FBSyxVQUFVLENBQUM7UUFDakgsSUFBSSxDQUFDLGtCQUFrQixDQUFDLHlCQUF5QixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLGNBQWMsSUFBSSxVQUFVLENBQUM7UUFFbkgsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyx3QkFBd0IsQ0FBQztRQUVyRyxJQUFJLENBQUMsa0JBQWtCLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsU0FBUyxLQUFLLE1BQU0sQ0FBQztRQUV2RyxJQUFJLENBQUMsa0JBQWtCLENBQUMsbUJBQW1CLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLENBQUMsT0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLHVCQUF1QiwwQ0FBRSxNQUFNLElBQUcsQ0FBQyxDQUFDLENBQUM7UUFFMUosSUFBSSxDQUFDLGtCQUFrQixDQUFDLHdCQUF3QixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLHdCQUF3QixDQUFDO1FBRTlHLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsU0FBUyxJQUFJLElBQUksRUFBRTtZQUN2RCxJQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBQSxDQUFDLElBQUksT0FBQSxDQUFDLENBQUMsSUFBSSxLQUFLLGFBQWEsRUFBeEIsQ0FBd0IsQ0FBQyxDQUFDO1lBQ3pHLElBQUksV0FBVyxJQUFJLElBQUksRUFBRTtnQkFDdkIsV0FBVyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLFNBQVMsS0FBSyxLQUFLLENBQUMsQ0FBQzthQUNqSDtTQUNGO1FBRUQsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxXQUFXLEtBQUssWUFBWSxDQUFDO1FBRXZHLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7U0FBRTtRQUN2RCxJQUFJLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxzQkFBc0IsRUFBRTtZQUMvRixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQzVCO1FBQ0QsSUFBSSxJQUFJLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsc0JBQXNCLEVBQUU7WUFDckcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ25DO1FBRUQsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsS0FBSyxJQUFJLEVBQUU7WUFDaEUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsc0JBQXNCLEdBQUcsS0FBSyxDQUFDO1NBQzlFO1FBRUQsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsS0FBSyxLQUFLLEVBQUU7WUFDakUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDO1NBQzdFO0lBQ0gsQ0FBQztJQUVELDZDQUFlLEdBQWYsVUFBZ0IsSUFBcUIsRUFBRSxLQUFXO1FBQ2hELElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFM0QsUUFBUSxRQUFRLEVBQUU7WUFDaEIsS0FBSyxlQUFlLENBQUM7WUFDckIsS0FBSyxZQUFZO2dCQUNmLElBQUksS0FBSyxFQUFFO29CQUNULElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLGdCQUFnQixHQUFHLEtBQUssQ0FBQztpQkFDNUQ7Z0JBQ0QsTUFBTTtZQUVSLEtBQUssa0JBQWtCO2dCQUNyQixJQUFJLEtBQUssRUFBRTtvQkFDVCxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO29CQUN4RCxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO2lCQUN0RDtnQkFDRCxNQUFNO1lBRVIsS0FBSyxXQUFXO2dCQUNkLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQ2pELE1BQU07WUFFUixLQUFLLFVBQVUsQ0FBQztZQUNoQixLQUFLLFVBQVU7Z0JBQ2IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUN2QyxNQUFNO1lBRVIsS0FBSyxXQUFXO2dCQUNkLElBQU0sWUFBWSxHQUFHLEtBQUssS0FBSyxhQUFhLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUMvRCxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzlDLE1BQU07WUFFUixLQUFLLHFCQUFxQjtnQkFDeEIsSUFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLElBQUksSUFBSSxLQUFLLEtBQUssS0FBSyxDQUFDLEVBQUU7b0JBQ3hDLFFBQVEsR0FBRyx1QkFBdUIsQ0FBQztpQkFDcEM7Z0JBQ0QsSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsK0JBQStCLEVBQUUsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO29CQUNwRixLQUFLLEdBQUcsS0FBSyxDQUFDO29CQUNkLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSx3QkFBd0IsQ0FBQyxDQUFDO2lCQUNoRTtnQkFDRCxNQUFNO1lBRVIsS0FBSywwQkFBMEI7Z0JBQzdCLElBQUksS0FBSyxLQUFLLElBQUksRUFBRTtvQkFDbEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsd0JBQXdCLEdBQUcsSUFBSSxDQUFDO2lCQUNuRTtnQkFDRCxNQUFNO1NBQ1Q7UUFFRCxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUM7UUFFcEQsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVELHNDQUFRLEdBQVIsVUFBUyxJQUFxQixFQUFFLFNBQWtCO1FBQ2hELElBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDN0QsUUFBUSxRQUFRLEVBQUU7WUFDaEIsS0FBSyxPQUFPO2dCQUNWLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7WUFFaEUsS0FBSyxxQkFBcUI7Z0JBQ3hCLElBQUksU0FBUyxJQUFJLGNBQWMsRUFBRTtvQkFDL0IsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO2lCQUNuRTtZQUNIO2dCQUNFLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDdEQ7SUFDSCxDQUFDO0lBRUQsOENBQWdCLEdBQWhCLFVBQWlCLEtBQWE7O1FBQzVCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxLQUFLLFNBQVMsQ0FBQztRQUV2QyxJQUFJLEtBQUssS0FBSyxRQUFRLGlCQUFJLElBQUksQ0FBQyxrQkFBa0IsMENBQUUsTUFBTSwwQ0FBRSxpQkFBaUIsQ0FBQSxFQUFFO1lBQzVFLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLGdEQUFnRCxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQ3JGLGlCQUFpQixFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsTUFBTTtnQkFDMUUsY0FBYyxFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU07Z0JBQ3BFLGFBQWEsRUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNO2FBQ25FLENBQUMsQ0FBQyxDQUFDO1NBQ0w7UUFDRCxJQUFJLEtBQUssS0FBSyxTQUFTLEVBQUU7WUFDdkIsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7U0FDakM7SUFDSCxDQUFDO0lBRUQsc0NBQVEsR0FBUixVQUFTLElBQXFCLEVBQUUsTUFBdUI7UUFBdkQsaUJBa0JDO1FBakJDLElBQUksUUFBUSxHQUFHLHNCQUFzQixDQUFDO1FBQ3RDLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyx3QkFBd0IsRUFBRTtZQUMxQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQztnQkFDdkIsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxNQUFNO2dCQUNoRSxhQUFhLEVBQUUsNkJBQTZCLEVBQUUsYUFBYSxFQUFFLHlCQUF5QjthQUN2RixDQUFDLENBQUM7U0FDSjthQUFNO1lBQ0wsUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLENBQUM7WUFDL0MsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUM7Z0JBQ3ZCLElBQUksRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQywrQkFBK0IsRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTTtnQkFDcEgsYUFBYSxFQUFFLDZCQUE2QixFQUFFLGFBQWEsRUFBRSx5QkFBeUI7YUFDdkYsQ0FBQyxDQUFDO1NBQ0o7UUFFRCxVQUFVLENBQUM7WUFDVCxLQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCw0Q0FBYyxHQUFkLFVBQWUsSUFBWTtRQUN6QixJQUFJLElBQUksS0FBSyxvQkFBb0IsSUFBSSxJQUFJLEtBQUssbUJBQW1CLElBQUksSUFBSSxLQUFLLG9CQUFvQixFQUFFO1lBQ2xHLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7U0FDM0M7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7O2dCQTVLeUIsWUFBWTtnQkFBd0IsYUFBYTtnQkFBaUIsYUFBYTtnQkFBc0IsV0FBVztnQkFDcEgsV0FBVztnQkFBc0Isa0JBQWtCO2dCQUFxQixpQkFBaUI7O0lBWHhGO1FBQXRCLFNBQVMsQ0FBQyxVQUFVLENBQUM7eURBQTZCO0lBQ3ZCO1FBQTNCLFNBQVMsQ0FBQyxlQUFlLENBQUM7OERBQXFDO0lBQ3BDO1FBQTNCLFNBQVMsQ0FBQyxlQUFlLENBQUM7OERBQXFDO0lBQzdCO1FBQWxDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQztxRUFBNEM7SUFFckU7UUFBUixLQUFLLEVBQUU7bUVBQXdDO0lBZnJDLG1CQUFtQjtRQXZQL0IsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLGlCQUFpQjtZQUMzQixRQUFRLEVBQUUsd2tiQWtQVDtTQUNGLENBQUM7T0FFVyxtQkFBbUIsQ0FpTS9CO0lBQUQsMEJBQUM7Q0FBQSxBQWpNRCxJQWlNQztTQWpNWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIE9uQ2hhbmdlcywgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1vZGVsU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL21vZGVsLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBFeHBvcnRGb3JtU2V0dGluZ3MsIEV4cG9ydENvbXBvbmVudCwgRXhwb3J0R3JvdXAgfSBmcm9tICcuLi9zZXJ2aWNlcy9vYmplY3RzJztcclxuaW1wb3J0IHsgRXhwb3J0U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2V4cG9ydC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQmFzZUZvcm1Db21wb25lbnQgfSBmcm9tICcuL2Jhc2UtZm9ybS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaGVscGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGb3JtU2VydmljZSB9IGZyb20gJy4vZm9ybS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWVudVNlcnZpY2UgfSBmcm9tICcuLi9tZW51L21lbnUuc2VydmljZSc7XHJcbmltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4uL2NvbnRyb2xzL2J1dHRvbi5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uc1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb2xsZWN0aW9ucy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmFkaW9CdXR0b25Db21wb25lbnQgfSBmcm9tICcuLi9jb250cm9scy9yYWRpby1idXR0b24uY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY29udHJvbGxlci5zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnc3RpLWV4cG9ydC1mb3JtJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPHN0aS1iYXNlLWZvcm0gI2Jhc2VGb3JtIFtmb250RmFtaWx5XT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5mb250RmFtaWx5XCJcclxuICAgIFtjb2xvcl09XCJtb2RlbC5vcHRpb25zLnRvb2xiYXIuZm9udENvbG9yXCJcclxuICAgIFtmb250U2l6ZV09XCInMTJweCdcIlxyXG4gICAgW2NvbnRhaW5lclBhZGRpbmddPVwiJzNweCdcIlxyXG4gICAgW25hbWVdPVwiJ2V4cG9ydEZvcm0nXCJcclxuICAgIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnRXhwb3J0Rm9ybVRpdGxlJylcIlxyXG4gICAgW2RlZmF1bHRUb3BdPVwiMTUwXCJcclxuICAgIChjaGFuZ2VWaXNpYmlsaXR5KT1cImNoYW5nZVZpc2liaWxpdHkoJGV2ZW50KVwiXHJcbiAgICAoYWN0aW9uKT1cImFjdGlvbigpXCI+XHJcbiAgICA8dGFibGUgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIj5cclxuICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgPHRyICpuZ0lmPVwiZXhwb3J0Rm9ybVNldHRpbmdzPy5ncm91cHMuc2F2aW5nUmVwb3J0R3JvdXAudmlzaWJsZVwiIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICA8c3RpLWdyb3VwLXBhbmVsIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnU2F2aW5nUmVwb3J0JylcIlxyXG4gICAgICAgICAgICAgICBbd2lkdGhdPVwiMzkwXCJcclxuICAgICAgICAgICAgICAgW21hcmdpbl09XCInNHB4J1wiXHJcbiAgICAgICAgICAgICAgIFtpbm5lclBhZGRpbmddPVwiJzRweCAwIDRweCAwJ1wiXHJcbiAgICAgICAgICAgICAgIFtvcGVuZWRdPVwiZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5zYXZpbmdSZXBvcnRHcm91cC5vcGVuZWRcIlxyXG4gICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMuc2F2aW5nUmVwb3J0R3JvdXAub3BlbmVkPSRldmVudFwiPlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIHN0eWxlPVwid2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1yYWRpby1idXR0b24gI3NhdmVSZXBvcnRNZGNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW25hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdTYXZlUmVwb3J0TWRjJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtncm91cE5hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdTYXZpbmdSZXBvcnRHcm91cCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ1NhdmVSZXBvcnRNZGMnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzZweCA4cHggM3B4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2hlY2tlZF09XCJ0cnVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkZvcm1hdCA9ICdNZGMnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLXJhZGlvLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1yYWRpby1idXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW25hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdTYXZlUmVwb3J0TWR6J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtncm91cE5hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdTYXZpbmdSZXBvcnRHcm91cCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ1NhdmVSZXBvcnRNZHonKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzNweCA4cHggM3B4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuRm9ybWF0ID0gJ01keidcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktcmFkaW8tYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLXJhZGlvLWJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1NhdmVSZXBvcnRNZHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwTmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1NhdmluZ1JlcG9ydEdyb3VwJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnU2F2ZVJlcG9ydE1keCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInM3B4IDhweCAwcHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5Gb3JtYXQgPSAnTWR4J1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1yYWRpby1idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIHN0eWxlPVwicGFkZGluZzogMHB4IDhweDsgbWluLXdpZHRoOiAxNTBweDtcIiBbYXR0ci50aXRsZV09XCJtb2RlbC5sb2MoJ1Bhc3N3b3JkU2F2ZVJlcG9ydFRvb2x0aXAnKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAge3ttb2RlbC5sb2MoJ1Bhc3N3b3JkU2F2ZVJlcG9ydCcpfX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktdGV4dC1ib3hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3dpZHRoXT1cIjE0MFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cIm1vZGVsLmxvYygnUGFzc3dvcmRTYXZlUmVwb3J0VG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInNHB4IDhweCAwcHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0eXBlXT1cImdldFRleHRCb3hUeXBlKCdTYXZlUmVwb3J0UGFzc3dvcmQnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlbmFibGVkXT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuRm9ybWF0ID09ICdNZHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uY2hhbmdlKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUGFzc3dvcmQgPSAkZXZlbnQudmFsdWVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktdGV4dC1ib3g+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgIDwvc3RpLWdyb3VwLXBhbmVsPlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgPC90cj5cclxuXHJcbiAgICAgICAgICA8dHIgKm5nSWY9XCJleHBvcnRGb3JtU2V0dGluZ3M/Lmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC52aXNpYmxlXCIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgIDxzdGktZ3JvdXAtcGFuZWwgW2NhcHRpb25dPVwibW9kZWwubG9jKCdQYWdlc1JhbmdlJylcIlxyXG4gICAgICAgICAgICAgICBbd2lkdGhdPVwiMzkwXCJcclxuICAgICAgICAgICAgICAgW21hcmdpbl09XCInNHB4J1wiXHJcbiAgICAgICAgICAgICAgIFtpbm5lclBhZGRpbmddPVwiJzRweCAwIDRweCAwJ1wiXHJcbiAgICAgICAgICAgICAgIFtvcGVuZWRdPVwiZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5vcGVuZWRcIlxyXG4gICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMucGFnZVJhbmdlR3JvdXAub3BlbmVkPSRldmVudFwiPlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIHN0eWxlPVwid2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1yYWRpby1idXR0b24gI3BhZ2VzUmFuZ2VBbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW25hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdQYWdlc1JhbmdlQWxsJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtncm91cE5hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdQYWdlUmFuZ2VHcm91cCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ1BhZ2VzUmFuZ2VBbGwnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cIm1vZGVsLmxvYygnUGFnZXNSYW5nZUFsbFRvb2x0aXAnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzZweCA4cHggNnB4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2hlY2tlZF09XCIhZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5wYWdlUmFuZ2VBbGxJc0Rpc2FibGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2VuYWJsZWRdPVwiIWV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMucGFnZVJhbmdlR3JvdXAucGFnZVJhbmdlQWxsSXNEaXNhYmxlZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5QYWdlUmFuZ2UgPSAnQWxsJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1yYWRpby1idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNvbHNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktcmFkaW8tYnV0dG9uICNwYWdlUmFuZ2VDdXJyZW50UGFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1BhZ2VSYW5nZUN1cnJlbnRQYWdlJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtncm91cE5hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdQYWdlUmFuZ2VHcm91cCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ1BhZ2VzUmFuZ2VDdXJyZW50UGFnZScpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdQYWdlc1JhbmdlQ3VycmVudFBhZ2VUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicwcHggOHB4IDRweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NoZWNrZWRdPVwiZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5wYWdlUmFuZ2VBbGxJc0Rpc2FibGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlBhZ2VSYW5nZSA9IChtb2RlbC5yZXBvcnRQYXJhbXMucGFnZU51bWJlciArIDEpLnRvU3RyaW5nKClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktcmFkaW8tYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLXJhZGlvLWJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1BhZ2VSYW5nZVBhZ2VzJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtncm91cE5hbWVdPVwiYmFzZUZvcm0ubmFtZSArICdQYWdlUmFuZ2VHcm91cCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ1BhZ2VzUmFuZ2VQYWdlcycpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdQYWdlc1JhbmdlUGFnZXNUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicwcHggOHB4IDBweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BhZGRpbmdMZWZ0TGFzdENlbGxdPVwiJzYwcHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlBhZ2VSYW5nZSA9IHBhZ2VzUmFuZ2UuZWxlbWVudC5uYXRpdmVFbGVtZW50LnZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktdGV4dC1ib3ggI3BhZ2VzUmFuZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwiMTMwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ1BhZ2VzUmFuZ2VQYWdlc1Rvb2x0aXAnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInMHB4IDBweCAwcHggMzBweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvbmNoYW5nZSk9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlBhZ2VSYW5nZSA9ICRldmVudC52YWx1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uYmx1cik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlBhZ2VSYW5nZSA9ICRldmVudC52YWx1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS10ZXh0LWJveD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktcmFkaW8tYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICAgICAgICA8L3N0aS1ncm91cC1wYW5lbD5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgIDwvdHI+XHJcblxyXG4gICAgICAgIDx0ciAqbmdJZj1cImV4cG9ydEZvcm1TZXR0aW5ncz8uZ3JvdXBzLnNldHRpbmdzR3JvdXAudmlzaWJsZVwiY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgIDxzdGktZ3JvdXAtcGFuZWwgW2NhcHRpb25dPVwibW9kZWwubG9jKCdTZXR0aW5nc0dyb3VwJylcIlxyXG4gICAgICAgICAgICAgICAgW29wZW5lZF09XCJleHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnNldHRpbmdzR3JvdXAub3BlbmVkXCJcclxuICAgICAgICAgICAgICAgIFt3aWR0aF09XCIzOTBcIlxyXG4gICAgICAgICAgICAgICAgW21hcmdpbl09XCInNHB4J1wiXHJcbiAgICAgICAgICAgICAgICBbaW5uZXJQYWRkaW5nXT1cIic0cHggMCA0cHggMCdcIlxyXG4gICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnNldHRpbmdzR3JvdXAub3BlbmVkPSRldmVudFwiPlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIHN0eWxlPVwid2lkdGg6IDEwMCU7XCI+XHJcbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgKm5nRm9yPVwibGV0IGNvbXAgb2YgZXhwb3J0Rm9ybVNldHRpbmdzLmNvbXBvbmVudHNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdJZj1cImNvbXAubGFiZWwgIT0gbnVsbFwiIHN0eWxlPVwicGFkZGluZzogMHB4IDhweDsgbWluLXdpZHRoOiAxNTBweDtcIiBbYXR0ci50aXRsZV09XCJjb21wLnRvb2x0aXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3tjb21wLmxhYmVsfX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkICpuZ0lmPVwiY29tcC5uYW1lID09ICdVc2VEaWdpdGFsU2lnbmF0dXJlJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLWNoZWNrLWJveFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJjb21wLnRvb2x0aXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cImNvbXAubWFyZ2luXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25UZXh0XT1cImNvbXAuY2FwdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpc0NoZWNrZWRdPVwiZ2V0VmFsdWUoY29tcClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImNvbXBvbmVudEFjdGlvbihjb21wLCAkZXZlbnQpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWNoZWNrLWJveD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIFthdHRyLmNvbFNwYW5dPVwiY29tcC5sYWJlbCAhPSBudWxsIHx8IGNvbXAubmFtZSA9PSAnRG9jdW1lbnRTZWN1cml0eUJ1dHRvbicgfHwgY29tcC5uYW1lID09ICdVc2VEaWdpdGFsU2lnbmF0dXJlJyA/IDEgOiAyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktZHJvcC1kb3duLWxpc3QtZm9yLWV4cG9ydC1mb3JtICpuZ0lmPVwiY29tcC50eXBlID09ICdEcm9wRG93bkxpc3RGb3JFeHBvcnRGb3JtJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt3aWR0aF09XCJjb21wLndpZHRoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2l0ZW1zXT1cImNvbXAuaXRlbXNcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5XT1cImdldFZhbHVlKGNvbXAsICdkcm9wRG93bkxpc3QnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiY29tcC5tYXJnaW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdmVydGljYWxBbGlnbl09XCJjb21wLm5hbWUgPT0gJ0ltYWdlUXVhbGl0eScgfHwgY29tcC5uYW1lID09ICdJbWFnZVJlc29sdXRpb24nID8gJ21pZGRsZScgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3N0eWxlRGlzcGxheV09XCJjb21wLm5hbWUgPT0gJ0ltYWdlUXVhbGl0eScgfHwgY29tcC5uYW1lID09ICdJbWFnZVJlc29sdXRpb24nID8gJ2lubGluZS1ibG9jaycgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2VuYWJsZWRdPVwiIWRpc2FibGVkQ29tcG9uZW50c1tjb21wLm5hbWVdXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJjb21wb25lbnRBY3Rpb24oY29tcCwgJGV2ZW50LmtleSlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktZHJvcC1kb3duLWxpc3QtZm9yLWV4cG9ydC1mb3JtPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cImNvbXAubmFtZSA9PSAnSW1hZ2VRdWFsaXR5JyB8fCBjb21wLm5hbWUgPT0gJ0ltYWdlUmVzb2x1dGlvbidcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbc3R5bGUuZGlzcGxheV09XCInaW5saW5lLWJsb2NrJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt7Y29tcC5uYW1lID09ICdJbWFnZVF1YWxpdHknID8gJyUnIDogJ2RwaSd9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktdGV4dC1ib3ggKm5nSWY9XCJjb21wLnR5cGUgPT0gJ1RleHRCb3gnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3dpZHRoXT1cImNvbXAud2lkdGhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJjb21wLnRvb2x0aXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cImNvbXAubWFyZ2luXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3R5cGVdPVwiZ2V0VGV4dEJveFR5cGUoY29tcC5uYW1lKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlbmFibGVkXT1cIiFjb21wLmRpc2FibGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZhbHVlXT1cImdldFZhbHVlKGNvbXApXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2VuYWJsZWRdPVwiIWRpc2FibGVkQ29tcG9uZW50c1tjb21wLm5hbWVdXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uY2hhbmdlKT1cImNvbXBvbmVudEFjdGlvbihjb21wLCAkZXZlbnQudmFsdWUpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLXRleHQtYm94PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1jaGVjay1ib3ggKm5nSWY9XCJjb21wLnR5cGUgPT0gJ0NoZWNrQm94JyB8fCBjb21wLnR5cGUgPT0gJ0RpZ2l0YWxTaWduYXR1cmUnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwiY29tcC50b29sdGlwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCJjb21wLm1hcmdpblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uVGV4dF09XCJjb21wLmNhcHRpb25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbaXNDaGVja2VkXT1cImdldFZhbHVlKGNvbXApXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lzRW5hYmxlZF09XCIhZGlzYWJsZWRDb21wb25lbnRzW2NvbXAubmFtZV1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImNvbXBvbmVudEFjdGlvbihjb21wLCAkZXZlbnQpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWNoZWNrLWJveD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdJZj1cImNvbXAubmFtZSA9PSAnRG9jdW1lbnRTZWN1cml0eUJ1dHRvbidcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1idXR0b24gI2J1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwiY29tcC53aWR0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFthcnJvd109XCInRG93bidcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWluV2lkdGhdPVwiJzE2M3B4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uQWxpZ25dPVwiJ2NlbnRlcidcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbZGlzcGxheV09XCInaW5saW5lLWJsb2NrJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzdHlsZU5hbWVdPVwiJ3N0aUpzVmlld2VyRm9ybUJ1dHRvbidcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicycHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbm5lclRhYmxlV2lkdGhdPVwiJzEwMCUnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25XaWR0aF09XCInMTAwJSdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbl09XCJjb21wLm5hbWUgPT0gJ0RvY3VtZW50U2VjdXJpdHlCdXR0b24nID8gY29tcC5jYXB0aW9uIDogJydcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbZW5hYmxlZF09XCIhZGlzYWJsZWRDb21wb25lbnRzW2NvbXAubmFtZSArICdCdXR0b24nXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwic2hvd01lbnUoY29tcCwgYnV0dG9uKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG5cclxuICAgICAgICAgICAgICA8L3N0aS1ncm91cC1wYW5lbD5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICA8L3RyPlxyXG5cclxuICAgICAgICA8dHIgKm5nSWY9XCJtb2RlbC5vcHRpb25zLmV4cG9ydHMuc2hvd09wZW5BZnRlckV4cG9ydCAmJiBleHBvcnRGb3JtU2V0dGluZ3M/Lm9wZW5BZnRlckV4cG9ydCAmJiAhZXhwb3J0U2VydmljZS5zZW5kTWFpbFwiIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgIDxzdGktY2hlY2stYm94IFtjYXB0aW9uVGV4dF09XCJtb2RlbC5sb2MoJ09wZW5BZnRlckV4cG9ydCcpXCJcclxuICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdPcGVuQWZ0ZXJFeHBvcnRUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHggOHB4IDRweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgW2lzQ2hlY2tlZF09XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLk9wZW5BZnRlckV4cG9ydFwiXHJcbiAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5PcGVuQWZ0ZXJFeHBvcnQgPSAkZXZlbnRcIj5cclxuICAgICAgICAgICAgICAgIDwvc3RpLWNoZWNrLWJveD5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICA8L3RyPlxyXG4gICAgICA8L3Rib2R5PlxyXG4gICAgPC90YWJsZT5cclxuXHJcbiAgICA8L3N0aS1iYXNlLWZvcm0+XHJcbiAgYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4cG9ydEZvcm1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcblxyXG4gIHByaXZhdGUgUFJPUEVSVFlfQUxJQVMgPSB7XHJcbiAgICBJbWFnZUZvcm1hdEZvckh0bWw6ICdJbWFnZUZvcm1hdCcsXHJcbiAgICBFbmNvZGluZ1RleHRPckNzdkZpbGU6ICdFbmNvZGluZycsXHJcbiAgICBFeHBvcnRNb2RlUnRmOiAnRXhwb3J0TW9kZScsXHJcbiAgICBFbmNvZGluZ0RpZkZpbGU6ICdFbmNvZGluZycsXHJcbiAgICBFbmNvZGluZ0RiZkZpbGU6ICdDb2RlUGFnZSdcclxuICB9O1xyXG5cclxuICBAVmlld0NoaWxkKCdiYXNlRm9ybScpIGJhc2VGb3JtOiBCYXNlRm9ybUNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdzYXZlUmVwb3J0TWRjJykgc2F2ZVJlcG9ydE1kYzogUmFkaW9CdXR0b25Db21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgncGFnZXNSYW5nZUFsbCcpIHBhZ2VzUmFuZ2VBbGw6IFJhZGlvQnV0dG9uQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ3BhZ2VSYW5nZUN1cnJlbnRQYWdlJykgcGFnZVJhbmdlQ3VycmVudFBhZ2U6IFJhZGlvQnV0dG9uQ29tcG9uZW50O1xyXG5cclxuICBASW5wdXQoKSBleHBvcnRGb3JtU2V0dGluZ3M6IEV4cG9ydEZvcm1TZXR0aW5ncztcclxuXHJcbiAgZm9ybVZpc2libGUgPSBmYWxzZTtcclxuICBkaXNhYmxlZENvbXBvbmVudHM6IGFueSA9IHt9O1xyXG5cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbW9kZWw6IE1vZGVsU2VydmljZSwgcHVibGljIGV4cG9ydFNlcnZpY2U6IEV4cG9ydFNlcnZpY2UsIHB1YmxpYyBoZWxwZXI6IEhlbHBlclNlcnZpY2UsIHB1YmxpYyBmb3JtU2VydmljZTogRm9ybVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgbWVudVNlcnZpY2U6IE1lbnVTZXJ2aWNlLCBwdWJsaWMgY29sbGVjdGlvbnM6IENvbGxlY3Rpb25zU2VydmljZSwgcHVibGljIGNvbnRyb2xsZXI6IENvbnRyb2xsZXJTZXJ2aWNlKSB7IH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogaW1wb3J0KCdAYW5ndWxhci9jb3JlJykuU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuYmFzZUZvcm0gJiYgdGhpcy5mb3JtU2VydmljZT8uZm9ybT8ubmFtZSA9PT0gdGhpcy5iYXNlRm9ybS5uYW1lKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVEaXNhYmxlZENvbXBvbmVudHMoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICBhY3Rpb24oKSB7XHJcbiAgICB0aGlzLmZvcm1TZXJ2aWNlLmNsb3NlRm9ybSh0aGlzLmJhc2VGb3JtLm5hbWUpO1xyXG5cclxuICAgIGlmICh0aGlzLm1vZGVsLm9wdGlvbnMuZXhwb3J0cy5zdG9yZUV4cG9ydFNldHRpbmdzKSB7XHJcbiAgICAgIHRoaXMuaGVscGVyLnNldENvb2tpZSgnU3RpbXVsc29mdFdlYlZpZXdlckV4cG9ydFNldHRpbmdzJyArIHRoaXMuZXhwb3J0U2VydmljZS5nZXRDb21tb25FeHBvcnRGb3JtYXQoKSwgSlNPTi5zdHJpbmdpZnkodGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5leHBvcnRTZXJ2aWNlLnBvc3RFeHBvcnQoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZURpc2FibGVkQ29tcG9uZW50cygpIHtcclxuICAgIFsnU3RhbmRhcmRQZGZGb250cycsICdFbWJlZGRlZEZvbnRzJywgJ1VzZVVuaWNvZGUnXS5mb3JFYWNoKG4gPT4gdGhpcy5kaXNhYmxlZENvbXBvbmVudHNbbl0gPSAodGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlBkZkFDb21wbGlhbmNlID09PSB0cnVlKSk7XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlZENvbXBvbmVudHMuSW1hZ2VRdWFsaXR5ID0gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkltYWdlQ29tcHJlc3Npb25NZXRob2QgJiYgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkltYWdlQ29tcHJlc3Npb25NZXRob2QgIT09ICdKcGVnJztcclxuXHJcbiAgICB0aGlzLmRpc2FibGVkQ29tcG9uZW50cy5FeHBvcnRPYmplY3RGb3JtYXR0aW5nID0gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkRhdGFFeHBvcnRNb2RlID09PSAnQWxsQmFuZHMnO1xyXG4gICAgdGhpcy5kaXNhYmxlZENvbXBvbmVudHMuVXNlT25lUGFnZUhlYWRlckFuZEZvb3RlciA9IHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5EYXRhRXhwb3J0TW9kZSAhPSAnQWxsQmFuZHMnO1xyXG5cclxuICAgIHRoaXMuZGlzYWJsZWRDb21wb25lbnRzLkVuY29kaW5nRGlmRmlsZSA9IHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5Vc2VEZWZhdWx0U3lzdGVtRW5jb2Rpbmc7XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlZENvbXBvbmVudHMuVGlmZkNvbXByZXNzaW9uU2NoZW1lID0gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkltYWdlVHlwZSAhPT0gJ1RpZmYnO1xyXG5cclxuICAgIHRoaXMuZGlzYWJsZWRDb21wb25lbnRzLlVzZURpZ2l0YWxTaWduYXR1cmUgPSAhdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlVzZURpZ2l0YWxTaWduYXR1cmUgfHwgISh0aGlzLm1vZGVsLnBkZlNlY3VyaXR5Q2VydGlmaWNhdGVzPy5sZW5ndGggPiAwKTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVkQ29tcG9uZW50cy5SZW1vdmVFbXB0eVNwYWNlQXRCb3R0b20gPSB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuVXNlUGFnZUhlYWRlcnNBbmRGb290ZXJzO1xyXG5cclxuICAgIGlmICh0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuSW1hZ2VUeXBlICE9IG51bGwpIHtcclxuICAgICAgY29uc3QgaWZDb21wb25lbnQgPSB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0Rm9ybVNldHRpbmdzLmNvbXBvbmVudHMuZmluZChjID0+IGMubmFtZSA9PT0gJ0ltYWdlRm9ybWF0Jyk7XHJcbiAgICAgIGlmIChpZkNvbXBvbmVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgaWZDb21wb25lbnQuaXRlbXMgPSB0aGlzLmNvbGxlY3Rpb25zLmdldEltYWdlRm9ybWF0SXRlbXModGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkltYWdlVHlwZSA9PT0gJ0VtZicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlZENvbXBvbmVudHMuRGl0aGVyaW5nVHlwZSA9IHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5JbWFnZUZvcm1hdCAhPT0gJ01vbm9jaHJvbWUnO1xyXG5cclxuICAgIGlmICh0aGlzLnNhdmVSZXBvcnRNZGMpIHsgdGhpcy5zYXZlUmVwb3J0TWRjLmNsaWNrKCk7IH1cclxuICAgIGlmICh0aGlzLnBhZ2VzUmFuZ2VBbGwgJiYgIXRoaXMuZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5wYWdlUmFuZ2VBbGxJc0Rpc2FibGVkKSB7XHJcbiAgICAgIHRoaXMucGFnZXNSYW5nZUFsbC5jbGljaygpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucGFnZVJhbmdlQ3VycmVudFBhZ2UgJiYgdGhpcy5leHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLnBhZ2VSYW5nZUFsbElzRGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5wYWdlUmFuZ2VDdXJyZW50UGFnZS5jbGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuQ29tcHJlc3NUb0FyY2hpdmUgPT09IHRydWUpIHtcclxuICAgICAgdGhpcy5leHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLnBhZ2VSYW5nZUFsbElzRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkNvbXByZXNzVG9BcmNoaXZlID09PSBmYWxzZSkge1xyXG4gICAgICB0aGlzLmV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMucGFnZVJhbmdlR3JvdXAucGFnZVJhbmdlQWxsSXNEaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRBY3Rpb24oY29tcDogRXhwb3J0Q29tcG9uZW50LCB2YWx1ZT86IGFueSkge1xyXG4gICAgbGV0IHByb3BlcnR5ID0gdGhpcy5QUk9QRVJUWV9BTElBU1tjb21wLm5hbWVdIHx8IGNvbXAubmFtZTtcclxuXHJcbiAgICBzd2l0Y2ggKHByb3BlcnR5KSB7XHJcbiAgICAgIGNhc2UgJ0VtYmVkZGVkRm9udHMnOlxyXG4gICAgICBjYXNlICdVc2VVbmljb2RlJzpcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5TdGFuZGFyZFBkZkZvbnRzID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnU3RhbmRhcmRQZGZGb250cyc6XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuRW1iZWRkZWRGb250cyA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlVzZVVuaWNvZGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdJbWFnZVR5cGUnOlxyXG4gICAgICAgIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnQoJ0ltYWdlJyArIHZhbHVlLCB0cnVlKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ0RhdGFUeXBlJzpcclxuICAgICAgY2FzZSAnSHRtbFR5cGUnOlxyXG4gICAgICAgIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnQodmFsdWUsIHRydWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnRXhjZWxUeXBlJzpcclxuICAgICAgICBjb25zdCBleHBvcnRGb3JtYXQgPSB2YWx1ZSA9PT0gJ0V4Y2VsQmluYXJ5JyA/ICdFeGNlbCcgOiB2YWx1ZTtcclxuICAgICAgICB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0KGV4cG9ydEZvcm1hdCwgdHJ1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdVc2VEaWdpdGFsU2lnbmF0dXJlJzpcclxuICAgICAgICBpZiAoISh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICBwcm9wZXJ0eSA9ICdDZXJ0aWZpY2F0ZVRodW1icHJpbnQnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUgJiYgdGhpcy5jb2xsZWN0aW9ucy5nZXRQZGZTZWN1cml0eUNlcnRpZmljYXRlc0l0ZW1zKCkubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIHZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuc2hvd0Vycm9yKCdXYXJuaW5nJywgJ0NlcnRpZmljYXRlIE5vdCBGb3VuZCEnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdVc2VQYWdlSGVhZGVyc0FuZEZvb3RlcnMnOlxyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlJlbW92ZUVtcHR5U3BhY2VBdEJvdHRvbSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5nc1twcm9wZXJ0eV0gPSB2YWx1ZTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZURpc2FibGVkQ29tcG9uZW50cygpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmFsdWUoY29tcDogRXhwb3J0Q29tcG9uZW50LCBjb21wb25lbnQ/OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgcHJvcGVydHkgPSB0aGlzLlBST1BFUlRZX0FMSUFTW2NvbXAubmFtZV0gfHwgY29tcC5uYW1lO1xyXG4gICAgc3dpdGNoIChwcm9wZXJ0eSkge1xyXG4gICAgICBjYXNlICdab29tMic6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5nc1twcm9wZXJ0eV0udG9TdHJpbmcoKTtcclxuXHJcbiAgICAgIGNhc2UgJ1VzZURpZ2l0YWxTaWduYXR1cmUnOlxyXG4gICAgICAgIGlmIChjb21wb25lbnQgPT0gJ2Ryb3BEb3duTGlzdCcpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3NbJ0NlcnRpZmljYXRlVGh1bWJwcmludCddO1xyXG4gICAgICAgIH1cclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzW3Byb3BlcnR5XTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNoYW5nZVZpc2liaWxpdHkoc3RhdGU6IHN0cmluZykge1xyXG4gICAgdGhpcy5mb3JtVmlzaWJsZSA9IHN0YXRlID09PSAndmlzaWJsZSc7XHJcblxyXG4gICAgaWYgKHN0YXRlID09PSAnaGlkZGVuJyAmJiB0aGlzLmV4cG9ydEZvcm1TZXR0aW5ncz8uZ3JvdXBzPy5zYXZpbmdSZXBvcnRHcm91cCkge1xyXG4gICAgICB0aGlzLmhlbHBlci5zZXRDb29raWUoJ1N0aW11bHNvZnRXZWJWaWV3ZXJFeHBvcnRTZXR0aW5nc09wZW5pbmdHcm91cHMnLCBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgU2F2aW5nUmVwb3J0R3JvdXA6IHRoaXMuZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5zYXZpbmdSZXBvcnRHcm91cC5vcGVuZWQsXHJcbiAgICAgICAgUGFnZVJhbmdlR3JvdXA6IHRoaXMuZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5vcGVuZWQsXHJcbiAgICAgICAgU2V0dGluZ3NHcm91cDogdGhpcy5leHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnNldHRpbmdzR3JvdXAub3BlbmVkXHJcbiAgICAgIH0pKTtcclxuICAgIH1cclxuICAgIGlmIChzdGF0ZSA9PT0gJ3Zpc2libGUnKSB7XHJcbiAgICAgIHRoaXMudXBkYXRlRGlzYWJsZWRDb21wb25lbnRzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzaG93TWVudShjb21wOiBFeHBvcnRDb21wb25lbnQsIGJ1dHRvbjogQnV0dG9uQ29tcG9uZW50KSB7XHJcbiAgICBsZXQgbWVudU5hbWUgPSAnZG9jdW1lbnRTZWN1cml0eU1lbnUnO1xyXG4gICAgaWYgKGNvbXAubmFtZSA9PT0gJ0RvY3VtZW50U2VjdXJpdHlCdXR0b24nKSB7XHJcbiAgICAgIHRoaXMubWVudVNlcnZpY2UuYWRkTWVudSh7XHJcbiAgICAgICAgdHlwZTogbWVudU5hbWUsIG5hbWU6IG1lbnVOYW1lLCBpdGVtczogW10sIHBhcmVudDogYnV0dG9uLmJ1dHRvbixcclxuICAgICAgICBpdGVtU3R5bGVOYW1lOiAnc3RpSnNWaWV3ZXJNZW51U3RhbmRhcnRJdGVtJywgbWVudVN0eWxlTmFtZTogJ3N0aUpzVmlld2VyRHJvcGRvd25NZW51J1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1lbnVOYW1lID0gdGhpcy5tZW51U2VydmljZS5WRVJUSUNBTF9NRU5VX05BTUU7XHJcbiAgICAgIHRoaXMubWVudVNlcnZpY2UuYWRkTWVudSh7XHJcbiAgICAgICAgdHlwZTogJ2J1dHRvbk1lbnUnLCBuYW1lOiBtZW51TmFtZSwgaXRlbXM6IHRoaXMuY29sbGVjdGlvbnMuZ2V0UGRmU2VjdXJpdHlDZXJ0aWZpY2F0ZXNJdGVtcygpLCBwYXJlbnQ6IGJ1dHRvbi5idXR0b24sXHJcbiAgICAgICAgaXRlbVN0eWxlTmFtZTogJ3N0aUpzVmlld2VyTWVudVN0YW5kYXJ0SXRlbScsIG1lbnVTdHlsZU5hbWU6ICdzdGlKc1ZpZXdlckRyb3Bkb3duTWVudSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMubWVudVNlcnZpY2Uuc2hvd01lbnUobWVudU5hbWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRUZXh0Qm94VHlwZShuYW1lOiBzdHJpbmcpIHtcclxuICAgIGlmIChuYW1lID09PSAnU2F2ZVJlcG9ydFBhc3N3b3JkJyB8fCBuYW1lID09PSAnUGFzc3dvcmRJbnB1dFVzZXInIHx8IG5hbWUgPT09ICdQYXNzd29yZElucHV0T3duZXInKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1WaXNpYmxlID8gJ3Bhc3N3b3JkJyA6ICcnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcbiJdfQ==