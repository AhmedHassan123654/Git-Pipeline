import { __decorate } from "tslib";
import { Component, Input, ViewChild, Output, EventEmitter } from '@angular/core';
import { ControllerService } from './services/controller.service';
import { MenuService } from './menu/menu.service';
import { ModelService } from './services/model.service';
import { ExportService } from './services/export.service';
import { FormService } from './forms/form.service';
import { ApiService } from './services/api.service';
import { PrintService } from './services/print.service';
import { DashboardService } from './services/dashboard.service';
import { StiHttpClientService } from './services/http-client.service';
import { StylesService } from './services/styles.service';
import { HelperService } from './services/helper.service';
import { MouseService } from './services/mouse.service';
import { PageService } from './services/page.service';
import { TooltipService } from './services/tooltip.service';
import { FindService } from './services/find.service';
import { AnimationService } from './services/animation.service';
import { InteractionsService } from './services/interactions.service';
import { RadioButtonService } from './services/radio-button.service';
import { CollectionsService } from './services/collections.service';
import { MailService } from './services/mail.service';
import { EditableFieldsService } from './services/editable-fields.service';
import { DrillDownService } from './services/drill-down.service';
import { Md5Service } from './services/md5.service';
import { FullScreenService } from './services/full-screen.service';
import { ToolbarService } from './services/toolbar.service';
//1bfb351c1add27b1537ffce9c723e3cb1f5b27bb 02.03.2021 17:29:20
var StimulsoftViewerComponent = /** @class */ (function () {
    function StimulsoftViewerComponent(controller, menuService, model, exportService, formService, api, printService, dashboardService) {
        var _this = this;
        this.controller = controller;
        this.menuService = menuService;
        this.model = model;
        this.exportService = exportService;
        this.formService = formService;
        this.api = api;
        this.printService = printService;
        this.dashboardService = dashboardService;
        /**
         * Occurs when report/dashboard loaded
         */
        this.loaded = new EventEmitter();
        /**
         * Occurs on error, $event is ErrorMessage object contains error: string & type: any  (if present)
         */
        this.error = new EventEmitter();
        /**
         * Occurs on export, $event object contains exportFormat: string & exportSettings: {}
         */
        this.export = new EventEmitter();
        /**
         * Occurs on export & email, $event object contains exportFormat: string & exportSettings: {}
         */
        this.email = new EventEmitter();
        /**
         * Occurs on export & email, $event object contains format: string : 'PrintPdf' or 'PrintWithoutPreview' or 'PrintWithPreview'
         */
        this.print = new EventEmitter();
        /**
         * Occurs on pressing 'Design' button
         */
        this.design = new EventEmitter();
        /**
         * Viewer background color
         */
        this.backgroundColor = 'White';
        this.initialized = false;
        this.viewInit = false;
        window.onresize = function () { return _this.resize(); };
        this.initEvents();
    }
    StimulsoftViewerComponent.prototype.ngOnChanges = function (changes) {
        this.loadViewer();
    };
    StimulsoftViewerComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.controller.getMessage().subscribe(function (message) {
            switch (message.action) {
                case 'viewer_loaded':
                    _this.initialized = true;
                    break;
            }
        });
    };
    StimulsoftViewerComponent.prototype.ngAfterViewInit = function () {
        this.viewInit = true;
        this.loadViewer();
    };
    StimulsoftViewerComponent.prototype.initEvents = function () {
        var _this = this;
        this.controller.getMessage().subscribe(function (message) {
            switch (message.action) {
                case 'GetReport':
                case 'OpenReport':
                    setTimeout(function () {
                        _this.loaded.next();
                    });
                    break;
            }
        });
        this.controller.getActionMessage().subscribe(function (message) {
            switch (message.action) {
                case 'Error':
                    setTimeout(function () {
                        _this.error.next(_this.model.errorMessage);
                    });
                    break;
                case 'ExportReport':
                    setTimeout(function () {
                        _this.export.next(message.data);
                    });
                    break;
                case 'Email':
                    setTimeout(function () {
                        _this.email.next(message.data);
                    });
                    break;
                case 'Print':
                    setTimeout(function () {
                        _this.print.next(message.data);
                    });
                    break;
                case 'Design':
                    setTimeout(function () {
                        _this.design.next();
                    });
                    break;
            }
        });
    };
    StimulsoftViewerComponent.prototype.loadViewer = function () {
        if (this.viewInit) {
            this.model.requestUrl = this.requestUrl;
            this.model.action = this.action;
            this.model.properties = this.properties;
            this.controller.loadViewer();
            this.resize();
            this.model.controls.viewer.el = this.viewerElement;
        }
    };
    StimulsoftViewerComponent.prototype.resize = function () {
        var _a;
        if ((_a = this.viewerElement) === null || _a === void 0 ? void 0 : _a.nativeElement) {
            this.model.viewerSize = { width: this.viewerElement.nativeElement.offsetWidth, height: this.viewerElement.nativeElement.offsetHeight };
            this.controller.viewerResized();
        }
    };
    StimulsoftViewerComponent.ctorParameters = function () { return [
        { type: ControllerService },
        { type: MenuService },
        { type: ModelService },
        { type: ExportService },
        { type: FormService },
        { type: ApiService },
        { type: PrintService },
        { type: DashboardService }
    ]; };
    __decorate([
        ViewChild('viewer')
    ], StimulsoftViewerComponent.prototype, "viewerElement", void 0);
    __decorate([
        Output()
    ], StimulsoftViewerComponent.prototype, "loaded", void 0);
    __decorate([
        Output()
    ], StimulsoftViewerComponent.prototype, "error", void 0);
    __decorate([
        Output()
    ], StimulsoftViewerComponent.prototype, "export", void 0);
    __decorate([
        Output()
    ], StimulsoftViewerComponent.prototype, "email", void 0);
    __decorate([
        Output()
    ], StimulsoftViewerComponent.prototype, "print", void 0);
    __decorate([
        Output()
    ], StimulsoftViewerComponent.prototype, "design", void 0);
    __decorate([
        Input()
    ], StimulsoftViewerComponent.prototype, "requestUrl", void 0);
    __decorate([
        Input()
    ], StimulsoftViewerComponent.prototype, "action", void 0);
    __decorate([
        Input()
    ], StimulsoftViewerComponent.prototype, "properties", void 0);
    __decorate([
        Input()
    ], StimulsoftViewerComponent.prototype, "width", void 0);
    __decorate([
        Input()
    ], StimulsoftViewerComponent.prototype, "height", void 0);
    __decorate([
        Input()
    ], StimulsoftViewerComponent.prototype, "backgroundColor", void 0);
    __decorate([
        Input()
    ], StimulsoftViewerComponent.prototype, "style", void 0);
    StimulsoftViewerComponent = __decorate([
        Component({
            selector: 'stimulsoft-viewer-angular',
            template: "\n    <span #viewer [style]=\"style\"\n      [style.top.px]=\"0\"\n      [style.right.px]=\"0\"\n      [style.bottom.px]=\"0\"\n      [style.left.px]=\"0\"\n      [style.display]=\"'inline-block'\"\n      [style.backgroundColor]=\"backgroundColor\"\n      [style.width]=\"this.width != null ? this.width : '100%'\"\n      [style.height]=\"this.height != null ? this.height : (model.options?.appearance.scrollbarsMode ? '650px' : '100%')\">\n      <div class=\"stiJsViewerMainPanel\">\n        <sti-center-text *ngIf=\"initialized\"></sti-center-text>\n        <sti-toolbar *ngIf=\"initialized\"></sti-toolbar>\n        <div *ngFor=\"let i of [1,2,3,4,5]\" [style.zIndex]=\"i * 10\" [style.display]=\"formService.form?.level == i ? '' : 'none'\" class=\"stiJsViewerDisabledPanel\"></div>\n        <sti-about-panel *ngIf=\"initialized\"></sti-about-panel>\n\n        <sti-dashboards-panel *ngIf=\"initialized\"></sti-dashboards-panel>\n        <sti-report-panel *ngIf=\"initialized\"></sti-report-panel>\n        <sti-progress *ngIf=\"initialized\"></sti-progress>\n        <sti-find-panel *ngIf=\"initialized\"></sti-find-panel>\n        <sti-drill-down-panel *ngIf=\"initialized\"></sti-drill-down-panel>\n        <sti-resources-panel *ngIf=\"initialized\"></sti-resources-panel>\n        <sti-navigate-panel *ngIf=\"initialized\"></sti-navigate-panel>\n\n        <sti-export-form *ngIf=\"initialized\" [exportFormSettings]=\"exportService.exportFormSettings\"></sti-export-form>\n        <sti-send-email-form *ngIf=\"initialized\"></sti-send-email-form>\n        <sti-password-form *ngIf=\"initialized\"></sti-password-form>\n        <sti-error-message-form *ngIf=\"initialized\"></sti-error-message-form>\n        <sti-notification-form *ngIf=\"initialized\"></sti-notification-form>\n\n        <sti-tooltip *ngIf=\"initialized\"></sti-tooltip>\n        <sti-menu *ngFor=\"let menu of menuService.menus\" [menu]=\"menu\"></sti-menu>\n        <sti-bookmarks-panel *ngIf=\"initialized\"></sti-bookmarks-panel>\n        <sti-interactions-panel *ngIf=\"initialized\"></sti-interactions-panel>\n\n        <sti-open-dialog *ngIf=\"initialized\" [fileMask]=\"model.openDialogFileMask\"></sti-open-dialog>\n      </div>\n    </span>\n  ",
            providers: [ModelService, StiHttpClientService, ControllerService, StylesService, HelperService, MenuService,
                MouseService, PageService, TooltipService, FindService, AnimationService, Md5Service, InteractionsService, FormService, RadioButtonService, ExportService,
                CollectionsService, MailService, EditableFieldsService, DrillDownService, PrintService, FullScreenService, ToolbarService, ApiService, DashboardService]
        })
    ], StimulsoftViewerComponent);
    return StimulsoftViewerComponent;
}());
export { StimulsoftViewerComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RpbXVsc29mdC12aWV3ZXItYW5ndWxhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL3N0aW11bHNvZnQtdmlld2VyLWFuZ3VsYXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBaUIsU0FBUyxFQUF5QixNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2hJLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNsRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQzFELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUNuRCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDcEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDMUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3hELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDNUQsT0FBTyxFQUFFLFdBQVcs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QUErQztJQUs5QztRQUFULE1BQU0sRUFBRTs0REFBK0M7SUFLOUM7UUFBVCxNQUFNLEVBQUU7NkRBQWdEO0lBTWhEO1FBQVIsS0FBSyxFQUFFO2lFQUFvQjtJQUtuQjtRQUFSLEtBQUssRUFBRTs2REFBZ0I7SUFLZjtRQUFSLEtBQUssRUFBRTtpRUFBaUI7SUFLaEI7UUFBUixLQUFLLEVBQUU7NERBQWU7SUFLZDtRQUFSLEtBQUssRUFBRTs2REFBZ0I7SUFLZjtRQUFSLEtBQUssRUFBRTtzRUFBMkI7SUFLMUI7UUFBUixLQUFLLEVBQUU7NERBQWU7SUF2RVoseUJBQXlCO1FBN0NyQyxTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsMkJBQTJCO1lBQ3JDLFFBQVEsRUFBRSx3ckVBc0NUO1lBQ0QsU0FBUyxFQUFFLENBQUMsWUFBWSxFQUFFLG9CQUFvQixFQUFFLGlCQUFpQixFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsV0FBVztnQkFDMUcsWUFBWSxFQUFFLFdBQVcsRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLGdCQUFnQixFQUFFLFVBQVUsRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEVBQUUsa0JBQWtCLEVBQUUsYUFBYTtnQkFDekosa0JBQWtCLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLGdCQUFnQixFQUFFLFlBQVksRUFBRSxpQkFBaUIsRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixDQUFDO1NBQzNKLENBQUM7T0FDVyx5QkFBeUIsQ0F5S3JDO0lBQUQsZ0NBQUM7Q0FBQSxBQXpLRCxJQXlLQztTQXpLWSx5QkFBeUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEFmdGVyVmlld0luaXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiwgT25DaGFuZ2VzLCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvY29udHJvbGxlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWVudVNlcnZpY2UgfSBmcm9tICcuL21lbnUvbWVudS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9tb2RlbC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4vc2VydmljZXMvb2JqZWN0cyc7XHJcbmltcG9ydCB7IEV4cG9ydFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2V4cG9ydC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRm9ybVNlcnZpY2UgfSBmcm9tICcuL2Zvcm1zL2Zvcm0uc2VydmljZSc7XHJcbmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2FwaS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUHJpbnRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9wcmludC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGFzaGJvYXJkU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvZGFzaGJvYXJkLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTdGlIdHRwQ2xpZW50U2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvaHR0cC1jbGllbnQuc2VydmljZSc7XHJcbmltcG9ydCB7IFN0eWxlc1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3N0eWxlcy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgSGVscGVyU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvaGVscGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBNb3VzZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL21vdXNlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBQYWdlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvcGFnZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgVG9vbHRpcFNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3Rvb2x0aXAuc2VydmljZSc7XHJcbmltcG9ydCB7IEZpbmRTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9maW5kLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBBbmltYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9hbmltYXRpb24uc2VydmljZSc7XHJcbmltcG9ydCB7IEludGVyYWN0aW9uc1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2ludGVyYWN0aW9ucy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUmFkaW9CdXR0b25TZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9yYWRpby1idXR0b24uc2VydmljZSc7XHJcbmltcG9ydCB7IENvbGxlY3Rpb25zU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvY29sbGVjdGlvbnMuc2VydmljZSc7XHJcbmltcG9ydCB7IE1haWxTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9tYWlsLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBFZGl0YWJsZUZpZWxkc1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2VkaXRhYmxlLWZpZWxkcy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRHJpbGxEb3duU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvZHJpbGwtZG93bi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWQ1U2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvbWQ1LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGdWxsU2NyZWVuU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvZnVsbC1zY3JlZW4uc2VydmljZSc7XHJcbmltcG9ydCB7IFRvb2xiYXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy90b29sYmFyLnNlcnZpY2UnO1xyXG4vLzFiZmIzNTFjMWFkZDI3YjE1MzdmZmNlOWM3MjNlM2NiMWY1YjI3YmIgMDIuMDMuMjAyMSAxNzoyOToyMFxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdzdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPHNwYW4gI3ZpZXdlciBbc3R5bGVdPVwic3R5bGVcIlxyXG4gICAgICBbc3R5bGUudG9wLnB4XT1cIjBcIlxyXG4gICAgICBbc3R5bGUucmlnaHQucHhdPVwiMFwiXHJcbiAgICAgIFtzdHlsZS5ib3R0b20ucHhdPVwiMFwiXHJcbiAgICAgIFtzdHlsZS5sZWZ0LnB4XT1cIjBcIlxyXG4gICAgICBbc3R5bGUuZGlzcGxheV09XCInaW5saW5lLWJsb2NrJ1wiXHJcbiAgICAgIFtzdHlsZS5iYWNrZ3JvdW5kQ29sb3JdPVwiYmFja2dyb3VuZENvbG9yXCJcclxuICAgICAgW3N0eWxlLndpZHRoXT1cInRoaXMud2lkdGggIT0gbnVsbCA/IHRoaXMud2lkdGggOiAnMTAwJSdcIlxyXG4gICAgICBbc3R5bGUuaGVpZ2h0XT1cInRoaXMuaGVpZ2h0ICE9IG51bGwgPyB0aGlzLmhlaWdodCA6IChtb2RlbC5vcHRpb25zPy5hcHBlYXJhbmNlLnNjcm9sbGJhcnNNb2RlID8gJzY1MHB4JyA6ICcxMDAlJylcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyTWFpblBhbmVsXCI+XHJcbiAgICAgICAgPHN0aS1jZW50ZXItdGV4dCAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktY2VudGVyLXRleHQ+XHJcbiAgICAgICAgPHN0aS10b29sYmFyICpuZ0lmPVwiaW5pdGlhbGl6ZWRcIj48L3N0aS10b29sYmFyPlxyXG4gICAgICAgIDxkaXYgKm5nRm9yPVwibGV0IGkgb2YgWzEsMiwzLDQsNV1cIiBbc3R5bGUuekluZGV4XT1cImkgKiAxMFwiIFtzdHlsZS5kaXNwbGF5XT1cImZvcm1TZXJ2aWNlLmZvcm0/LmxldmVsID09IGkgPyAnJyA6ICdub25lJ1wiIGNsYXNzPVwic3RpSnNWaWV3ZXJEaXNhYmxlZFBhbmVsXCI+PC9kaXY+XHJcbiAgICAgICAgPHN0aS1hYm91dC1wYW5lbCAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktYWJvdXQtcGFuZWw+XHJcblxyXG4gICAgICAgIDxzdGktZGFzaGJvYXJkcy1wYW5lbCAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktZGFzaGJvYXJkcy1wYW5lbD5cclxuICAgICAgICA8c3RpLXJlcG9ydC1wYW5lbCAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktcmVwb3J0LXBhbmVsPlxyXG4gICAgICAgIDxzdGktcHJvZ3Jlc3MgKm5nSWY9XCJpbml0aWFsaXplZFwiPjwvc3RpLXByb2dyZXNzPlxyXG4gICAgICAgIDxzdGktZmluZC1wYW5lbCAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktZmluZC1wYW5lbD5cclxuICAgICAgICA8c3RpLWRyaWxsLWRvd24tcGFuZWwgKm5nSWY9XCJpbml0aWFsaXplZFwiPjwvc3RpLWRyaWxsLWRvd24tcGFuZWw+XHJcbiAgICAgICAgPHN0aS1yZXNvdXJjZXMtcGFuZWwgKm5nSWY9XCJpbml0aWFsaXplZFwiPjwvc3RpLXJlc291cmNlcy1wYW5lbD5cclxuICAgICAgICA8c3RpLW5hdmlnYXRlLXBhbmVsICpuZ0lmPVwiaW5pdGlhbGl6ZWRcIj48L3N0aS1uYXZpZ2F0ZS1wYW5lbD5cclxuXHJcbiAgICAgICAgPHN0aS1leHBvcnQtZm9ybSAqbmdJZj1cImluaXRpYWxpemVkXCIgW2V4cG9ydEZvcm1TZXR0aW5nc109XCJleHBvcnRTZXJ2aWNlLmV4cG9ydEZvcm1TZXR0aW5nc1wiPjwvc3RpLWV4cG9ydC1mb3JtPlxyXG4gICAgICAgIDxzdGktc2VuZC1lbWFpbC1mb3JtICpuZ0lmPVwiaW5pdGlhbGl6ZWRcIj48L3N0aS1zZW5kLWVtYWlsLWZvcm0+XHJcbiAgICAgICAgPHN0aS1wYXNzd29yZC1mb3JtICpuZ0lmPVwiaW5pdGlhbGl6ZWRcIj48L3N0aS1wYXNzd29yZC1mb3JtPlxyXG4gICAgICAgIDxzdGktZXJyb3ItbWVzc2FnZS1mb3JtICpuZ0lmPVwiaW5pdGlhbGl6ZWRcIj48L3N0aS1lcnJvci1tZXNzYWdlLWZvcm0+XHJcbiAgICAgICAgPHN0aS1ub3RpZmljYXRpb24tZm9ybSAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktbm90aWZpY2F0aW9uLWZvcm0+XHJcblxyXG4gICAgICAgIDxzdGktdG9vbHRpcCAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktdG9vbHRpcD5cclxuICAgICAgICA8c3RpLW1lbnUgKm5nRm9yPVwibGV0IG1lbnUgb2YgbWVudVNlcnZpY2UubWVudXNcIiBbbWVudV09XCJtZW51XCI+PC9zdGktbWVudT5cclxuICAgICAgICA8c3RpLWJvb2ttYXJrcy1wYW5lbCAqbmdJZj1cImluaXRpYWxpemVkXCI+PC9zdGktYm9va21hcmtzLXBhbmVsPlxyXG4gICAgICAgIDxzdGktaW50ZXJhY3Rpb25zLXBhbmVsICpuZ0lmPVwiaW5pdGlhbGl6ZWRcIj48L3N0aS1pbnRlcmFjdGlvbnMtcGFuZWw+XHJcblxyXG4gICAgICAgIDxzdGktb3Blbi1kaWFsb2cgKm5nSWY9XCJpbml0aWFsaXplZFwiIFtmaWxlTWFza109XCJtb2RlbC5vcGVuRGlhbG9nRmlsZU1hc2tcIj48L3N0aS1vcGVuLWRpYWxvZz5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L3NwYW4+XHJcbiAgYCxcclxuICBwcm92aWRlcnM6IFtNb2RlbFNlcnZpY2UsIFN0aUh0dHBDbGllbnRTZXJ2aWNlLCBDb250cm9sbGVyU2VydmljZSwgU3R5bGVzU2VydmljZSwgSGVscGVyU2VydmljZSwgTWVudVNlcnZpY2UsXHJcbiAgICBNb3VzZVNlcnZpY2UsIFBhZ2VTZXJ2aWNlLCBUb29sdGlwU2VydmljZSwgRmluZFNlcnZpY2UsIEFuaW1hdGlvblNlcnZpY2UsIE1kNVNlcnZpY2UsIEludGVyYWN0aW9uc1NlcnZpY2UsIEZvcm1TZXJ2aWNlLCBSYWRpb0J1dHRvblNlcnZpY2UsIEV4cG9ydFNlcnZpY2UsXHJcbiAgICBDb2xsZWN0aW9uc1NlcnZpY2UsIE1haWxTZXJ2aWNlLCBFZGl0YWJsZUZpZWxkc1NlcnZpY2UsIERyaWxsRG93blNlcnZpY2UsIFByaW50U2VydmljZSwgRnVsbFNjcmVlblNlcnZpY2UsIFRvb2xiYXJTZXJ2aWNlLCBBcGlTZXJ2aWNlLCBEYXNoYm9hcmRTZXJ2aWNlXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgU3RpbXVsc29mdFZpZXdlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzIHtcclxuXHJcbiAgLyoqXHJcbiAgICogUm9vdCB2aWV3ZXIgc3BhblxyXG4gICAqL1xyXG4gIEBWaWV3Q2hpbGQoJ3ZpZXdlcicpIHZpZXdlckVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gIC8qKlxyXG4gICAqIE9jY3VycyB3aGVuIHJlcG9ydC9kYXNoYm9hcmQgbG9hZGVkXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIGxvYWRlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIE9jY3VycyBvbiBlcnJvciwgJGV2ZW50IGlzIEVycm9yTWVzc2FnZSBvYmplY3QgY29udGFpbnMgZXJyb3I6IHN0cmluZyAmIHR5cGU6IGFueSAgKGlmIHByZXNlbnQpXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIGVycm9yOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbiAgLyoqXHJcbiAgICogT2NjdXJzIG9uIGV4cG9ydCwgJGV2ZW50IG9iamVjdCBjb250YWlucyBleHBvcnRGb3JtYXQ6IHN0cmluZyAmIGV4cG9ydFNldHRpbmdzOiB7fVxyXG4gICAqL1xyXG4gIEBPdXRwdXQoKSBleHBvcnQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAvKipcclxuICAgKiBPY2N1cnMgb24gZXhwb3J0ICYgZW1haWwsICRldmVudCBvYmplY3QgY29udGFpbnMgZXhwb3J0Rm9ybWF0OiBzdHJpbmcgJiBleHBvcnRTZXR0aW5nczoge31cclxuICAgKi9cclxuICBAT3V0cHV0KCkgZW1haWw6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAvKipcclxuICAgKiBPY2N1cnMgb24gZXhwb3J0ICYgZW1haWwsICRldmVudCBvYmplY3QgY29udGFpbnMgZm9ybWF0OiBzdHJpbmcgOiAnUHJpbnRQZGYnIG9yICdQcmludFdpdGhvdXRQcmV2aWV3JyBvciAnUHJpbnRXaXRoUHJldmlldydcclxuICAgKi9cclxuICBAT3V0cHV0KCkgcHJpbnQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICAvKipcclxuICAgKiBPY2N1cnMgb24gcHJlc3NpbmcgJ0Rlc2lnbicgYnV0dG9uXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIGRlc2lnbjogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFVybCB0byBzZXJ2ZXIgaW5zdGFuY2UsIG11c3QgY29udGFpbnMgcGxhY2Vob2xkZXIge2FjdGlvbn0gdGhhdCB3aWxsIHJlcGxhY2Ugd2l0aCBhY3Rpb25cclxuICAgKiBFeGFtcGxlOiBodHRwOi8vc2VydmVyLnVybDo1MTUyOC9WaWV3ZXIve2FjdGlvbn1cclxuICAgKi9cclxuICBASW5wdXQoKSByZXF1ZXN0VXJsOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbnRyb2xsZXIgYWN0aW9uIHRoYXQgaGFuZGxlIHZpZXdlciBpbml0aWFsIHJlcXVlc3RcclxuICAgKi9cclxuICBASW5wdXQoKSBhY3Rpb246IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogUHJvcGVydGllcyB0aGF0IHdpbGwgdHJhbnNmZXIgdG8gY29udHJvbGxlciBhY3Rpb24gYXMgSlNPTiBvYmplY3RcclxuICAgKi9cclxuICBASW5wdXQoKSBwcm9wZXJ0aWVzOiBhbnk7XHJcblxyXG4gIC8qKlxyXG4gICAqIFZpZXdlciB3aWR0aFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHdpZHRoOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFZpZXdlciBoZWlnaHRcclxuICAgKi9cclxuICBASW5wdXQoKSBoZWlnaHQ6IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogVmlld2VyIGJhY2tncm91bmQgY29sb3JcclxuICAgKi9cclxuICBASW5wdXQoKSBiYWNrZ3JvdW5kQ29sb3IgPSAnV2hpdGUnO1xyXG5cclxuICAvKipcclxuICAgKiBTdHlsZSBvZiB2aWV3ZXIgYXBwbGllZCB0byBtYWluIHNwYW4gYXMgW3N0eWxlXT1cInN0eWxlXCJcclxuICAgKi9cclxuICBASW5wdXQoKSBzdHlsZTogc3RyaW5nO1xyXG5cclxuICBwdWJsaWMgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgcHJpdmF0ZSB2aWV3SW5pdCA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbnRyb2xsZXI6IENvbnRyb2xsZXJTZXJ2aWNlLCBwdWJsaWMgbWVudVNlcnZpY2U6IE1lbnVTZXJ2aWNlLFxyXG4gICAgcHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UsIHB1YmxpYyBleHBvcnRTZXJ2aWNlOiBFeHBvcnRTZXJ2aWNlLCBwdWJsaWMgZm9ybVNlcnZpY2U6IEZvcm1TZXJ2aWNlLFxyXG4gICAgcHVibGljIGFwaTogQXBpU2VydmljZSwgcHJpdmF0ZSBwcmludFNlcnZpY2U6IFByaW50U2VydmljZSwgcHJpdmF0ZSBkYXNoYm9hcmRTZXJ2aWNlOiBEYXNoYm9hcmRTZXJ2aWNlKSB7XHJcblxyXG4gICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gdGhpcy5yZXNpemUoKTtcclxuXHJcbiAgICB0aGlzLmluaXRFdmVudHMoKTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IGltcG9ydCgnQGFuZ3VsYXIvY29yZScpLlNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcclxuICAgIHRoaXMubG9hZFZpZXdlcigpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmNvbnRyb2xsZXIuZ2V0TWVzc2FnZSgpLnN1YnNjcmliZSgobWVzc2FnZTogTWVzc2FnZSkgPT4ge1xyXG4gICAgICBzd2l0Y2ggKG1lc3NhZ2UuYWN0aW9uKSB7XHJcbiAgICAgICAgY2FzZSAndmlld2VyX2xvYWRlZCc6XHJcbiAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMudmlld0luaXQgPSB0cnVlO1xyXG4gICAgdGhpcy5sb2FkVmlld2VyKCk7XHJcbiAgfVxyXG5cclxuICBpbml0RXZlbnRzKCkge1xyXG4gICAgdGhpcy5jb250cm9sbGVyLmdldE1lc3NhZ2UoKS5zdWJzY3JpYmUoKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHtcclxuICAgICAgc3dpdGNoIChtZXNzYWdlLmFjdGlvbikge1xyXG4gICAgICAgIGNhc2UgJ0dldFJlcG9ydCc6XHJcbiAgICAgICAgY2FzZSAnT3BlblJlcG9ydCc6XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkZWQubmV4dCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5jb250cm9sbGVyLmdldEFjdGlvbk1lc3NhZ2UoKS5zdWJzY3JpYmUoKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHtcclxuICAgICAgc3dpdGNoIChtZXNzYWdlLmFjdGlvbikge1xyXG4gICAgICAgIGNhc2UgJ0Vycm9yJzpcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yLm5leHQodGhpcy5tb2RlbC5lcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAnRXhwb3J0UmVwb3J0JzpcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmV4cG9ydC5uZXh0KG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICdFbWFpbCc6XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lbWFpbC5uZXh0KG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICdQcmludCc6XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcmludC5uZXh0KG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICdEZXNpZ24nOlxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVzaWduLm5leHQoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbG9hZFZpZXdlcigpIHtcclxuICAgIGlmICh0aGlzLnZpZXdJbml0KSB7XHJcbiAgICAgIHRoaXMubW9kZWwucmVxdWVzdFVybCA9IHRoaXMucmVxdWVzdFVybDtcclxuICAgICAgdGhpcy5tb2RlbC5hY3Rpb24gPSB0aGlzLmFjdGlvbjtcclxuICAgICAgdGhpcy5tb2RlbC5wcm9wZXJ0aWVzID0gdGhpcy5wcm9wZXJ0aWVzO1xyXG4gICAgICB0aGlzLmNvbnRyb2xsZXIubG9hZFZpZXdlcigpO1xyXG4gICAgICB0aGlzLnJlc2l6ZSgpO1xyXG4gICAgICB0aGlzLm1vZGVsLmNvbnRyb2xzLnZpZXdlci5lbCA9IHRoaXMudmlld2VyRWxlbWVudDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2l6ZSgpIHtcclxuICAgIGlmICh0aGlzLnZpZXdlckVsZW1lbnQ/Lm5hdGl2ZUVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5tb2RlbC52aWV3ZXJTaXplID0geyB3aWR0aDogdGhpcy52aWV3ZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGgsIGhlaWdodDogdGhpcy52aWV3ZXJFbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0IH07XHJcbiAgICAgIHRoaXMuY29udHJvbGxlci52aWV3ZXJSZXNpemVkKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==