import { __decorate } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { ControllerService } from '../services/controller.service';
import { HelperService } from '../services/helper.service';
var ResourcesPanelComponent = /** @class */ (function () {
    function ResourcesPanelComponent(model, controller, helper) {
        var _this = this;
        this.model = model;
        this.controller = controller;
        this.helper = helper;
        controller.getMessage().subscribe(function (message) {
            var _a;
            if (message.action === 'GetReport' || message.action === 'OpenReport') {
                _this.model.controls.resourcesPanel.visible = ((_a = _this.model.reportParams.resources) === null || _a === void 0 ? void 0 : _a.length) > 0;
            }
        });
    }
    ResourcesPanelComponent.prototype.ngOnInit = function () { };
    ResourcesPanelComponent.prototype.ngAfterViewInit = function () {
        this.model.controls.resourcesPanel.el = this.element;
    };
    ResourcesPanelComponent.prototype.action = function (resource) {
        var resTypesAllowedViewInBrowser = ['Image', 'Pdf', 'Txt'];
        var viewType = resTypesAllowedViewInBrowser.indexOf(resource.type) >= 0 ? 'View' : 'SaveFile';
        this.controller.postReportResource(resource.name, this.model.options.jsMode ? 'SaveFile' : viewType);
    };
    ResourcesPanelComponent.prototype.getResourceImage = function (resourceType) {
        if (this.model.img('BigResource' + resourceType + '.png') !== '') {
            return 'BigResource' + resourceType + '.png';
        }
        else {
            return 'BigResource.png';
        }
    };
    ResourcesPanelComponent.prototype.getMenuItems = function (resource) {
        var items = [];
        items.push({ name: 'Resource' + 'View', caption: this.model.loc('ButtonView'), value: resource });
        items.push({ name: 'Resource' + 'SaveFile', caption: this.model.loc('SaveFile'), value: resource });
        return items;
    };
    ResourcesPanelComponent.prototype.getActionName = function (resource) {
        if (!resource.id) {
            resource.id = Math.random().toString();
        }
        return 'resource' + resource.name + resource.id;
    };
    ResourcesPanelComponent.ctorParameters = function () { return [
        { type: ModelService },
        { type: ControllerService },
        { type: HelperService }
    ]; };
    __decorate([
        ViewChild('element')
    ], ResourcesPanelComponent.prototype, "element", void 0);
    ResourcesPanelComponent = __decorate([
        Component({
            selector: 'sti-resources-panel',
            template: "\n    <div #element style=\"z-index: 3\"\n      [style.display]=\"this.model.controls.resourcesPanel.visible ? '' : 'none'\"\n      [style.fontFamily]=\"model.options.toolbar.fontFamily\"\n      [style.fontColor]=\"model.options.toolbar.fontColor\"\n      [class]=\"'stiJsViewerToolBar' + (model.options.toolbar.displayMode == 'Separated' ? ' stiJsViewerToolBarSeparated' : '')\">\n      <div [style.paddingTop]=\"model.options.toolbar.displayMode == 'Simple' ? '2px' : ''\">\n        <div class=\"stiJsViewerToolBarTable\" style=\"box-sizing: border-box; display: table;\"\n          [style.border]=\"model.options.toolbar.displayMode == 'Separated' ? '0px' : ''\">\n          <table class=\"stiJsViewerClearAllStyles\" cellpadding=\"0\" cellspacing=\"0\">\n            <tbody>\n              <tr class=\"stiJsViewerClearAllStyles\">\n                <td *ngFor=\"let resource of model.reportParams.resources\" class=\"stiJsViewerClearAllStyles\">\n                  <sti-button [caption]=\"resource.name\"\n                    [caption2]=\"helper.getHumanFileSize(resource.size, 1)\"\n                    [imageName]=\"getResourceImage(resource.type)\"\n                    [styleName]=\"'stiJsViewerFormButton'\"\n                    [height]=\"'auto'\"\n                    [margin]=\"'3px 0 3px 3px'\"\n                    [innerTableWidth]=\"'100%'\"\n                    [minWidth]=\"'80px'\"\n                    [captionAlign]=\"'left'\"\n                    [captionPaddingLeft]=\"'3px'\"\n                    [captionMaxWidth]=\"'150px'\"\n                    [captionLineHeight]=\"'14px'\"\n                    [captionWhiteSpace]=\"'nowrap'\"\n                    [captionOverflow]=\"'hidden'\"\n                    [captionTextOverflow]=\"'ellipsis'\"\n                    [imageCellWidth]=\"'1px'\"\n                    [imageCellPadding]=\"'4px 8px 4px 4px'\"\n                    [menuItems]=\"getMenuItems(resource)\"\n                    [resourceButton]=\"true\"\n                    [imageSizesWidth]=\"32\"\n                    [imageSizesHeight]=\"32\"\n                    [actionName]=\"getActionName(resource)\"\n                    (action)=\"action(resource)\">\n                  </sti-button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  "
        })
    ], ResourcesPanelComponent);
    return ResourcesPanelComponent;
}());
export { ResourcesPanelComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb3VyY2VzLXBhbmVsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3N0aW11bHNvZnQtdmlld2VyLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9yZXNvdXJjZXMtcGFuZWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUF5QixTQUFTLEVBQWMsTUFBTSxlQUFlLENBQUM7QUFDeEYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBRW5FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQW9EM0Q7SUFJRSxpQ0FBbUIsS0FBbUIsRUFBUyxVQUE2QixFQUFTLE1BQXFCO1FBQTFHLGlCQU1DO1FBTmtCLFVBQUssR0FBTCxLQUFLLENBQWM7UUFBUyxlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUFTLFdBQU0sR0FBTixNQUFNLENBQWU7UUFDeEcsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFDLE9BQWdCOztZQUNqRCxJQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUssV0FBVyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUssWUFBWSxFQUFFO2dCQUNyRSxLQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxHQUFHLE9BQUEsS0FBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsU0FBUywwQ0FBRSxNQUFNLElBQUcsQ0FBQyxDQUFDO2FBQzVGO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsMENBQVEsR0FBUixjQUFhLENBQUM7SUFFZCxpREFBZSxHQUFmO1FBQ0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3ZELENBQUM7SUFFRCx3Q0FBTSxHQUFOLFVBQU8sUUFBa0I7UUFDdkIsSUFBTSw0QkFBNEIsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDN0QsSUFBTSxRQUFRLEdBQUcsNEJBQTRCLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDO1FBQ2hHLElBQUksQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdkcsQ0FBQztJQUVELGtEQUFnQixHQUFoQixVQUFpQixZQUFvQjtRQUNuQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxZQUFZLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2hFLE9BQU8sYUFBYSxHQUFHLFlBQVksR0FBRyxNQUFNLENBQUM7U0FDOUM7YUFBTTtZQUNMLE9BQU8saUJBQWlCLENBQUM7U0FDMUI7SUFDSCxDQUFDO0lBRUQsOENBQVksR0FBWixVQUFhLFFBQWtCO1FBQzdCLElBQU0sS0FBSyxHQUFlLEVBQUUsQ0FBQztRQUM3QixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLFVBQVUsR0FBRyxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ2xHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxHQUFHLFVBQVUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDcEcsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsK0NBQWEsR0FBYixVQUFjLFFBQWtCO1FBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFO1lBQ2hCLFFBQVEsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ3hDO1FBQ0QsT0FBTyxVQUFVLEdBQUcsUUFBUSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDO0lBQ2xELENBQUM7O2dCQXhDeUIsWUFBWTtnQkFBcUIsaUJBQWlCO2dCQUFpQixhQUFhOztJQUZwRjtRQUFyQixTQUFTLENBQUMsU0FBUyxDQUFDOzREQUFxQjtJQUYvQix1QkFBdUI7UUFqRG5DLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxxQkFBcUI7WUFDL0IsUUFBUSxFQUFFLG96RUE0Q1Q7U0FDRixDQUFDO09BRVcsdUJBQXVCLENBNkNuQztJQUFELDhCQUFDO0NBQUEsQUE3Q0QsSUE2Q0M7U0E3Q1ksdUJBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIEFmdGVyVmlld0luaXQsIFZpZXdDaGlsZCwgRWxlbWVudFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNb2RlbFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9tb2RlbC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29udHJvbGxlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb250cm9sbGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBSZXNvdXJjZSB9IGZyb20gJy4uL3NlcnZpY2VzL29iamVjdHMnO1xyXG5pbXBvcnQgeyBIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaGVscGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBNZW51SXRlbSB9IGZyb20gJy4uL21lbnUvbWVuaS1pdGVtLmNvbXBvbmVudCc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3N0aS1yZXNvdXJjZXMtcGFuZWwnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8ZGl2ICNlbGVtZW50IHN0eWxlPVwiei1pbmRleDogM1wiXHJcbiAgICAgIFtzdHlsZS5kaXNwbGF5XT1cInRoaXMubW9kZWwuY29udHJvbHMucmVzb3VyY2VzUGFuZWwudmlzaWJsZSA/ICcnIDogJ25vbmUnXCJcclxuICAgICAgW3N0eWxlLmZvbnRGYW1pbHldPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRGYW1pbHlcIlxyXG4gICAgICBbc3R5bGUuZm9udENvbG9yXT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5mb250Q29sb3JcIlxyXG4gICAgICBbY2xhc3NdPVwiJ3N0aUpzVmlld2VyVG9vbEJhcicgKyAobW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJyBzdGlKc1ZpZXdlclRvb2xCYXJTZXBhcmF0ZWQnIDogJycpXCI+XHJcbiAgICAgIDxkaXYgW3N0eWxlLnBhZGRpbmdUb3BdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTaW1wbGUnID8gJzJweCcgOiAnJ1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzdGlKc1ZpZXdlclRvb2xCYXJUYWJsZVwiIHN0eWxlPVwiYm94LXNpemluZzogYm9yZGVyLWJveDsgZGlzcGxheTogdGFibGU7XCJcclxuICAgICAgICAgIFtzdHlsZS5ib3JkZXJdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJzBweCcgOiAnJ1wiPlxyXG4gICAgICAgICAgPHRhYmxlIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiPlxyXG4gICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgPHRkICpuZ0Zvcj1cImxldCByZXNvdXJjZSBvZiBtb2RlbC5yZXBvcnRQYXJhbXMucmVzb3VyY2VzXCIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxzdGktYnV0dG9uIFtjYXB0aW9uXT1cInJlc291cmNlLm5hbWVcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uMl09XCJoZWxwZXIuZ2V0SHVtYW5GaWxlU2l6ZShyZXNvdXJjZS5zaXplLCAxKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgW2ltYWdlTmFtZV09XCJnZXRSZXNvdXJjZUltYWdlKHJlc291cmNlLnR5cGUpXCJcclxuICAgICAgICAgICAgICAgICAgICBbc3R5bGVOYW1lXT1cIidzdGlKc1ZpZXdlckZvcm1CdXR0b24nXCJcclxuICAgICAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cIidhdXRvJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInM3B4IDAgM3B4IDNweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtpbm5lclRhYmxlV2lkdGhdPVwiJzEwMCUnXCJcclxuICAgICAgICAgICAgICAgICAgICBbbWluV2lkdGhdPVwiJzgwcHgnXCJcclxuICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbkFsaWduXT1cIidsZWZ0J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25QYWRkaW5nTGVmdF09XCInM3B4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25NYXhXaWR0aF09XCInMTUwcHgnXCJcclxuICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbkxpbmVIZWlnaHRdPVwiJzE0cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbldoaXRlU3BhY2VdPVwiJ25vd3JhcCdcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uT3ZlcmZsb3ddPVwiJ2hpZGRlbidcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uVGV4dE92ZXJmbG93XT1cIidlbGxpcHNpcydcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtpbWFnZUNlbGxXaWR0aF09XCInMXB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW2ltYWdlQ2VsbFBhZGRpbmddPVwiJzRweCA4cHggNHB4IDRweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgIFttZW51SXRlbXNdPVwiZ2V0TWVudUl0ZW1zKHJlc291cmNlKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgW3Jlc291cmNlQnV0dG9uXT1cInRydWVcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtpbWFnZVNpemVzV2lkdGhdPVwiMzJcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtpbWFnZVNpemVzSGVpZ2h0XT1cIjMyXCJcclxuICAgICAgICAgICAgICAgICAgICBbYWN0aW9uTmFtZV09XCJnZXRBY3Rpb25OYW1lKHJlc291cmNlKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJhY3Rpb24ocmVzb3VyY2UpXCI+XHJcbiAgICAgICAgICAgICAgICAgIDwvc3RpLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlc291cmNlc1BhbmVsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgQFZpZXdDaGlsZCgnZWxlbWVudCcpIGVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtb2RlbDogTW9kZWxTZXJ2aWNlLCBwdWJsaWMgY29udHJvbGxlcjogQ29udHJvbGxlclNlcnZpY2UsIHB1YmxpYyBoZWxwZXI6IEhlbHBlclNlcnZpY2UpIHtcclxuICAgIGNvbnRyb2xsZXIuZ2V0TWVzc2FnZSgpLnN1YnNjcmliZSgobWVzc2FnZTogTWVzc2FnZSkgPT4ge1xyXG4gICAgICBpZiAobWVzc2FnZS5hY3Rpb24gPT09ICdHZXRSZXBvcnQnIHx8IG1lc3NhZ2UuYWN0aW9uID09PSAnT3BlblJlcG9ydCcpIHtcclxuICAgICAgICB0aGlzLm1vZGVsLmNvbnRyb2xzLnJlc291cmNlc1BhbmVsLnZpc2libGUgPSB0aGlzLm1vZGVsLnJlcG9ydFBhcmFtcy5yZXNvdXJjZXM/Lmxlbmd0aCA+IDA7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7IH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5tb2RlbC5jb250cm9scy5yZXNvdXJjZXNQYW5lbC5lbCA9IHRoaXMuZWxlbWVudDtcclxuICB9XHJcblxyXG4gIGFjdGlvbihyZXNvdXJjZTogUmVzb3VyY2UpIHtcclxuICAgIGNvbnN0IHJlc1R5cGVzQWxsb3dlZFZpZXdJbkJyb3dzZXIgPSBbJ0ltYWdlJywgJ1BkZicsICdUeHQnXTtcclxuICAgIGNvbnN0IHZpZXdUeXBlID0gcmVzVHlwZXNBbGxvd2VkVmlld0luQnJvd3Nlci5pbmRleE9mKHJlc291cmNlLnR5cGUpID49IDAgPyAnVmlldycgOiAnU2F2ZUZpbGUnO1xyXG4gICAgdGhpcy5jb250cm9sbGVyLnBvc3RSZXBvcnRSZXNvdXJjZShyZXNvdXJjZS5uYW1lLCB0aGlzLm1vZGVsLm9wdGlvbnMuanNNb2RlID8gJ1NhdmVGaWxlJyA6IHZpZXdUeXBlKTtcclxuICB9XHJcblxyXG4gIGdldFJlc291cmNlSW1hZ2UocmVzb3VyY2VUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMubW9kZWwuaW1nKCdCaWdSZXNvdXJjZScgKyByZXNvdXJjZVR5cGUgKyAnLnBuZycpICE9PSAnJykge1xyXG4gICAgICByZXR1cm4gJ0JpZ1Jlc291cmNlJyArIHJlc291cmNlVHlwZSArICcucG5nJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAnQmlnUmVzb3VyY2UucG5nJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldE1lbnVJdGVtcyhyZXNvdXJjZTogUmVzb3VyY2UpOiBNZW51SXRlbVtdIHtcclxuICAgIGNvbnN0IGl0ZW1zOiBNZW51SXRlbVtdID0gW107XHJcbiAgICBpdGVtcy5wdXNoKHsgbmFtZTogJ1Jlc291cmNlJyArICdWaWV3JywgY2FwdGlvbjogdGhpcy5tb2RlbC5sb2MoJ0J1dHRvblZpZXcnKSwgdmFsdWU6IHJlc291cmNlIH0pO1xyXG4gICAgaXRlbXMucHVzaCh7IG5hbWU6ICdSZXNvdXJjZScgKyAnU2F2ZUZpbGUnLCBjYXB0aW9uOiB0aGlzLm1vZGVsLmxvYygnU2F2ZUZpbGUnKSwgdmFsdWU6IHJlc291cmNlIH0pO1xyXG4gICAgcmV0dXJuIGl0ZW1zO1xyXG4gIH1cclxuXHJcbiAgZ2V0QWN0aW9uTmFtZShyZXNvdXJjZTogUmVzb3VyY2UpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFyZXNvdXJjZS5pZCkge1xyXG4gICAgICByZXNvdXJjZS5pZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKTtcclxuICAgIH1cclxuICAgIHJldHVybiAncmVzb3VyY2UnICsgcmVzb3VyY2UubmFtZSArIHJlc291cmNlLmlkO1xyXG4gIH1cclxufVxyXG4iXX0=