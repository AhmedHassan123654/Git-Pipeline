import { __decorate } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { ControllerService } from '../services/controller.service';
import { HelperService } from '../services/helper.service';
import { FormService } from '../forms/form.service';
var AboutPanelComponent = /** @class */ (function () {
    function AboutPanelComponent(model, controller, helper, formService) {
        var _this = this;
        this.model = model;
        this.controller = controller;
        this.helper = helper;
        this.formService = formService;
        this.year = new Date().getFullYear();
        this.top = 0;
        this.left = 0;
        this.opacity = 0;
        controller.getActionMessage().subscribe(function (message) {
            if (message.action === 'About') {
                _this.formService.form = { name: 'about', left: 0, top: 0, isMooving: false, level: 2 };
                _this.opacity = 0;
                setTimeout(function () {
                    _this.top = _this.model.viewerSize.height / 2 - _this.element.nativeElement.offsetHeight / 2;
                    _this.left = _this.model.viewerSize.width / 2 - _this.element.nativeElement.offsetWidth / 2;
                    _this.opacity = 1;
                });
            }
        });
    }
    AboutPanelComponent.prototype.ngOnInit = function () { };
    AboutPanelComponent.prototype.close = function () {
        this.formService.closeForm('about');
    };
    AboutPanelComponent.prototype.click = function (event) {
        if (event) {
            event.stopPropagation();
            event.preventDefault();
        }
        this.helper.openNewWindow('https://www.stimulsoft.com');
    };
    AboutPanelComponent.prototype.isLicensed = function () {
        return !this.model.options.cloudMode && !this.model.options.serverMode && !this.model.options.standaloneJsMode &&
            !this.model.options.reportDesignerMode && !this.model.options.licenseIsValid;
    };
    Object.defineProperty(AboutPanelComponent.prototype, "userLabel", {
        get: function () {
            var userName = this.model.options.licenseUserName || '';
            if (this.isLicensed()) {
                if (userName) {
                    userName += ', ';
                }
                return userName + this.helper.getBackText(true) + ' Version';
            }
            else {
                return userName;
            }
        },
        enumerable: true,
        configurable: true
    });
    AboutPanelComponent.ctorParameters = function () { return [
        { type: ModelService },
        { type: ControllerService },
        { type: HelperService },
        { type: FormService }
    ]; };
    __decorate([
        ViewChild('element')
    ], AboutPanelComponent.prototype, "element", void 0);
    AboutPanelComponent = __decorate([
        Component({
            selector: 'sti-about-panel',
            template: "\n    <div #element class=\"stiJsViewerAboutPanel\" style=\"background-size: contain;\"\n      [style.display]=\"formService.form?.name == 'about' ? '' : 'none'\"\n      [style.left.px]=\"left\"\n      [style.top.px]=\"top\"\n      [style.opacity]=\"opacity\"\n      (click)=\"close()\" >\n      <div class=\"stiJsViewerAboutPanelHeader\">\n        Stimulsoft Reports\n      </div>\n      <img src=\"{{model.img('About.png')}}\" style=\"margin-top: 30px; height: 94px; width: 94px;\">\n      <div class=\"stiJsViewerAboutPanelCopyright\">\n        {{'Copyright 2003-' + year + ' Stimulsoft'}}\n      </div>\n      <div class=\"stiJsViewerAboutPanelVersion\">\n        {{model.options.productVersion?.trim()}}, {{model.options?.frameworkType}}, Angular\n      </div>\n      <div class=\"stiJsViewerAboutPanelVersion\">\n        All rights reserved\n      </div>\n      <div class=\"stiJsViewerAboutPanelVersion\" style=\"margin-top: 20px;font-weight: bold; \"\n        [style.color]=\"isLicensed() ? 'red' : '#444444'\"\n        [style.display]=\"isLicensed() || userLabel ? '' : 'none'\">\n        {{userLabel}}\n      </div>\n      <div class=\"stiJsViewerFormSeparator\" style=\"margin-top: 20px;\">\n      </div>\n      <div class=\"stiJsViewerAboutPanelStiLink\" (click)='click($event)'>\n        www.stimulsoft.com\n      </div>\n    </div>\n  "
        })
    ], AboutPanelComponent);
    return AboutPanelComponent;
}());
export { AboutPanelComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJvdXQtcGFuZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vc3RpbXVsc29mdC12aWV3ZXItYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2Fib3V0LXBhbmVsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQWMsTUFBTSxlQUFlLENBQUM7QUFDekUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBRW5FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFzQ3BEO0lBVUUsNkJBQW1CLEtBQW1CLEVBQVMsVUFBNkIsRUFBUyxNQUFxQixFQUNqRyxXQUF3QjtRQURqQyxpQkFhQztRQWJrQixVQUFLLEdBQUwsS0FBSyxDQUFjO1FBQVMsZUFBVSxHQUFWLFVBQVUsQ0FBbUI7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQ2pHLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBUGpDLFNBQUksR0FBVyxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRXhDLFFBQUcsR0FBRyxDQUFDLENBQUM7UUFDUixTQUFJLEdBQUcsQ0FBQyxDQUFDO1FBQ1QsWUFBTyxHQUFHLENBQUMsQ0FBQztRQUlWLFVBQVUsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFDLE9BQWdCO1lBQ3ZELElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxPQUFPLEVBQUU7Z0JBQzlCLEtBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0JBQ3ZGLEtBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dCQUNqQixVQUFVLENBQUM7b0JBQ1QsS0FBSSxDQUFDLEdBQUcsR0FBRyxLQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLEtBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7b0JBQzFGLEtBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxLQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO29CQUN6RixLQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztnQkFDbkIsQ0FBQyxDQUFDLENBQUM7YUFDSjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELHNDQUFRLEdBQVIsY0FBYSxDQUFDO0lBRWQsbUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRCxtQ0FBSyxHQUFMLFVBQU0sS0FBVTtRQUNkLElBQUksS0FBSyxFQUFFO1lBQ1QsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3hCLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUN4QjtRQUNELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLDRCQUE0QixDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVELHdDQUFVLEdBQVY7UUFDRSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsZ0JBQWdCO1lBQzVHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsa0JBQWtCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUM7SUFDakYsQ0FBQztJQUVELHNCQUFJLDBDQUFTO2FBQWI7WUFDRSxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDO1lBQ3hELElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFO2dCQUNyQixJQUFJLFFBQVEsRUFBRTtvQkFDWixRQUFRLElBQUksSUFBSSxDQUFDO2lCQUNsQjtnQkFDRCxPQUFPLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxVQUFVLENBQUM7YUFDOUQ7aUJBQU07Z0JBQ0wsT0FBTyxRQUFRLENBQUM7YUFDakI7UUFDSCxDQUFDOzs7T0FBQTs7Z0JBNUN5QixZQUFZO2dCQUFxQixpQkFBaUI7Z0JBQWlCLGFBQWE7Z0JBQ3BGLFdBQVc7O0lBVFg7UUFBckIsU0FBUyxDQUFDLFNBQVMsQ0FBQzt3REFBcUI7SUFGL0IsbUJBQW1CO1FBcEMvQixTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsaUJBQWlCO1lBQzNCLFFBQVEsRUFBRSx1MENBK0JUO1NBQ0YsQ0FBQztPQUVXLG1CQUFtQixDQXVEL0I7SUFBRCwwQkFBQztDQUFBLEFBdkRELElBdURDO1NBdkRZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbW9kZWwuc2VydmljZSc7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY29udHJvbGxlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uL3NlcnZpY2VzL29iamVjdHMnO1xyXG5pbXBvcnQgeyBIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaGVscGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGb3JtU2VydmljZSB9IGZyb20gJy4uL2Zvcm1zL2Zvcm0uc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3N0aS1hYm91dC1wYW5lbCcsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgI2VsZW1lbnQgY2xhc3M9XCJzdGlKc1ZpZXdlckFib3V0UGFuZWxcIiBzdHlsZT1cImJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcIlxyXG4gICAgICBbc3R5bGUuZGlzcGxheV09XCJmb3JtU2VydmljZS5mb3JtPy5uYW1lID09ICdhYm91dCcgPyAnJyA6ICdub25lJ1wiXHJcbiAgICAgIFtzdHlsZS5sZWZ0LnB4XT1cImxlZnRcIlxyXG4gICAgICBbc3R5bGUudG9wLnB4XT1cInRvcFwiXHJcbiAgICAgIFtzdHlsZS5vcGFjaXR5XT1cIm9wYWNpdHlcIlxyXG4gICAgICAoY2xpY2spPVwiY2xvc2UoKVwiID5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyQWJvdXRQYW5lbEhlYWRlclwiPlxyXG4gICAgICAgIFN0aW11bHNvZnQgUmVwb3J0c1xyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGltZyBzcmM9XCJ7e21vZGVsLmltZygnQWJvdXQucG5nJyl9fVwiIHN0eWxlPVwibWFyZ2luLXRvcDogMzBweDsgaGVpZ2h0OiA5NHB4OyB3aWR0aDogOTRweDtcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyQWJvdXRQYW5lbENvcHlyaWdodFwiPlxyXG4gICAgICAgIHt7J0NvcHlyaWdodCAyMDAzLScgKyB5ZWFyICsgJyBTdGltdWxzb2Z0J319XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwic3RpSnNWaWV3ZXJBYm91dFBhbmVsVmVyc2lvblwiPlxyXG4gICAgICAgIHt7bW9kZWwub3B0aW9ucy5wcm9kdWN0VmVyc2lvbj8udHJpbSgpfX0sIHt7bW9kZWwub3B0aW9ucz8uZnJhbWV3b3JrVHlwZX19LCBBbmd1bGFyXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwic3RpSnNWaWV3ZXJBYm91dFBhbmVsVmVyc2lvblwiPlxyXG4gICAgICAgIEFsbCByaWdodHMgcmVzZXJ2ZWRcclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzdGlKc1ZpZXdlckFib3V0UGFuZWxWZXJzaW9uXCIgc3R5bGU9XCJtYXJnaW4tdG9wOiAyMHB4O2ZvbnQtd2VpZ2h0OiBib2xkOyBcIlxyXG4gICAgICAgIFtzdHlsZS5jb2xvcl09XCJpc0xpY2Vuc2VkKCkgPyAncmVkJyA6ICcjNDQ0NDQ0J1wiXHJcbiAgICAgICAgW3N0eWxlLmRpc3BsYXldPVwiaXNMaWNlbnNlZCgpIHx8IHVzZXJMYWJlbCA/ICcnIDogJ25vbmUnXCI+XHJcbiAgICAgICAge3t1c2VyTGFiZWx9fVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyRm9ybVNlcGFyYXRvclwiIHN0eWxlPVwibWFyZ2luLXRvcDogMjBweDtcIj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzdGlKc1ZpZXdlckFib3V0UGFuZWxTdGlMaW5rXCIgKGNsaWNrKT0nY2xpY2soJGV2ZW50KSc+XHJcbiAgICAgICAgd3d3LnN0aW11bHNvZnQuY29tXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIEFib3V0UGFuZWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBAVmlld0NoaWxkKCdlbGVtZW50JykgZWxlbWVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgeWVhcjogbnVtYmVyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gIGpzSGVscGVyOiBhbnk7XHJcbiAgdG9wID0gMDtcclxuICBsZWZ0ID0gMDtcclxuICBvcGFjaXR5ID0gMDtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UsIHB1YmxpYyBjb250cm9sbGVyOiBDb250cm9sbGVyU2VydmljZSwgcHVibGljIGhlbHBlcjogSGVscGVyU2VydmljZSxcclxuICAgIHB1YmxpYyBmb3JtU2VydmljZTogRm9ybVNlcnZpY2UpIHtcclxuICAgIGNvbnRyb2xsZXIuZ2V0QWN0aW9uTWVzc2FnZSgpLnN1YnNjcmliZSgobWVzc2FnZTogTWVzc2FnZSkgPT4ge1xyXG4gICAgICBpZiAobWVzc2FnZS5hY3Rpb24gPT09ICdBYm91dCcpIHtcclxuICAgICAgICB0aGlzLmZvcm1TZXJ2aWNlLmZvcm0gPSB7IG5hbWU6ICdhYm91dCcsIGxlZnQ6IDAsIHRvcDogMCwgaXNNb292aW5nOiBmYWxzZSwgbGV2ZWw6IDIgfTtcclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy50b3AgPSB0aGlzLm1vZGVsLnZpZXdlclNpemUuaGVpZ2h0IC8gMiAtIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgICB0aGlzLmxlZnQgPSB0aGlzLm1vZGVsLnZpZXdlclNpemUud2lkdGggLyAyIC0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgICAgICAgdGhpcy5vcGFjaXR5ID0gMTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuZm9ybVNlcnZpY2UuY2xvc2VGb3JtKCdhYm91dCcpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2soZXZlbnQ6IGFueSkge1xyXG4gICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5oZWxwZXIub3Blbk5ld1dpbmRvdygnaHR0cHM6Ly93d3cuc3RpbXVsc29mdC5jb20nKTtcclxuICB9XHJcblxyXG4gIGlzTGljZW5zZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIXRoaXMubW9kZWwub3B0aW9ucy5jbG91ZE1vZGUgJiYgIXRoaXMubW9kZWwub3B0aW9ucy5zZXJ2ZXJNb2RlICYmICF0aGlzLm1vZGVsLm9wdGlvbnMuc3RhbmRhbG9uZUpzTW9kZSAmJlxyXG4gICAgICAhdGhpcy5tb2RlbC5vcHRpb25zLnJlcG9ydERlc2lnbmVyTW9kZSAmJiAhdGhpcy5tb2RlbC5vcHRpb25zLmxpY2Vuc2VJc1ZhbGlkO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHVzZXJMYWJlbCgpOiBzdHJpbmcge1xyXG4gICAgbGV0IHVzZXJOYW1lID0gdGhpcy5tb2RlbC5vcHRpb25zLmxpY2Vuc2VVc2VyTmFtZSB8fCAnJztcclxuICAgIGlmICh0aGlzLmlzTGljZW5zZWQoKSkge1xyXG4gICAgICBpZiAodXNlck5hbWUpIHtcclxuICAgICAgICB1c2VyTmFtZSArPSAnLCAnO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB1c2VyTmFtZSArIHRoaXMuaGVscGVyLmdldEJhY2tUZXh0KHRydWUpICsgJyBWZXJzaW9uJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB1c2VyTmFtZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19