import { __decorate } from "tslib";
import { Component, Input, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { Menu, MenuService } from './menu.service';
import { trigger, state, style, transition, animate } from '@angular/animations';
import { ControllerService } from '../services/controller.service';
import { HelperService } from '../services/helper.service';
var MenuComponent = /** @class */ (function () {
    function MenuComponent(model, controller, helper, menuService) {
        this.model = model;
        this.controller = controller;
        this.helper = helper;
        this.menuService = menuService;
        this.style = 'display: none';
        this.overflow = 'hidden';
    }
    MenuComponent.prototype.ngAfterViewInit = function () {
        this.menu.menuEl = this.menuEl;
        this.menu.innerContent = this.innerContent;
    };
    MenuComponent.prototype.ngOnInit = function () {
    };
    MenuComponent.prototype.startAnimation = function (event) {
        if (event.toState === 'expanded') {
            this.style = 'width: 350px; overflow: hidden';
            this.overflow = 'hidden';
        }
    };
    MenuComponent.prototype.doneAnimation = function (event) {
        if (event.toState === 'expanded') {
            this.style = 'overflow: visible;';
            this.overflow = this.menu.type.indexOf('parameterMenu') === 0 || this.model.options.isMobileDevice ? 'auto' : 'hidden';
        }
        else if (event.toState === 'initialUp' || event.toState === 'initialDown') {
            this.style = 'display: none';
            this.overflow = 'hidden';
        }
    };
    MenuComponent.prototype.menuClick = function (item) {
        this.menuService.closeAllMenus();
        this.controller.action({ name: item.name, value: item.value });
    };
    MenuComponent.prototype.mouseup = function () {
        this.menuService.menuMouseUp = this.menu.type;
    };
    Object.defineProperty(MenuComponent.prototype, "zIndex", {
        get: function () {
            return this.menu.type === 'datePickerMenu' ? 36 : (this.menu.type === 'verticalMenu' ? 37 : 35);
        },
        enumerable: true,
        configurable: true
    });
    MenuComponent.ctorParameters = function () { return [
        { type: ModelService },
        { type: ControllerService },
        { type: HelperService },
        { type: MenuService }
    ]; };
    __decorate([
        Input()
    ], MenuComponent.prototype, "menu", void 0);
    __decorate([
        ViewChild('menuEl')
    ], MenuComponent.prototype, "menuEl", void 0);
    __decorate([
        ViewChild('innerContent')
    ], MenuComponent.prototype, "innerContent", void 0);
    MenuComponent = __decorate([
        Component({
            selector: 'sti-menu',
            template: "\n      <div #menuEl class=\"stiJsViewerParentMenu\"\n      [style]=\"menu.sizeStyle || style\"\n      [style.top.px]=\"menu.top\"\n      [style.left.px]=\"menu.left\"\n      [style.zIndex]=\"zIndex\"\n      [style.height]=\"menu.type=='buttonMenu' && model.options.isMobileDevice ? '100%' : menu.height + 'px'\"\n      [@.disabled]=\"!model.options.toolbar.menuAnimation\"\n      (mouseup)=\"mouseup()\">\n        <div #innerContent [style]=\"{overflowX: 'hidden', overflowY: overflow}\"\n        [style.color]=\"model.options.toolbar.fontColor\"\n        [style.fontFamily]=\"model.options.toolbar.fontFamily\"\n        [style.maxHeight]=\"menu.type=='buttonMenu' && model.options.isMobileDevice ? '100%' : '450px'\"\n        [style.height]=\"menu.type=='buttonMenu' && model.options.isMobileDevice ? '100%' : null\"\n        [@expand]=\"menu.state || 'initialDown'\"\n        (@expand.start)=\"startAnimation($event)\"\n        (@expand.done)=\"doneAnimation($event)\"\n        [class]=\"helper.val(menu.menuStyleName, 'stiJsViewerMenu')\">\n            <ng-container *ngIf=\"menu.type=='buttonMenu'\">\n              <sti-menu-item *ngFor=\"let item of menu.items\" [item]=\"item\" (click)=\"menuClick(item)\"></sti-menu-item>\n            </ng-container>\n\n            <sti-parameter-menu-edit-list *ngIf=\"menu.type=='parameterMenuForEditList'\" [menu]=\"menu\">\n            </sti-parameter-menu-edit-list>\n\n            <sti-parameter-menu-not-edit-list *ngIf=\"menu.type=='parameterMenuForNotEditList'\" [menu]=\"menu\">\n            </sti-parameter-menu-not-edit-list>\n\n            <sti-parameter-menu-for-value *ngIf=\"menu.type=='parameterMenuForValue'\" [menu]=\"menu\">\n            </sti-parameter-menu-for-value>\n\n            <sti-parameter-menu-for-range *ngIf=\"menu.type=='parameterMenuForRange'\" [menu]=\"menu\">\n            </sti-parameter-menu-for-range>\n\n            <sti-date-picker-menu *ngIf=\"menu.type=='datePickerMenu'\" [menu]=\"menu\">\n            </sti-date-picker-menu>\n\n            <sti-double-date-picker-menu *ngIf=\"menu.type=='doubleDatePickerMenu'\" [menu]=\"menu\">\n            </sti-double-date-picker-menu>\n\n            <sti-document-security-menu *ngIf=\"menu.type=='documentSecurityMenu'\">\n            </sti-document-security-menu>\n\n            <sti-digital-signature-menu *ngIf=\"menu.type=='useDigitalSignatureMenu'\">\n            </sti-digital-signature-menu>\n\n            <sti-vertical-menu *ngIf=\"menu.type=='verticalMenu'\" [menu]=\"menu\">\n            </sti-vertical-menu>\n        </div>\n      </div>\n  ",
            animations: [
                trigger('expand', [
                    state('initialDown', style({ transform: 'translateY(-100%)' })),
                    state('initialUp', style({ transform: 'translateY(100%)' })),
                    state('initialLeft', style({ transform: 'translateX(-100%)' })),
                    state('expanded', style({ transform: 'translateY(0) translateX(0)' })),
                    transition('initialUp => expanded', [
                        animate('150ms ease-in-out')
                    ]),
                    transition('initialDown => expanded', [
                        animate('150ms ease-in-out')
                    ]),
                    transition('initialLeft => expanded', [
                        animate('150ms ease-in-out')
                    ]),
                    transition('expanded => initialLeft', [
                        animate('150ms ease-in-out')
                    ])
                ])
            ]
        })
    ], MenuComponent);
    return MenuComponent;
}());
export { MenuComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL21lbnUvbWVudS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFjLFNBQVMsRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDL0YsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRXpELE9BQU8sRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDbkQsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQWtCLE1BQU0scUJBQXFCLENBQUM7QUFDakcsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDbkUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBeUUzRDtJQVVFLHVCQUFtQixLQUFtQixFQUFTLFVBQTZCLEVBQVMsTUFBcUIsRUFBUyxXQUF3QjtRQUF4SCxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBQVMsZUFBVSxHQUFWLFVBQVUsQ0FBbUI7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQVMsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFIM0ksVUFBSyxHQUFHLGVBQWUsQ0FBQztRQUN4QixhQUFRLEdBQUcsUUFBUSxDQUFDO0lBRTJILENBQUM7SUFFaEosdUNBQWUsR0FBZjtRQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3QyxDQUFDO0lBRUQsZ0NBQVEsR0FBUjtJQUNBLENBQUM7SUFFRCxzQ0FBYyxHQUFkLFVBQWUsS0FBcUI7UUFD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LE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztxQkFBQyxDQUFDO29CQUNoQyxVQUFVLENBQUMseUJBQXlCLEVBQUU7d0JBQ3BDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztxQkFBQyxDQUFDO2lCQUNqQyxDQUFDO2FBQ0g7U0FDRixDQUFDO09BRVcsYUFBYSxDQWtEekI7SUFBRCxvQkFBQztDQUFBLEFBbERELElBa0RDO1NBbERZLGFBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCwgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNb2RlbFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9tb2RlbC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWVudUl0ZW0gfSBmcm9tICcuL21lbmktaXRlbS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNZW51LCBNZW51U2VydmljZSB9IGZyb20gJy4vbWVudS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgdHJpZ2dlciwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCBhbmltYXRlLCBBbmltYXRpb25FdmVudCB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvbnRyb2xsZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IEhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3N0aS1tZW51JyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgICA8ZGl2ICNtZW51RWwgY2xhc3M9XCJzdGlKc1ZpZXdlclBhcmVudE1lbnVcIlxyXG4gICAgICBbc3R5bGVdPVwibWVudS5zaXplU3R5bGUgfHwgc3R5bGVcIlxyXG4gICAgICBbc3R5bGUudG9wLnB4XT1cIm1lbnUudG9wXCJcclxuICAgICAgW3N0eWxlLmxlZnQucHhdPVwibWVudS5sZWZ0XCJcclxuICAgICAgW3N0eWxlLnpJbmRleF09XCJ6SW5kZXhcIlxyXG4gICAgICBbc3R5bGUuaGVpZ2h0XT1cIm1lbnUudHlwZT09J2J1dHRvbk1lbnUnICYmIG1vZGVsLm9wdGlvbnMuaXNNb2JpbGVEZXZpY2UgPyAnMTAwJScgOiBtZW51LmhlaWdodCArICdweCdcIlxyXG4gICAgICBbQC5kaXNhYmxlZF09XCIhbW9kZWwub3B0aW9ucy50b29sYmFyLm1lbnVBbmltYXRpb25cIlxyXG4gICAgICAobW91c2V1cCk9XCJtb3VzZXVwKClcIj5cclxuICAgICAgICA8ZGl2ICNpbm5lckNvbnRlbnQgW3N0eWxlXT1cIntvdmVyZmxvd1g6ICdoaWRkZW4nLCBvdmVyZmxvd1k6IG92ZXJmbG93fVwiXHJcbiAgICAgICAgW3N0eWxlLmNvbG9yXT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5mb250Q29sb3JcIlxyXG4gICAgICAgIFtzdHlsZS5mb250RmFtaWx5XT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5mb250RmFtaWx5XCJcclxuICAgICAgICBbc3R5bGUubWF4SGVpZ2h0XT1cIm1lbnUudHlwZT09J2J1dHRvbk1lbnUnICYmIG1vZGVsLm9wdGlvbnMuaXNNb2JpbGVEZXZpY2UgPyAnMTAwJScgOiAnNDUwcHgnXCJcclxuICAgICAgICBbc3R5bGUuaGVpZ2h0XT1cIm1lbnUudHlwZT09J2J1dHRvbk1lbnUnICYmIG1vZGVsLm9wdGlvbnMuaXNNb2JpbGVEZXZpY2UgPyAnMTAwJScgOiBudWxsXCJcclxuICAgICAgICBbQGV4cGFuZF09XCJtZW51LnN0YXRlIHx8ICdpbml0aWFsRG93bidcIlxyXG4gICAgICAgIChAZXhwYW5kLnN0YXJ0KT1cInN0YXJ0QW5pbWF0aW9uKCRldmVudClcIlxyXG4gICAgICAgIChAZXhwYW5kLmRvbmUpPVwiZG9uZUFuaW1hdGlvbigkZXZlbnQpXCJcclxuICAgICAgICBbY2xhc3NdPVwiaGVscGVyLnZhbChtZW51Lm1lbnVTdHlsZU5hbWUsICdzdGlKc1ZpZXdlck1lbnUnKVwiPlxyXG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwibWVudS50eXBlPT0nYnV0dG9uTWVudSdcIj5cclxuICAgICAgICAgICAgICA8c3RpLW1lbnUtaXRlbSAqbmdGb3I9XCJsZXQgaXRlbSBvZiBtZW51Lml0ZW1zXCIgW2l0ZW1dPVwiaXRlbVwiIChjbGljayk9XCJtZW51Q2xpY2soaXRlbSlcIj48L3N0aS1tZW51LWl0ZW0+XHJcbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxyXG5cclxuICAgICAgICAgICAgPHN0aS1wYXJhbWV0ZXItbWVudS1lZGl0LWxpc3QgKm5nSWY9XCJtZW51LnR5cGU9PSdwYXJhbWV0ZXJNZW51Rm9yRWRpdExpc3QnXCIgW21lbnVdPVwibWVudVwiPlxyXG4gICAgICAgICAgICA8L3N0aS1wYXJhbWV0ZXItbWVudS1lZGl0LWxpc3Q+XHJcblxyXG4gICAgICAgICAgICA8c3RpLXBhcmFtZXRlci1tZW51LW5vdC1lZGl0LWxpc3QgKm5nSWY9XCJtZW51LnR5cGU9PSdwYXJhbWV0ZXJNZW51Rm9yTm90RWRpdExpc3QnXCIgW21lbnVdPVwibWVudVwiPlxyXG4gICAgICAgICAgICA8L3N0aS1wYXJhbWV0ZXItbWVudS1ub3QtZWRpdC1saXN0PlxyXG5cclxuICAgICAgICAgICAgPHN0aS1wYXJhbWV0ZXItbWVudS1mb3ItdmFsdWUgKm5nSWY9XCJtZW51LnR5cGU9PSdwYXJhbWV0ZXJNZW51Rm9yVmFsdWUnXCIgW21lbnVdPVwibWVudVwiPlxyXG4gICAgICAgICAgICA8L3N0aS1wYXJhbWV0ZXItbWVudS1mb3ItdmFsdWU+XHJcblxyXG4gICAgICAgICAgICA8c3RpLXBhcmFtZXRlci1tZW51LWZvci1yYW5nZSAqbmdJZj1cIm1lbnUudHlwZT09J3BhcmFtZXRlck1lbnVGb3JSYW5nZSdcIiBbbWVudV09XCJtZW51XCI+XHJcbiAgICAgICAgICAgIDwvc3RpLXBhcmFtZXRlci1tZW51LWZvci1yYW5nZT5cclxuXHJcbiAgICAgICAgICAgIDxzdGktZGF0ZS1waWNrZXItbWVudSAqbmdJZj1cIm1lbnUudHlwZT09J2RhdGVQaWNrZXJNZW51J1wiIFttZW51XT1cIm1lbnVcIj5cclxuICAgICAgICAgICAgPC9zdGktZGF0ZS1waWNrZXItbWVudT5cclxuXHJcbiAgICAgICAgICAgIDxzdGktZG91YmxlLWRhdGUtcGlja2VyLW1lbnUgKm5nSWY9XCJtZW51LnR5cGU9PSdkb3VibGVEYXRlUGlja2VyTWVudSdcIiBbbWVudV09XCJtZW51XCI+XHJcbiAgICAgICAgICAgIDwvc3RpLWRvdWJsZS1kYXRlLXBpY2tlci1tZW51PlxyXG5cclxuICAgICAgICAgICAgPHN0aS1kb2N1bWVudC1zZWN1cml0eS1tZW51ICpuZ0lmPVwibWVudS50eXBlPT0nZG9jdW1lbnRTZWN1cml0eU1lbnUnXCI+XHJcbiAgICAgICAgICAgIDwvc3RpLWRvY3VtZW50LXNlY3VyaXR5LW1lbnU+XHJcblxyXG4gICAgICAgICAgICA8c3RpLWRpZ2l0YWwtc2lnbmF0dXJlLW1lbnUgKm5nSWY9XCJtZW51LnR5cGU9PSd1c2VEaWdpdGFsU2lnbmF0dXJlTWVudSdcIj5cclxuICAgICAgICAgICAgPC9zdGktZGlnaXRhbC1zaWduYXR1cmUtbWVudT5cclxuXHJcbiAgICAgICAgICAgIDxzdGktdmVydGljYWwtbWVudSAqbmdJZj1cIm1lbnUudHlwZT09J3ZlcnRpY2FsTWVudSdcIiBbbWVudV09XCJtZW51XCI+XHJcbiAgICAgICAgICAgIDwvc3RpLXZlcnRpY2FsLW1lbnU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gIGAsXHJcbiAgYW5pbWF0aW9uczogW1xyXG4gICAgdHJpZ2dlcignZXhwYW5kJywgW1xyXG4gICAgICBzdGF0ZSgnaW5pdGlhbERvd24nLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTEwMCUpJyB9KSksXHJcbiAgICAgIHN0YXRlKCdpbml0aWFsVXAnLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMTAwJSknIH0pKSxcclxuICAgICAgc3RhdGUoJ2luaXRpYWxMZWZ0Jywgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC0xMDAlKScgfSkpLFxyXG4gICAgICBzdGF0ZSgnZXhwYW5kZWQnLCBzdHlsZSh7IHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCkgdHJhbnNsYXRlWCgwKScgfSkpLFxyXG4gICAgICB0cmFuc2l0aW9uKCdpbml0aWFsVXAgPT4gZXhwYW5kZWQnLCBbXHJcbiAgICAgICAgYW5pbWF0ZSgnMTUwbXMgZWFzZS1pbi1vdXQnKV0pLFxyXG4gICAgICB0cmFuc2l0aW9uKCdpbml0aWFsRG93biA9PiBleHBhbmRlZCcsIFtcclxuICAgICAgICBhbmltYXRlKCcxNTBtcyBlYXNlLWluLW91dCcpXSksXHJcbiAgICAgIHRyYW5zaXRpb24oJ2luaXRpYWxMZWZ0ID0+IGV4cGFuZGVkJywgW1xyXG4gICAgICAgIGFuaW1hdGUoJzE1MG1zIGVhc2UtaW4tb3V0JyldKSxcclxuICAgICAgdHJhbnNpdGlvbignZXhwYW5kZWQgPT4gaW5pdGlhbExlZnQnLCBbXHJcbiAgICAgICAgYW5pbWF0ZSgnMTUwbXMgZWFzZS1pbi1vdXQnKV0pXHJcbiAgICBdKVxyXG4gIF1cclxufSlcclxuXHJcbmV4cG9ydCBjbGFzcyBNZW51Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgQElucHV0KCkgbWVudTogTWVudTtcclxuXHJcbiAgQFZpZXdDaGlsZCgnbWVudUVsJykgbWVudUVsOiBFbGVtZW50UmVmO1xyXG4gIEBWaWV3Q2hpbGQoJ2lubmVyQ29udGVudCcpIGlubmVyQ29udGVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgc3R5bGUgPSAnZGlzcGxheTogbm9uZSc7XHJcbiAgb3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UsIHB1YmxpYyBjb250cm9sbGVyOiBDb250cm9sbGVyU2VydmljZSwgcHVibGljIGhlbHBlcjogSGVscGVyU2VydmljZSwgcHVibGljIG1lbnVTZXJ2aWNlOiBNZW51U2VydmljZSkgeyB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcclxuICAgIHRoaXMubWVudS5tZW51RWwgPSB0aGlzLm1lbnVFbDtcclxuICAgIHRoaXMubWVudS5pbm5lckNvbnRlbnQgPSB0aGlzLmlubmVyQ29udGVudDtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gIH1cclxuXHJcbiAgc3RhcnRBbmltYXRpb24oZXZlbnQ6IEFuaW1hdGlvbkV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudG9TdGF0ZSA9PT0gJ2V4cGFuZGVkJykge1xyXG4gICAgICB0aGlzLnN0eWxlID0gJ3dpZHRoOiAzNTBweDsgb3ZlcmZsb3c6IGhpZGRlbic7XHJcbiAgICAgIHRoaXMub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRvbmVBbmltYXRpb24oZXZlbnQ6IEFuaW1hdGlvbkV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudG9TdGF0ZSA9PT0gJ2V4cGFuZGVkJykge1xyXG4gICAgICB0aGlzLnN0eWxlID0gJ292ZXJmbG93OiB2aXNpYmxlOyc7XHJcbiAgICAgIHRoaXMub3ZlcmZsb3cgPSB0aGlzLm1lbnUudHlwZS5pbmRleE9mKCdwYXJhbWV0ZXJNZW51JykgPT09IDAgfHwgdGhpcy5tb2RlbC5vcHRpb25zLmlzTW9iaWxlRGV2aWNlID8gJ2F1dG8nIDogJ2hpZGRlbic7XHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnRvU3RhdGUgPT09ICdpbml0aWFsVXAnIHx8IGV2ZW50LnRvU3RhdGUgPT09ICdpbml0aWFsRG93bicpIHtcclxuICAgICAgdGhpcy5zdHlsZSA9ICdkaXNwbGF5OiBub25lJztcclxuICAgICAgdGhpcy5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWVudUNsaWNrKGl0ZW06IE1lbnVJdGVtKSB7XHJcbiAgICB0aGlzLm1lbnVTZXJ2aWNlLmNsb3NlQWxsTWVudXMoKTtcclxuICAgIHRoaXMuY29udHJvbGxlci5hY3Rpb24oeyBuYW1lOiBpdGVtLm5hbWUsIHZhbHVlOiBpdGVtLnZhbHVlIH0pO1xyXG4gIH1cclxuXHJcbiAgbW91c2V1cCgpIHtcclxuICAgIHRoaXMubWVudVNlcnZpY2UubWVudU1vdXNlVXAgPSB0aGlzLm1lbnUudHlwZTtcclxuICB9XHJcblxyXG4gIGdldCB6SW5kZXgoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tZW51LnR5cGUgPT09ICdkYXRlUGlja2VyTWVudScgPyAzNiA6ICh0aGlzLm1lbnUudHlwZSA9PT0gJ3ZlcnRpY2FsTWVudScgPyAzNyA6IDM1KTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==