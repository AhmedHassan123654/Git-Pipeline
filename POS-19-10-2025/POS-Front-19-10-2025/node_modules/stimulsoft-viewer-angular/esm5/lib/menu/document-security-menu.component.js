import { __decorate } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { FormService } from '../forms/form.service';
import { ExportService } from '../services/export.service';
import { CollectionsService } from '../services/collections.service';
var DocumentSecurityMenuComponent = /** @class */ (function () {
    function DocumentSecurityMenuComponent(model, formService, exportService, collections) {
        this.model = model;
        this.formService = formService;
        this.exportService = exportService;
        this.collections = collections;
    }
    DocumentSecurityMenuComponent.prototype.ngOnInit = function () { };
    DocumentSecurityMenuComponent.prototype.getTextBoxType = function () {
        var _a;
        return ((_a = this.formService.form) === null || _a === void 0 ? void 0 : _a.name) === 'exportForm' ? 'password' : '';
    };
    DocumentSecurityMenuComponent.prototype.updateUserAccessPrivileges = function () {
        var privileges = [];
        if (this.allowPrintDocument.isChecked) {
            privileges.push('PrintDocument');
        }
        if (this.allowModifyContents.isChecked) {
            privileges.push('ModifyContents');
        }
        if (this.allowCopyTextAndGraphics.isChecked) {
            privileges.push('CopyTextAndGraphics');
        }
        if (this.allowAddOrModifyTextAnnotations.isChecked) {
            privileges.push('AddOrModifyTextAnnotations');
        }
        this.exportService.exportSettings.UserAccessPrivileges = privileges.join(',');
    };
    DocumentSecurityMenuComponent.prototype.getUserAccessPrivileges = function (name) {
        var _a, _b, _c;
        return ((_a = this.exportService.exportSettings) === null || _a === void 0 ? void 0 : _a.UserAccessPrivileges) === 'All' || ((_c = (_b = this.exportService.exportSettings) === null || _b === void 0 ? void 0 : _b.UserAccessPrivileges) === null || _c === void 0 ? void 0 : _c.indexOf(name)) >= 0;
    };
    DocumentSecurityMenuComponent.ctorParameters = function () { return [
        { type: ModelService },
        { type: FormService },
        { type: ExportService },
        { type: CollectionsService }
    ]; };
    __decorate([
        ViewChild('AllowPrintDocument')
    ], DocumentSecurityMenuComponent.prototype, "allowPrintDocument", void 0);
    __decorate([
        ViewChild('AllowModifyContents')
    ], DocumentSecurityMenuComponent.prototype, "allowModifyContents", void 0);
    __decorate([
        ViewChild('AllowCopyTextAndGraphics')
    ], DocumentSecurityMenuComponent.prototype, "allowCopyTextAndGraphics", void 0);
    __decorate([
        ViewChild('AllowAddOrModifyTextAnnotations')
    ], DocumentSecurityMenuComponent.prototype, "allowAddOrModifyTextAnnotations", void 0);
    DocumentSecurityMenuComponent = __decorate([
        Component({
            selector: 'sti-document-security-menu',
            template: "\n    <table class=\"stiJsViewerClearAllStyles\" cellpadding=\"0\" cellspacing=\"0\" style=\"width: 100%;\">\n                  <tbody>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td style=\"padding: 0px 8px; min-width: 150px;\" [attr.title]=\"model.loc('UserPasswordTooltip')\">\n                        {{model.loc('UserPassword')}}\n                      </td>\n                      <td class=\"stiJsViewerClearAllStyles\">\n                        <sti-text-box\n                           [width]=\"160\"\n                           [tooltip]=\"model.loc('UserPasswordTooltip')\"\n                           [margin]=\"'8px 8px 2px 8px'\"\n                           [type]=\"getTextBoxType()\"\n                           [value]=\"exportService.exportSettings?.PasswordInputUser\"\n                           (onchange)=\"exportService.exportSettings.PasswordInputUser =  $event.value\">\n                        </sti-text-box>\n                      </td>\n                    </tr>\n\n                    <tr class=\"stiJsViewerClearAllStyles\" [attr.title]=\"model.loc('OwnerPasswordTooltip')\">\n                      <td style=\"padding: 0px 8px; min-width: 150px;\">\n                        {{model.loc('OwnerPassword')}}\n                      </td>\n                      <td class=\"stiJsViewerClearAllStyles\">\n                        <sti-text-box\n                           [width]=\"160\"\n                           [tooltip]=\"model.loc('OwnerPasswordTooltip')\"\n                           [margin]=\"'2px 8px 2px 8px'\"\n                           [type]=\"getTextBoxType()\"\n                           [value]=\"exportService.exportSettings?.PasswordInputOwner\"\n                           (onchange)=\"exportService.exportSettings.PasswordInputOwner =  $event.value\">\n                        </sti-text-box>\n                      </td>\n                    </tr>\n\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-check-box #AllowPrintDocument\n                           [captionText]=\"model.loc('AllowPrintDocument')\"\n                           [tooltip]=\"model.loc('AllowPrintDocumentTooltip')\"\n                           [margin]=\"'4px 8px 4px 8px'\"\n                           [isChecked]=\"getUserAccessPrivileges('PrintDocument')\"\n                           (action)=\"updateUserAccessPrivileges()\">\n                        </sti-check-box>\n                      </td>\n                    </tr>\n\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-check-box #AllowModifyContents\n                           [captionText]=\"model.loc('AllowModifyContents')\"\n                           [tooltip]=\"model.loc('AllowModifyContentsTooltip')\"\n                           [margin]=\"'4px 8px 4px 8px'\"\n                           [isChecked]=\"getUserAccessPrivileges('ModifyContents')\"\n                           (action)=\"updateUserAccessPrivileges()\">\n                        </sti-check-box>\n                      </td>\n                    </tr>\n\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-check-box #AllowCopyTextAndGraphics\n                           [captionText]=\"model.loc('AllowCopyTextAndGraphics')\"\n                           [tooltip]=\"model.loc('AllowCopyTextAndGraphicsTooltip')\"\n                           [margin]=\"'4px 8px 4px 8px'\"\n                           [isChecked]=\"getUserAccessPrivileges('CopyTextAndGraphics')\"\n                           (action)=\"updateUserAccessPrivileges()\">\n                        </sti-check-box>\n                      </td>\n                    </tr>\n\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" colspan=\"2\">\n                        <sti-check-box #AllowAddOrModifyTextAnnotations\n                           [captionText]=\"model.loc('AllowAddOrModifyTextAnnotations')\"\n                           [tooltip]=\"model.loc('AllowAddOrModifyTextAnnotationsTooltip')\"\n                           [margin]=\"'4px 8px 4px 8px'\"\n                           [isChecked]=\"getUserAccessPrivileges('AddOrModifyTextAnnotations')\"\n                           (action)=\"updateUserAccessPrivileges()\">\n                        </sti-check-box>\n                      </td>\n                    </tr>\n                    <tr class=\"stiJsViewerClearAllStyles\">\n                      <td class=\"stiJsViewerClearAllStyles\" style=\"padding: 0px 8px; min-width: 150px;\" [attr.title]=\"model.loc('EncryptionKeyLengthTooltip')\">\n                        {{model.loc('EncryptionKeyLength')}}\n                      </td>\n                      <td>\n                        <sti-drop-down-list-for-export-form\n                           [width]=\"160\"\n                           [items]=\"collections.getEncryptionKeyLengthItems()\"\n                           [key]=\"exportService.exportSettings?.KeyLength\"\n                           [margin]=\"'2px 8px 4px 8px'\"\n                           (action)=\"exportService.exportSettings.KeyLength = $event.key\">\n                        </sti-drop-down-list-for-export-form>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n"
        })
    ], DocumentSecurityMenuComponent);
    return DocumentSecurityMenuComponent;
}());
export { DocumentSecurityMenuComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jdW1lbnQtc2VjdXJpdHktbWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL21lbnUvZG9jdW1lbnQtc2VjdXJpdHktbWVudS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBMEdyRTtJQU9FLHVDQUFtQixLQUFtQixFQUFTLFdBQXdCLEVBQVMsYUFBNEIsRUFBUyxXQUErQjtRQUFqSSxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBQVMsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFBUyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFTLGdCQUFXLEdBQVgsV0FBVyxDQUFvQjtJQUFJLENBQUM7SUFFekosZ0RBQVEsR0FBUixjQUFhLENBQUM7SUFFZCxzREFBYyxHQUFkOztRQUNFLE9BQU8sT0FBQSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksMENBQUUsSUFBSSxNQUFLLFlBQVksQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDeEUsQ0FBQztJQUVELGtFQUEwQixHQUExQjtRQUNFLElBQU0sVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUN0QixJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLEVBQUU7WUFBRSxVQUFVLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1NBQUU7UUFDNUUsSUFBSSxJQUFJLENBQUMsbUJBQW1CLENBQUMsU0FBUyxFQUFFO1lBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQUU7UUFDOUUsSUFBSSxJQUFJLENBQUMsd0JBQXdCLENBQUMsU0FBUyxFQUFFO1lBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1NBQUU7UUFDeEYsSUFBSSxJQUFJLENBQUMsK0JBQStCLENBQUMsU0FBUyxFQUFFO1lBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1NBQUU7UUFDdEcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoRixDQUFDO0lBRUQsK0RBQXVCLEdBQXZCLFVBQXdCLElBQVk7O1FBQ2xDLE9BQU8sT0FBQSxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsMENBQUUsb0JBQW9CLE1BQUssS0FBSyxJQUFJLGFBQUEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLDBDQUFFLG9CQUFvQiwwQ0FBRSxPQUFPLENBQUMsSUFBSSxNQUFLLENBQUMsQ0FBQztJQUMxSixDQUFDOztnQkFuQnlCLFlBQVk7Z0JBQXNCLFdBQVc7Z0JBQXdCLGFBQWE7Z0JBQXNCLGtCQUFrQjs7SUFMbkg7UUFBaEMsU0FBUyxDQUFDLG9CQUFvQixDQUFDOzZFQUF1QztJQUNyQztRQUFqQyxTQUFTLENBQUMscUJBQXFCLENBQUM7OEVBQXdDO0lBQ2xDO1FBQXRDLFNBQVMsQ0FBQywwQkFBMEIsQ0FBQzttRkFBNkM7SUFDckM7UUFBN0MsU0FBUyxDQUFDLGlDQUFpQyxDQUFDOzBGQUFvRDtJQUx0Riw2QkFBNkI7UUF2R3pDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSw0QkFBNEI7WUFDdEMsUUFBUSxFQUFFLDJoTEFrR1g7U0FDQSxDQUFDO09BRVcsNkJBQTZCLENBMkJ6QztJQUFELG9DQUFDO0NBQUEsQUEzQkQsSUEyQkM7U0EzQlksNkJBQTZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNb2RlbFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9tb2RlbC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRm9ybVNlcnZpY2UgfSBmcm9tICcuLi9mb3Jtcy9mb3JtLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBFeHBvcnRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZXhwb3J0LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uc1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb2xsZWN0aW9ucy5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ2hlY2tib3hDb21wb25lbnQgfSBmcm9tICcuLi9jb250cm9scy9jaGVja2JveC5jb21wb25lbnQnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdzdGktZG9jdW1lbnQtc2VjdXJpdHktbWVudScsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDx0YWJsZSBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBzdHlsZT1cIndpZHRoOiAxMDAlO1wiPlxyXG4gICAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogMHB4IDhweDsgbWluLXdpZHRoOiAxNTBweDtcIiBbYXR0ci50aXRsZV09XCJtb2RlbC5sb2MoJ1VzZXJQYXNzd29yZFRvb2x0aXAnKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7e21vZGVsLmxvYygnVXNlclBhc3N3b3JkJyl9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS10ZXh0LWJveFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwiMTYwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdVc2VyUGFzc3dvcmRUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIic4cHggOHB4IDJweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3R5cGVdPVwiZ2V0VGV4dEJveFR5cGUoKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzPy5QYXNzd29yZElucHV0VXNlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChvbmNoYW5nZSk9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlBhc3N3b3JkSW5wdXRVc2VyID0gICRldmVudC52YWx1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS10ZXh0LWJveD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIFthdHRyLnRpdGxlXT1cIm1vZGVsLmxvYygnT3duZXJQYXNzd29yZFRvb2x0aXAnKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogMHB4IDhweDsgbWluLXdpZHRoOiAxNTBweDtcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3ttb2RlbC5sb2MoJ093bmVyUGFzc3dvcmQnKX19XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLXRleHQtYm94XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt3aWR0aF09XCIxNjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ093bmVyUGFzc3dvcmRUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicycHggOHB4IDJweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3R5cGVdPVwiZ2V0VGV4dEJveFR5cGUoKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzPy5QYXNzd29yZElucHV0T3duZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAob25jaGFuZ2UpPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5QYXNzd29yZElucHV0T3duZXIgPSAgJGV2ZW50LnZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLXRleHQtYm94PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1jaGVjay1ib3ggI0FsbG93UHJpbnREb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvblRleHRdPVwibW9kZWwubG9jKCdBbGxvd1ByaW50RG9jdW1lbnQnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cIm1vZGVsLmxvYygnQWxsb3dQcmludERvY3VtZW50VG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInNHB4IDhweCA0cHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpc0NoZWNrZWRdPVwiZ2V0VXNlckFjY2Vzc1ByaXZpbGVnZXMoJ1ByaW50RG9jdW1lbnQnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwidXBkYXRlVXNlckFjY2Vzc1ByaXZpbGVnZXMoKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1jaGVjay1ib3g+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLWNoZWNrLWJveCAjQWxsb3dNb2RpZnlDb250ZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvblRleHRdPVwibW9kZWwubG9jKCdBbGxvd01vZGlmeUNvbnRlbnRzJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ0FsbG93TW9kaWZ5Q29udGVudHNUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHggOHB4IDRweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lzQ2hlY2tlZF09XCJnZXRVc2VyQWNjZXNzUHJpdmlsZWdlcygnTW9kaWZ5Q29udGVudHMnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwidXBkYXRlVXNlckFjY2Vzc1ByaXZpbGVnZXMoKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1jaGVjay1ib3g+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLWNoZWNrLWJveCAjQWxsb3dDb3B5VGV4dEFuZEdyYXBoaWNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uVGV4dF09XCJtb2RlbC5sb2MoJ0FsbG93Q29weVRleHRBbmRHcmFwaGljcycpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdBbGxvd0NvcHlUZXh0QW5kR3JhcGhpY3NUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHggOHB4IDRweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lzQ2hlY2tlZF09XCJnZXRVc2VyQWNjZXNzUHJpdmlsZWdlcygnQ29weVRleHRBbmRHcmFwaGljcycpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJ1cGRhdGVVc2VyQWNjZXNzUHJpdmlsZWdlcygpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWNoZWNrLWJveD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNvbHNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktY2hlY2stYm94ICNBbGxvd0FkZE9yTW9kaWZ5VGV4dEFubm90YXRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uVGV4dF09XCJtb2RlbC5sb2MoJ0FsbG93QWRkT3JNb2RpZnlUZXh0QW5ub3RhdGlvbnMnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cIm1vZGVsLmxvYygnQWxsb3dBZGRPck1vZGlmeVRleHRBbm5vdGF0aW9uc1Rvb2x0aXAnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzRweCA4cHggNHB4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbaXNDaGVja2VkXT1cImdldFVzZXJBY2Nlc3NQcml2aWxlZ2VzKCdBZGRPck1vZGlmeVRleHRBbm5vdGF0aW9ucycpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJ1cGRhdGVVc2VyQWNjZXNzUHJpdmlsZWdlcygpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWNoZWNrLWJveD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgc3R5bGU9XCJwYWRkaW5nOiAwcHggOHB4OyBtaW4td2lkdGg6IDE1MHB4O1wiIFthdHRyLnRpdGxlXT1cIm1vZGVsLmxvYygnRW5jcnlwdGlvbktleUxlbmd0aFRvb2x0aXAnKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7e21vZGVsLmxvYygnRW5jcnlwdGlvbktleUxlbmd0aCcpfX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktZHJvcC1kb3duLWxpc3QtZm9yLWV4cG9ydC1mb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt3aWR0aF09XCIxNjBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbaXRlbXNdPVwiY29sbGVjdGlvbnMuZ2V0RW5jcnlwdGlvbktleUxlbmd0aEl0ZW1zKClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBba2V5XT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3M/LktleUxlbmd0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzJweCA4cHggNHB4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuS2V5TGVuZ3RoID0gJGV2ZW50LmtleVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1kcm9wLWRvd24tbGlzdC1mb3ItZXhwb3J0LWZvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG5gXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgRG9jdW1lbnRTZWN1cml0eU1lbnVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBAVmlld0NoaWxkKCdBbGxvd1ByaW50RG9jdW1lbnQnKSBhbGxvd1ByaW50RG9jdW1lbnQ6IENoZWNrYm94Q29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ0FsbG93TW9kaWZ5Q29udGVudHMnKSBhbGxvd01vZGlmeUNvbnRlbnRzOiBDaGVja2JveENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdBbGxvd0NvcHlUZXh0QW5kR3JhcGhpY3MnKSBhbGxvd0NvcHlUZXh0QW5kR3JhcGhpY3M6IENoZWNrYm94Q29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ0FsbG93QWRkT3JNb2RpZnlUZXh0QW5ub3RhdGlvbnMnKSBhbGxvd0FkZE9yTW9kaWZ5VGV4dEFubm90YXRpb25zOiBDaGVja2JveENvbXBvbmVudDtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UsIHB1YmxpYyBmb3JtU2VydmljZTogRm9ybVNlcnZpY2UsIHB1YmxpYyBleHBvcnRTZXJ2aWNlOiBFeHBvcnRTZXJ2aWNlLCBwdWJsaWMgY29sbGVjdGlvbnM6IENvbGxlY3Rpb25zU2VydmljZSkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkgeyB9XHJcblxyXG4gIGdldFRleHRCb3hUeXBlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZm9ybVNlcnZpY2UuZm9ybT8ubmFtZSA9PT0gJ2V4cG9ydEZvcm0nID8gJ3Bhc3N3b3JkJyA6ICcnO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckFjY2Vzc1ByaXZpbGVnZXMoKSB7XHJcbiAgICBjb25zdCBwcml2aWxlZ2VzID0gW107XHJcbiAgICBpZiAodGhpcy5hbGxvd1ByaW50RG9jdW1lbnQuaXNDaGVja2VkKSB7IHByaXZpbGVnZXMucHVzaCgnUHJpbnREb2N1bWVudCcpOyB9XHJcbiAgICBpZiAodGhpcy5hbGxvd01vZGlmeUNvbnRlbnRzLmlzQ2hlY2tlZCkgeyBwcml2aWxlZ2VzLnB1c2goJ01vZGlmeUNvbnRlbnRzJyk7IH1cclxuICAgIGlmICh0aGlzLmFsbG93Q29weVRleHRBbmRHcmFwaGljcy5pc0NoZWNrZWQpIHsgcHJpdmlsZWdlcy5wdXNoKCdDb3B5VGV4dEFuZEdyYXBoaWNzJyk7IH1cclxuICAgIGlmICh0aGlzLmFsbG93QWRkT3JNb2RpZnlUZXh0QW5ub3RhdGlvbnMuaXNDaGVja2VkKSB7IHByaXZpbGVnZXMucHVzaCgnQWRkT3JNb2RpZnlUZXh0QW5ub3RhdGlvbnMnKTsgfVxyXG4gICAgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlVzZXJBY2Nlc3NQcml2aWxlZ2VzID0gcHJpdmlsZWdlcy5qb2luKCcsJyk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyQWNjZXNzUHJpdmlsZWdlcyhuYW1lOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3M/LlVzZXJBY2Nlc3NQcml2aWxlZ2VzID09PSAnQWxsJyB8fCB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3M/LlVzZXJBY2Nlc3NQcml2aWxlZ2VzPy5pbmRleE9mKG5hbWUpID49IDA7XHJcbiAgfVxyXG59XHJcbiJdfQ==