import { __decorate } from "tslib";
import { Component, Input, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { ExportService } from '../services/export.service';
import { HelperService } from '../services/helper.service';
import { FormService } from './form.service';
import { MenuService } from '../menu/menu.service';
import { CollectionsService } from '../services/collections.service';
import { ControllerService } from '../services/controller.service';
let ExportFormComponent = class ExportFormComponent {
    constructor(model, exportService, helper, formService, menuService, collections, controller) {
        this.model = model;
        this.exportService = exportService;
        this.helper = helper;
        this.formService = formService;
        this.menuService = menuService;
        this.collections = collections;
        this.controller = controller;
        this.PROPERTY_ALIAS = {
            ImageFormatForHtml: 'ImageFormat',
            EncodingTextOrCsvFile: 'Encoding',
            ExportModeRtf: 'ExportMode',
            EncodingDifFile: 'Encoding',
            EncodingDbfFile: 'CodePage'
        };
        this.formVisible = false;
        this.disabledComponents = {};
    }
    ngOnChanges(changes) {
        var _a, _b;
        if (this.baseForm && ((_b = (_a = this.formService) === null || _a === void 0 ? void 0 : _a.form) === null || _b === void 0 ? void 0 : _b.name) === this.baseForm.name) {
            setTimeout(() => this.updateDisabledComponents());
        }
    }
    ngOnInit() { }
    action() {
        this.formService.closeForm(this.baseForm.name);
        if (this.model.options.exports.storeExportSettings) {
            this.helper.setCookie('StimulsoftWebViewerExportSettings' + this.exportService.getCommonExportFormat(), JSON.stringify(this.exportService.exportSettings));
        }
        this.exportService.postExport();
    }
    updateDisabledComponents() {
        var _a;
        ['StandardPdfFonts', 'EmbeddedFonts', 'UseUnicode'].forEach(n => this.disabledComponents[n] = (this.exportService.exportSettings.PdfACompliance === true));
        this.disabledComponents.ImageQuality = this.exportService.exportSettings.ImageCompressionMethod && this.exportService.exportSettings.ImageCompressionMethod !== 'Jpeg';
        this.disabledComponents.ExportObjectFormatting = this.exportService.exportSettings.DataExportMode === 'AllBands';
        this.disabledComponents.UseOnePageHeaderAndFooter = this.exportService.exportSettings.DataExportMode != 'AllBands';
        this.disabledComponents.EncodingDifFile = this.exportService.exportSettings.UseDefaultSystemEncoding;
        this.disabledComponents.TiffCompressionScheme = this.exportService.exportSettings.ImageType !== 'Tiff';
        this.disabledComponents.UseDigitalSignature = !this.exportService.exportSettings.UseDigitalSignature || !(((_a = this.model.pdfSecurityCertificates) === null || _a === void 0 ? void 0 : _a.length) > 0);
        this.disabledComponents.RemoveEmptySpaceAtBottom = this.exportService.exportSettings.UsePageHeadersAndFooters;
        if (this.exportService.exportSettings.ImageType != null) {
            const ifComponent = this.exportService.exportFormSettings.components.find(c => c.name === 'ImageFormat');
            if (ifComponent != null) {
                ifComponent.items = this.collections.getImageFormatItems(this.exportService.exportSettings.ImageType === 'Emf');
            }
        }
        this.disabledComponents.DitheringType = this.exportService.exportSettings.ImageFormat !== 'Monochrome';
        if (this.saveReportMdc) {
            this.saveReportMdc.click();
        }
        if (this.pagesRangeAll && !this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled) {
            this.pagesRangeAll.click();
        }
        if (this.pageRangeCurrentPage && this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled) {
            this.pageRangeCurrentPage.click();
        }
        if (this.exportService.exportSettings.CompressToArchive === true) {
            this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled = false;
        }
        if (this.exportService.exportSettings.CompressToArchive === false) {
            this.exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled = true;
        }
    }
    componentAction(comp, value) {
        let property = this.PROPERTY_ALIAS[comp.name] || comp.name;
        switch (property) {
            case 'EmbeddedFonts':
            case 'UseUnicode':
                if (value) {
                    this.exportService.exportSettings.StandardPdfFonts = false;
                }
                break;
            case 'StandardPdfFonts':
                if (value) {
                    this.exportService.exportSettings.EmbeddedFonts = false;
                    this.exportService.exportSettings.UseUnicode = false;
                }
                break;
            case 'ImageType':
                this.exportService.export('Image' + value, true);
                break;
            case 'DataType':
            case 'HtmlType':
                this.exportService.export(value, true);
                break;
            case 'ExcelType':
                const exportFormat = value === 'ExcelBinary' ? 'Excel' : value;
                this.exportService.export(exportFormat, true);
                break;
            case 'UseDigitalSignature':
                if (!(value === true || value === false)) {
                    property = 'CertificateThumbprint';
                }
                if (value === true && this.collections.getPdfSecurityCertificatesItems().length == 0) {
                    value = false;
                    this.controller.showError('Warning', 'Certificate Not Found!');
                }
                break;
            case 'UsePageHeadersAndFooters':
                if (value === true) {
                    this.exportService.exportSettings.RemoveEmptySpaceAtBottom = true;
                }
                break;
        }
        this.exportService.exportSettings[property] = value;
        this.updateDisabledComponents();
    }
    getValue(comp, component) {
        const property = this.PROPERTY_ALIAS[comp.name] || comp.name;
        switch (property) {
            case 'Zoom2':
                return this.exportService.exportSettings[property].toString();
            case 'UseDigitalSignature':
                if (component == 'dropDownList') {
                    return this.exportService.exportSettings['CertificateThumbprint'];
                }
            default:
                return this.exportService.exportSettings[property];
        }
    }
    changeVisibility(state) {
        var _a, _b;
        this.formVisible = state === 'visible';
        if (state === 'hidden' && ((_b = (_a = this.exportFormSettings) === null || _a === void 0 ? void 0 : _a.groups) === null || _b === void 0 ? void 0 : _b.savingReportGroup)) {
            this.helper.setCookie('StimulsoftWebViewerExportSettingsOpeningGroups', JSON.stringify({
                SavingReportGroup: this.exportFormSettings.groups.savingReportGroup.opened,
                PageRangeGroup: this.exportFormSettings.groups.pageRangeGroup.opened,
                SettingsGroup: this.exportFormSettings.groups.settingsGroup.opened
            }));
        }
        if (state === 'visible') {
            this.updateDisabledComponents();
        }
    }
    showMenu(comp, button) {
        let menuName = 'documentSecurityMenu';
        if (comp.name === 'DocumentSecurityButton') {
            this.menuService.addMenu({
                type: menuName, name: menuName, items: [], parent: button.button,
                itemStyleName: 'stiJsViewerMenuStandartItem', menuStyleName: 'stiJsViewerDropdownMenu'
            });
        }
        else {
            menuName = this.menuService.VERTICAL_MENU_NAME;
            this.menuService.addMenu({
                type: 'buttonMenu', name: menuName, items: this.collections.getPdfSecurityCertificatesItems(), parent: button.button,
                itemStyleName: 'stiJsViewerMenuStandartItem', menuStyleName: 'stiJsViewerDropdownMenu'
            });
        }
        setTimeout(() => {
            this.menuService.showMenu(menuName);
        });
    }
    getTextBoxType(name) {
        if (name === 'SaveReportPassword' || name === 'PasswordInputUser' || name === 'PasswordInputOwner') {
            return this.formVisible ? 'password' : '';
        }
        return null;
    }
};
ExportFormComponent.ctorParameters = () => [
    { type: ModelService },
    { type: ExportService },
    { type: HelperService },
    { type: FormService },
    { type: MenuService },
    { type: CollectionsService },
    { type: ControllerService }
];
__decorate([
    ViewChild('baseForm')
], ExportFormComponent.prototype, "baseForm", void 0);
__decorate([
    ViewChild('saveReportMdc')
], ExportFormComponent.prototype, "saveReportMdc", void 0);
__decorate([
    ViewChild('pagesRangeAll')
], ExportFormComponent.prototype, "pagesRangeAll", void 0);
__decorate([
    ViewChild('pageRangeCurrentPage')
], ExportFormComponent.prototype, "pageRangeCurrentPage", void 0);
__decorate([
    Input()
], ExportFormComponent.prototype, "exportFormSettings", void 0);
ExportFormComponent = __decorate([
    Component({
        selector: 'sti-export-form',
        template: `
    <sti-base-form #baseForm [fontFamily]="model.options.toolbar.fontFamily"
    [color]="model.options.toolbar.fontColor"
    [fontSize]="'12px'"
    [containerPadding]="'3px'"
    [name]="'exportForm'"
    [caption]="model.loc('ExportFormTitle')"
    [defaultTop]="150"
    (changeVisibility)="changeVisibility($event)"
    (action)="action()">
    <table class="stiJsViewerClearAllStyles" cellpadding="0" cellspacing="0" style="width: 100%;">
      <tbody>
          <tr *ngIf="exportFormSettings?.groups.savingReportGroup.visible" class="stiJsViewerClearAllStyles">
            <td class="stiJsViewerClearAllStyles" colspan="2">
              <sti-group-panel [caption]="model.loc('SavingReport')"
               [width]="390"
               [margin]="'4px'"
               [innerPadding]="'4px 0 4px 0'"
               [opened]="exportFormSettings.groups.savingReportGroup.opened"
               (action)="exportFormSettings.groups.savingReportGroup.opened=$event">
                <table class="stiJsViewerClearAllStyles" cellpadding="0" cellspacing="0" style="width: 100%;">
                  <tbody>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-radio-button #saveReportMdc
                           [name]="baseForm.name + 'SaveReportMdc'"
                           [groupName]="baseForm.name + 'SavingReportGroup'"
                           [caption]="model.loc('SaveReportMdc')"
                           [margin]="'6px 8px 3px 8px'"
                           [checked]="true"
                           (action)="exportService.exportSettings.Format = 'Mdc'">
                        </sti-radio-button>
                      </td>
                    </tr>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-radio-button
                           [name]="baseForm.name + 'SaveReportMdz'"
                           [groupName]="baseForm.name + 'SavingReportGroup'"
                           [caption]="model.loc('SaveReportMdz')"
                           [margin]="'3px 8px 3px 8px'"
                           (action)="exportService.exportSettings.Format = 'Mdz'">
                        </sti-radio-button>
                      </td>
                    </tr>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-radio-button
                           [name]="baseForm.name + 'SaveReportMdx'"
                           [groupName]="baseForm.name + 'SavingReportGroup'"
                           [caption]="model.loc('SaveReportMdx')"
                           [margin]="'3px 8px 0px 8px'"
                           (action)="exportService.exportSettings.Format = 'Mdx'">
                        </sti-radio-button>
                      </td>
                    </tr>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" style="padding: 0px 8px; min-width: 150px;" [attr.title]="model.loc('PasswordSaveReportTooltip')">
                      {{model.loc('PasswordSaveReport')}}
                      </td>
                      <td>
                        <sti-text-box
                           [width]="140"
                           [tooltip]="model.loc('PasswordSaveReportTooltip')"
                           [margin]="'4px 8px 0px 8px'"
                           [type]="getTextBoxType('SaveReportPassword')"
                           [enabled]="exportService.exportSettings.Format == 'Mdx'"
                           (onchange)="exportService.exportSettings.Password = $event.value">
                        </sti-text-box>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </sti-group-panel>
            </td>
          </tr>

          <tr *ngIf="exportFormSettings?.groups.pageRangeGroup.visible" class="stiJsViewerClearAllStyles">
            <td class="stiJsViewerClearAllStyles" colspan="2">
              <sti-group-panel [caption]="model.loc('PagesRange')"
               [width]="390"
               [margin]="'4px'"
               [innerPadding]="'4px 0 4px 0'"
               [opened]="exportFormSettings.groups.pageRangeGroup.opened"
               (action)="exportFormSettings.groups.pageRangeGroup.opened=$event">
                <table class="stiJsViewerClearAllStyles" cellpadding="0" cellspacing="0" style="width: 100%;">
                  <tbody>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-radio-button #pagesRangeAll
                           [name]="baseForm.name + 'PagesRangeAll'"
                           [groupName]="baseForm.name + 'PageRangeGroup'"
                           [caption]="model.loc('PagesRangeAll')"
                           [tooltip]="model.loc('PagesRangeAllTooltip')"
                           [margin]="'6px 8px 6px 8px'"
                           [checked]="!exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled"
                           [enabled]="!exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled"
                           (action)="exportService.exportSettings.PageRange = 'All'">
                        </sti-radio-button>
                      </td>
                    </tr>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-radio-button #pageRangeCurrentPage
                           [name]="baseForm.name + 'PageRangeCurrentPage'"
                           [groupName]="baseForm.name + 'PageRangeGroup'"
                           [caption]="model.loc('PagesRangeCurrentPage')"
                           [tooltip]="model.loc('PagesRangeCurrentPageTooltip')"
                           [margin]="'0px 8px 4px 8px'"
                           [checked]="exportFormSettings.groups.pageRangeGroup.pageRangeAllIsDisabled"
                           (action)="exportService.exportSettings.PageRange = (model.reportParams.pageNumber + 1).toString()">
                        </sti-radio-button>
                      </td>
                    </tr>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-radio-button
                           [name]="baseForm.name + 'PageRangePages'"
                           [groupName]="baseForm.name + 'PageRangeGroup'"
                           [caption]="model.loc('PagesRangePages')"
                           [tooltip]="model.loc('PagesRangePagesTooltip')"
                           [margin]="'0px 8px 0px 8px'"
                           [paddingLeftLastCell]="'60px'"
                           (action)="exportService.exportSettings.PageRange = pagesRange.element.nativeElement.value">
                              <sti-text-box #pagesRange
                                [width]="130"
                                [tooltip]="model.loc('PagesRangePagesTooltip')"
                                [margin]="'0px 0px 0px 30px'"
                                (onchange)="exportService.exportSettings.PageRange = $event.value"
                                (onblur)="exportService.exportSettings.PageRange = $event.value">
                              </sti-text-box>
                        </sti-radio-button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </sti-group-panel>
            </td>
          </tr>

        <tr *ngIf="exportFormSettings?.groups.settingsGroup.visible"class="stiJsViewerClearAllStyles">
            <td class="stiJsViewerClearAllStyles" colspan="2">
              <sti-group-panel [caption]="model.loc('SettingsGroup')"
                [opened]="exportFormSettings.groups.settingsGroup.opened"
                [width]="390"
                [margin]="'4px'"
                [innerPadding]="'4px 0 4px 0'"
                (action)="exportFormSettings.groups.settingsGroup.opened=$event">
                <table class="stiJsViewerClearAllStyles" cellpadding="0" cellspacing="0" style="width: 100%;">
                  <tbody>
                    <tr *ngFor="let comp of exportFormSettings.components">
                      <td *ngIf="comp.label != null" style="padding: 0px 8px; min-width: 150px;" [attr.title]="comp.tooltip">
                        {{comp.label}}
                      </td>

                      <td *ngIf="comp.name == 'UseDigitalSignature'">
                        <sti-check-box
                           [tooltip]="comp.tooltip"
                           [margin]="comp.margin"
                           [captionText]="comp.caption"
                           [isChecked]="getValue(comp)"
                           (action)="componentAction(comp, $event)">
                        </sti-check-box>
                      </td>

                      <td [attr.colSpan]="comp.label != null || comp.name == 'DocumentSecurityButton' || comp.name == 'UseDigitalSignature' ? 1 : 2">
                        <sti-drop-down-list-for-export-form *ngIf="comp.type == 'DropDownListForExportForm'"
                           [width]="comp.width"
                           [items]="comp.items"
                           [key]="getValue(comp, 'dropDownList')"
                           [margin]="comp.margin"
                           [verticalAlign]="comp.name == 'ImageQuality' || comp.name == 'ImageResolution' ? 'middle' : null"
                           [styleDisplay]="comp.name == 'ImageQuality' || comp.name == 'ImageResolution' ? 'inline-block' : null"
                           [enabled]="!disabledComponents[comp.name]"
                           (action)="componentAction(comp, $event.key)">
                        </sti-drop-down-list-for-export-form>

                        <div *ngIf="comp.name == 'ImageQuality' || comp.name == 'ImageResolution'"
                           [style.display]="'inline-block'">
                          {{comp.name == 'ImageQuality' ? '%' : 'dpi'}}
                        </div>

                        <sti-text-box *ngIf="comp.type == 'TextBox'"
                           [width]="comp.width"
                           [tooltip]="comp.tooltip"
                           [margin]="comp.margin"
                           [type]="getTextBoxType(comp.name)"
                           [enabled]="!comp.disabled"
                           [value]="getValue(comp)"
                           [enabled]="!disabledComponents[comp.name]"
                           (onchange)="componentAction(comp, $event.value)">
                        </sti-text-box>

                        <sti-check-box *ngIf="comp.type == 'CheckBox' || comp.type == 'DigitalSignature'"
                           [tooltip]="comp.tooltip"
                           [margin]="comp.margin"
                           [captionText]="comp.caption"
                           [isChecked]="getValue(comp)"
                           [isEnabled]="!disabledComponents[comp.name]"
                           (action)="componentAction(comp, $event)">
                        </sti-check-box>

                      </td>

                      <td *ngIf="comp.name == 'DocumentSecurityButton'">
                        <sti-button #button
                           [width]="comp.width"
                           [arrow]="'Down'"
                           [minWidth]="'163px'"
                           [captionAlign]="'center'"
                           [display]="'inline-block'"
                           [styleName]="'stiJsViewerFormButton'"
                           [margin]="'2px 8px'"
                           [innerTableWidth]="'100%'"
                           [captionWidth]="'100%'"
                           [caption]="comp.name == 'DocumentSecurityButton' ? comp.caption : ''"
                           [enabled]="!disabledComponents[comp.name + 'Button']"
                           (action)="showMenu(comp, button)">
                        </sti-button>
                      </td>
                    </tr>
                  </tbody>
                </table>

              </sti-group-panel>
            </td>
        </tr>

        <tr *ngIf="model.options.exports.showOpenAfterExport && exportFormSettings?.openAfterExport && !exportService.sendMail" class="stiJsViewerClearAllStyles">
            <td class="stiJsViewerClearAllStyles" colspan="2">
                <sti-check-box [captionText]="model.loc('OpenAfterExport')"
                  [tooltip]="model.loc('OpenAfterExportTooltip')"
                  [margin]="'4px 8px 4px 8px'"
                  [isChecked]="exportService.exportSettings.OpenAfterExport"
                  (action)="exportService.exportSettings.OpenAfterExport = $event">
                </sti-check-box>
            </td>
        </tr>
      </tbody>
    </table>

    </sti-base-form>
  `
    })
], ExportFormComponent);
export { ExportFormComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0LWZvcm0uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vc3RpbXVsc29mdC12aWV3ZXItYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9mb3Jtcy9leHBvcnQtZm9ybS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsS0FBSyxFQUFhLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFekQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRTNELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRW5ELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBRXJFLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBeVBuRSxJQUFhLG1CQUFtQixHQUFoQyxNQUFhLG1CQUFtQjtJQW9COUIsWUFBbUIsS0FBbUIsRUFBUyxhQUE0QixFQUFTLE1BQXFCLEVBQVMsV0FBd0IsRUFDakksV0FBd0IsRUFBUyxXQUErQixFQUFTLFVBQTZCO1FBRDVGLFVBQUssR0FBTCxLQUFLLENBQWM7UUFBUyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFTLFdBQU0sR0FBTixNQUFNLENBQWU7UUFBUyxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUNqSSxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQUFTLGdCQUFXLEdBQVgsV0FBVyxDQUFvQjtRQUFTLGVBQVUsR0FBVixVQUFVLENBQW1CO1FBbkJ2RyxtQkFBYyxHQUFHO1lBQ3ZCLGtCQUFrQixFQUFFLGFBQWE7WUFDakMscUJBQXFCLEVBQUUsVUFB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Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWtQVDtLQUNGLENBQUM7R0FFVyxtQkFBbUIsQ0FpTS9CO1NBak1ZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT25DaGFuZ2VzLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbW9kZWwuc2VydmljZSc7XHJcbmltcG9ydCB7IEV4cG9ydEZvcm1TZXR0aW5ncywgRXhwb3J0Q29tcG9uZW50LCBFeHBvcnRHcm91cCB9IGZyb20gJy4uL3NlcnZpY2VzL29iamVjdHMnO1xyXG5pbXBvcnQgeyBFeHBvcnRTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZXhwb3J0LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBCYXNlRm9ybUNvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1mb3JtLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IEhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi9mb3JtLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBNZW51U2VydmljZSB9IGZyb20gJy4uL21lbnUvbWVudS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vY29udHJvbHMvYnV0dG9uLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IENvbGxlY3Rpb25zU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvbGxlY3Rpb25zLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBSYWRpb0J1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4uL2NvbnRyb2xzL3JhZGlvLWJ1dHRvbi5jb21wb25lbnRzJztcclxuaW1wb3J0IHsgQ29udHJvbGxlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb250cm9sbGVyLnNlcnZpY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdzdGktZXhwb3J0LWZvcm0nLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8c3RpLWJhc2UtZm9ybSAjYmFzZUZvcm0gW2ZvbnRGYW1pbHldPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRGYW1pbHlcIlxyXG4gICAgW2NvbG9yXT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5mb250Q29sb3JcIlxyXG4gICAgW2ZvbnRTaXplXT1cIicxMnB4J1wiXHJcbiAgICBbY29udGFpbmVyUGFkZGluZ109XCInM3B4J1wiXHJcbiAgICBbbmFtZV09XCInZXhwb3J0Rm9ybSdcIlxyXG4gICAgW2NhcHRpb25dPVwibW9kZWwubG9jKCdFeHBvcnRGb3JtVGl0bGUnKVwiXHJcbiAgICBbZGVmYXVsdFRvcF09XCIxNTBcIlxyXG4gICAgKGNoYW5nZVZpc2liaWxpdHkpPVwiY2hhbmdlVmlzaWJpbGl0eSgkZXZlbnQpXCJcclxuICAgIChhY3Rpb24pPVwiYWN0aW9uKClcIj5cclxuICAgIDx0YWJsZSBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBzdHlsZT1cIndpZHRoOiAxMDAlO1wiPlxyXG4gICAgICA8dGJvZHk+XHJcbiAgICAgICAgICA8dHIgKm5nSWY9XCJleHBvcnRGb3JtU2V0dGluZ3M/Lmdyb3Vwcy5zYXZpbmdSZXBvcnRHcm91cC52aXNpYmxlXCIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgIDxzdGktZ3JvdXAtcGFuZWwgW2NhcHRpb25dPVwibW9kZWwubG9jKCdTYXZpbmdSZXBvcnQnKVwiXHJcbiAgICAgICAgICAgICAgIFt3aWR0aF09XCIzOTBcIlxyXG4gICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHgnXCJcclxuICAgICAgICAgICAgICAgW2lubmVyUGFkZGluZ109XCInNHB4IDAgNHB4IDAnXCJcclxuICAgICAgICAgICAgICAgW29wZW5lZF09XCJleHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnNhdmluZ1JlcG9ydEdyb3VwLm9wZW5lZFwiXHJcbiAgICAgICAgICAgICAgIChhY3Rpb24pPVwiZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5zYXZpbmdSZXBvcnRHcm91cC5vcGVuZWQ9JGV2ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIj5cclxuICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLXJhZGlvLWJ1dHRvbiAjc2F2ZVJlcG9ydE1kY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1NhdmVSZXBvcnRNZGMnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwTmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1NhdmluZ1JlcG9ydEdyb3VwJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnU2F2ZVJlcG9ydE1kYycpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInNnB4IDhweCAzcHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjaGVja2VkXT1cInRydWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuRm9ybWF0ID0gJ01kYydcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktcmFkaW8tYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLXJhZGlvLWJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1NhdmVSZXBvcnRNZHonXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwTmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1NhdmluZ1JlcG9ydEdyb3VwJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnU2F2ZVJlcG9ydE1keicpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInM3B4IDhweCAzcHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5Gb3JtYXQgPSAnTWR6J1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1yYWRpby1idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNvbHNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktcmFkaW8tYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuYW1lXT1cImJhc2VGb3JtLm5hbWUgKyAnU2F2ZVJlcG9ydE1keCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbZ3JvdXBOYW1lXT1cImJhc2VGb3JtLm5hbWUgKyAnU2F2aW5nUmVwb3J0R3JvdXAnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25dPVwibW9kZWwubG9jKCdTYXZlUmVwb3J0TWR4JylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIiczcHggOHB4IDBweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkZvcm1hdCA9ICdNZHgnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLXJhZGlvLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgc3R5bGU9XCJwYWRkaW5nOiAwcHggOHB4OyBtaW4td2lkdGg6IDE1MHB4O1wiIFthdHRyLnRpdGxlXT1cIm1vZGVsLmxvYygnUGFzc3dvcmRTYXZlUmVwb3J0VG9vbHRpcCcpXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7e21vZGVsLmxvYygnUGFzc3dvcmRTYXZlUmVwb3J0Jyl9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS10ZXh0LWJveFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwiMTQwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdQYXNzd29yZFNhdmVSZXBvcnRUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHggOHB4IDBweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3R5cGVdPVwiZ2V0VGV4dEJveFR5cGUoJ1NhdmVSZXBvcnRQYXNzd29yZCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2VuYWJsZWRdPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5Gb3JtYXQgPT0gJ01keCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAob25jaGFuZ2UpPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5QYXNzd29yZCA9ICRldmVudC52YWx1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS10ZXh0LWJveD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgPC9zdGktZ3JvdXAtcGFuZWw+XHJcbiAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG5cclxuICAgICAgICAgIDx0ciAqbmdJZj1cImV4cG9ydEZvcm1TZXR0aW5ncz8uZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLnZpc2libGVcIiBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNvbHNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgPHN0aS1ncm91cC1wYW5lbCBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ1BhZ2VzUmFuZ2UnKVwiXHJcbiAgICAgICAgICAgICAgIFt3aWR0aF09XCIzOTBcIlxyXG4gICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHgnXCJcclxuICAgICAgICAgICAgICAgW2lubmVyUGFkZGluZ109XCInNHB4IDAgNHB4IDAnXCJcclxuICAgICAgICAgICAgICAgW29wZW5lZF09XCJleHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLm9wZW5lZFwiXHJcbiAgICAgICAgICAgICAgIChhY3Rpb24pPVwiZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5vcGVuZWQ9JGV2ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIj5cclxuICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLXJhZGlvLWJ1dHRvbiAjcGFnZXNSYW5nZUFsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1BhZ2VzUmFuZ2VBbGwnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwTmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1BhZ2VSYW5nZUdyb3VwJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnUGFnZXNSYW5nZUFsbCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdQYWdlc1JhbmdlQWxsVG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInNnB4IDhweCA2cHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjaGVja2VkXT1cIiFleHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLnBhZ2VSYW5nZUFsbElzRGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbZW5hYmxlZF09XCIhZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5wYWdlUmFuZ2VBbGxJc0Rpc2FibGVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlBhZ2VSYW5nZSA9ICdBbGwnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLXJhZGlvLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1yYWRpby1idXR0b24gI3BhZ2VSYW5nZUN1cnJlbnRQYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuYW1lXT1cImJhc2VGb3JtLm5hbWUgKyAnUGFnZVJhbmdlQ3VycmVudFBhZ2UnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwTmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1BhZ2VSYW5nZUdyb3VwJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnUGFnZXNSYW5nZUN1cnJlbnRQYWdlJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ1BhZ2VzUmFuZ2VDdXJyZW50UGFnZVRvb2x0aXAnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzBweCA4cHggNHB4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2hlY2tlZF09XCJleHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLnBhZ2VSYW5nZUFsbElzRGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUGFnZVJhbmdlID0gKG1vZGVsLnJlcG9ydFBhcmFtcy5wYWdlTnVtYmVyICsgMSkudG9TdHJpbmcoKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1yYWRpby1idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNvbHNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktcmFkaW8tYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtuYW1lXT1cImJhc2VGb3JtLm5hbWUgKyAnUGFnZVJhbmdlUGFnZXMnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2dyb3VwTmFtZV09XCJiYXNlRm9ybS5uYW1lICsgJ1BhZ2VSYW5nZUdyb3VwJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uXT1cIm1vZGVsLmxvYygnUGFnZXNSYW5nZVBhZ2VzJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ1BhZ2VzUmFuZ2VQYWdlc1Rvb2x0aXAnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzBweCA4cHggMHB4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbcGFkZGluZ0xlZnRMYXN0Q2VsbF09XCInNjBweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUGFnZVJhbmdlID0gcGFnZXNSYW5nZS5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQudmFsdWVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS10ZXh0LWJveCAjcGFnZXNSYW5nZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt3aWR0aF09XCIxMzBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cIm1vZGVsLmxvYygnUGFnZXNSYW5nZVBhZ2VzVG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicwcHggMHB4IDBweCAzMHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uY2hhbmdlKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUGFnZVJhbmdlID0gJGV2ZW50LnZhbHVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAob25ibHVyKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUGFnZVJhbmdlID0gJGV2ZW50LnZhbHVlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLXRleHQtYm94PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1yYWRpby1idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgICAgICAgIDwvc3RpLWdyb3VwLXBhbmVsPlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgPC90cj5cclxuXHJcbiAgICAgICAgPHRyICpuZ0lmPVwiZXhwb3J0Rm9ybVNldHRpbmdzPy5ncm91cHMuc2V0dGluZ3NHcm91cC52aXNpYmxlXCJjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNvbHNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgPHN0aS1ncm91cC1wYW5lbCBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ1NldHRpbmdzR3JvdXAnKVwiXHJcbiAgICAgICAgICAgICAgICBbb3BlbmVkXT1cImV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMuc2V0dGluZ3NHcm91cC5vcGVuZWRcIlxyXG4gICAgICAgICAgICAgICAgW3dpZHRoXT1cIjM5MFwiXHJcbiAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHgnXCJcclxuICAgICAgICAgICAgICAgIFtpbm5lclBhZGRpbmddPVwiJzRweCAwIDRweCAwJ1wiXHJcbiAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMuc2V0dGluZ3NHcm91cC5vcGVuZWQ9JGV2ZW50XCI+XHJcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIj5cclxuICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciAqbmdGb3I9XCJsZXQgY29tcCBvZiBleHBvcnRGb3JtU2V0dGluZ3MuY29tcG9uZW50c1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkICpuZ0lmPVwiY29tcC5sYWJlbCAhPSBudWxsXCIgc3R5bGU9XCJwYWRkaW5nOiAwcHggOHB4OyBtaW4td2lkdGg6IDE1MHB4O1wiIFthdHRyLnRpdGxlXT1cImNvbXAudG9vbHRpcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7e2NvbXAubGFiZWx9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgKm5nSWY9XCJjb21wLm5hbWUgPT0gJ1VzZURpZ2l0YWxTaWduYXR1cmUnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktY2hlY2stYm94XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cImNvbXAudG9vbHRpcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiY29tcC5tYXJnaW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvblRleHRdPVwiY29tcC5jYXB0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lzQ2hlY2tlZF09XCJnZXRWYWx1ZShjb21wKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwiY29tcG9uZW50QWN0aW9uKGNvbXAsICRldmVudClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktY2hlY2stYm94PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgW2F0dHIuY29sU3Bhbl09XCJjb21wLmxhYmVsICE9IG51bGwgfHwgY29tcC5uYW1lID09ICdEb2N1bWVudFNlY3VyaXR5QnV0dG9uJyB8fCBjb21wLm5hbWUgPT0gJ1VzZURpZ2l0YWxTaWduYXR1cmUnID8gMSA6IDJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1kcm9wLWRvd24tbGlzdC1mb3ItZXhwb3J0LWZvcm0gKm5nSWY9XCJjb21wLnR5cGUgPT0gJ0Ryb3BEb3duTGlzdEZvckV4cG9ydEZvcm0nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3dpZHRoXT1cImNvbXAud2lkdGhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbaXRlbXNdPVwiY29tcC5pdGVtc1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtrZXldPVwiZ2V0VmFsdWUoY29tcCwgJ2Ryb3BEb3duTGlzdCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCJjb21wLm1hcmdpblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2ZXJ0aWNhbEFsaWduXT1cImNvbXAubmFtZSA9PSAnSW1hZ2VRdWFsaXR5JyB8fCBjb21wLm5hbWUgPT0gJ0ltYWdlUmVzb2x1dGlvbicgPyAnbWlkZGxlJyA6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbc3R5bGVEaXNwbGF5XT1cImNvbXAubmFtZSA9PSAnSW1hZ2VRdWFsaXR5JyB8fCBjb21wLm5hbWUgPT0gJ0ltYWdlUmVzb2x1dGlvbicgPyAnaW5saW5lLWJsb2NrJyA6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbZW5hYmxlZF09XCIhZGlzYWJsZWRDb21wb25lbnRzW2NvbXAubmFtZV1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImNvbXBvbmVudEFjdGlvbihjb21wLCAkZXZlbnQua2V5KVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1kcm9wLWRvd24tbGlzdC1mb3ItZXhwb3J0LWZvcm0+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwiY29tcC5uYW1lID09ICdJbWFnZVF1YWxpdHknIHx8IGNvbXAubmFtZSA9PSAnSW1hZ2VSZXNvbHV0aW9uJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzdHlsZS5kaXNwbGF5XT1cIidpbmxpbmUtYmxvY2snXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge3tjb21wLm5hbWUgPT0gJ0ltYWdlUXVhbGl0eScgPyAnJScgOiAnZHBpJ319XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS10ZXh0LWJveCAqbmdJZj1cImNvbXAudHlwZSA9PSAnVGV4dEJveCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwiY29tcC53aWR0aFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cImNvbXAudG9vbHRpcFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiY29tcC5tYXJnaW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdHlwZV09XCJnZXRUZXh0Qm94VHlwZShjb21wLm5hbWUpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2VuYWJsZWRdPVwiIWNvbXAuZGlzYWJsZWRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVdPVwiZ2V0VmFsdWUoY29tcClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbZW5hYmxlZF09XCIhZGlzYWJsZWRDb21wb25lbnRzW2NvbXAubmFtZV1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAob25jaGFuZ2UpPVwiY29tcG9uZW50QWN0aW9uKGNvbXAsICRldmVudC52YWx1ZSlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktdGV4dC1ib3g+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLWNoZWNrLWJveCAqbmdJZj1cImNvbXAudHlwZSA9PSAnQ2hlY2tCb3gnIHx8IGNvbXAudHlwZSA9PSAnRGlnaXRhbFNpZ25hdHVyZSdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJjb21wLnRvb2x0aXBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cImNvbXAubWFyZ2luXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25UZXh0XT1cImNvbXAuY2FwdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpc0NoZWNrZWRdPVwiZ2V0VmFsdWUoY29tcClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbaXNFbmFibGVkXT1cIiFkaXNhYmxlZENvbXBvbmVudHNbY29tcC5uYW1lXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwiY29tcG9uZW50QWN0aW9uKGNvbXAsICRldmVudClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktY2hlY2stYm94PlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkICpuZ0lmPVwiY29tcC5uYW1lID09ICdEb2N1bWVudFNlY3VyaXR5QnV0dG9uJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLWJ1dHRvbiAjYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt3aWR0aF09XCJjb21wLndpZHRoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Fycm93XT1cIidEb3duJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttaW5XaWR0aF09XCInMTYzcHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25BbGlnbl09XCInY2VudGVyJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkaXNwbGF5XT1cIidpbmxpbmUtYmxvY2snXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3N0eWxlTmFtZV09XCInc3RpSnNWaWV3ZXJGb3JtQnV0dG9uJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzJweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lubmVyVGFibGVXaWR0aF09XCInMTAwJSdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbldpZHRoXT1cIicxMDAlJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uXT1cImNvbXAubmFtZSA9PSAnRG9jdW1lbnRTZWN1cml0eUJ1dHRvbicgPyBjb21wLmNhcHRpb24gOiAnJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtlbmFibGVkXT1cIiFkaXNhYmxlZENvbXBvbmVudHNbY29tcC5uYW1lICsgJ0J1dHRvbiddXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJzaG93TWVudShjb21wLCBidXR0b24pXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcblxyXG4gICAgICAgICAgICAgIDwvc3RpLWdyb3VwLXBhbmVsPlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgIDwvdHI+XHJcblxyXG4gICAgICAgIDx0ciAqbmdJZj1cIm1vZGVsLm9wdGlvbnMuZXhwb3J0cy5zaG93T3BlbkFmdGVyRXhwb3J0ICYmIGV4cG9ydEZvcm1TZXR0aW5ncz8ub3BlbkFmdGVyRXhwb3J0ICYmICFleHBvcnRTZXJ2aWNlLnNlbmRNYWlsXCIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgPHN0aS1jaGVjay1ib3ggW2NhcHRpb25UZXh0XT1cIm1vZGVsLmxvYygnT3BlbkFmdGVyRXhwb3J0JylcIlxyXG4gICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ09wZW5BZnRlckV4cG9ydFRvb2x0aXAnKVwiXHJcbiAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzRweCA4cHggNHB4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICBbaXNDaGVja2VkXT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuT3BlbkFmdGVyRXhwb3J0XCJcclxuICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLk9wZW5BZnRlckV4cG9ydCA9ICRldmVudFwiPlxyXG4gICAgICAgICAgICAgICAgPC9zdGktY2hlY2stYm94PlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgIDwvdHI+XHJcbiAgICAgIDwvdGJvZHk+XHJcbiAgICA8L3RhYmxlPlxyXG5cclxuICAgIDwvc3RpLWJhc2UtZm9ybT5cclxuICBgXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgRXhwb3J0Rm9ybUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcclxuXHJcbiAgcHJpdmF0ZSBQUk9QRVJUWV9BTElBUyA9IHtcclxuICAgIEltYWdlRm9ybWF0Rm9ySHRtbDogJ0ltYWdlRm9ybWF0JyxcclxuICAgIEVuY29kaW5nVGV4dE9yQ3N2RmlsZTogJ0VuY29kaW5nJyxcclxuICAgIEV4cG9ydE1vZGVSdGY6ICdFeHBvcnRNb2RlJyxcclxuICAgIEVuY29kaW5nRGlmRmlsZTogJ0VuY29kaW5nJyxcclxuICAgIEVuY29kaW5nRGJmRmlsZTogJ0NvZGVQYWdlJ1xyXG4gIH07XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2Jhc2VGb3JtJykgYmFzZUZvcm06IEJhc2VGb3JtQ29tcG9uZW50O1xyXG4gIEBWaWV3Q2hpbGQoJ3NhdmVSZXBvcnRNZGMnKSBzYXZlUmVwb3J0TWRjOiBSYWRpb0J1dHRvbkNvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdwYWdlc1JhbmdlQWxsJykgcGFnZXNSYW5nZUFsbDogUmFkaW9CdXR0b25Db21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgncGFnZVJhbmdlQ3VycmVudFBhZ2UnKSBwYWdlUmFuZ2VDdXJyZW50UGFnZTogUmFkaW9CdXR0b25Db21wb25lbnQ7XHJcblxyXG4gIEBJbnB1dCgpIGV4cG9ydEZvcm1TZXR0aW5nczogRXhwb3J0Rm9ybVNldHRpbmdzO1xyXG5cclxuICBmb3JtVmlzaWJsZSA9IGZhbHNlO1xyXG4gIGRpc2FibGVkQ29tcG9uZW50czogYW55ID0ge307XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtb2RlbDogTW9kZWxTZXJ2aWNlLCBwdWJsaWMgZXhwb3J0U2VydmljZTogRXhwb3J0U2VydmljZSwgcHVibGljIGhlbHBlcjogSGVscGVyU2VydmljZSwgcHVibGljIGZvcm1TZXJ2aWNlOiBGb3JtU2VydmljZSxcclxuICAgIHB1YmxpYyBtZW51U2VydmljZTogTWVudVNlcnZpY2UsIHB1YmxpYyBjb2xsZWN0aW9uczogQ29sbGVjdGlvbnNTZXJ2aWNlLCBwdWJsaWMgY29udHJvbGxlcjogQ29udHJvbGxlclNlcnZpY2UpIHsgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBpbXBvcnQoJ0Bhbmd1bGFyL2NvcmUnKS5TaW1wbGVDaGFuZ2VzKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5iYXNlRm9ybSAmJiB0aGlzLmZvcm1TZXJ2aWNlPy5mb3JtPy5uYW1lID09PSB0aGlzLmJhc2VGb3JtLm5hbWUpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnVwZGF0ZURpc2FibGVkQ29tcG9uZW50cygpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkgeyB9XHJcblxyXG4gIGFjdGlvbigpIHtcclxuICAgIHRoaXMuZm9ybVNlcnZpY2UuY2xvc2VGb3JtKHRoaXMuYmFzZUZvcm0ubmFtZSk7XHJcblxyXG4gICAgaWYgKHRoaXMubW9kZWwub3B0aW9ucy5leHBvcnRzLnN0b3JlRXhwb3J0U2V0dGluZ3MpIHtcclxuICAgICAgdGhpcy5oZWxwZXIuc2V0Q29va2llKCdTdGltdWxzb2Z0V2ViVmlld2VyRXhwb3J0U2V0dGluZ3MnICsgdGhpcy5leHBvcnRTZXJ2aWNlLmdldENvbW1vbkV4cG9ydEZvcm1hdCgpLCBKU09OLnN0cmluZ2lmeSh0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MpKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmV4cG9ydFNlcnZpY2UucG9zdEV4cG9ydCgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRGlzYWJsZWRDb21wb25lbnRzKCkge1xyXG4gICAgWydTdGFuZGFyZFBkZkZvbnRzJywgJ0VtYmVkZGVkRm9udHMnLCAnVXNlVW5pY29kZSddLmZvckVhY2gobiA9PiB0aGlzLmRpc2FibGVkQ29tcG9uZW50c1tuXSA9ICh0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUGRmQUNvbXBsaWFuY2UgPT09IHRydWUpKTtcclxuXHJcbiAgICB0aGlzLmRpc2FibGVkQ29tcG9uZW50cy5JbWFnZVF1YWxpdHkgPSB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuSW1hZ2VDb21wcmVzc2lvbk1ldGhvZCAmJiB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuSW1hZ2VDb21wcmVzc2lvbk1ldGhvZCAhPT0gJ0pwZWcnO1xyXG5cclxuICAgIHRoaXMuZGlzYWJsZWRDb21wb25lbnRzLkV4cG9ydE9iamVjdEZvcm1hdHRpbmcgPSB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuRGF0YUV4cG9ydE1vZGUgPT09ICdBbGxCYW5kcyc7XHJcbiAgICB0aGlzLmRpc2FibGVkQ29tcG9uZW50cy5Vc2VPbmVQYWdlSGVhZGVyQW5kRm9vdGVyID0gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkRhdGFFeHBvcnRNb2RlICE9ICdBbGxCYW5kcyc7XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlZENvbXBvbmVudHMuRW5jb2RpbmdEaWZGaWxlID0gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlVzZURlZmF1bHRTeXN0ZW1FbmNvZGluZztcclxuXHJcbiAgICB0aGlzLmRpc2FibGVkQ29tcG9uZW50cy5UaWZmQ29tcHJlc3Npb25TY2hlbWUgPSB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuSW1hZ2VUeXBlICE9PSAnVGlmZic7XHJcblxyXG4gICAgdGhpcy5kaXNhYmxlZENvbXBvbmVudHMuVXNlRGlnaXRhbFNpZ25hdHVyZSA9ICF0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuVXNlRGlnaXRhbFNpZ25hdHVyZSB8fCAhKHRoaXMubW9kZWwucGRmU2VjdXJpdHlDZXJ0aWZpY2F0ZXM/Lmxlbmd0aCA+IDApO1xyXG5cclxuICAgIHRoaXMuZGlzYWJsZWRDb21wb25lbnRzLlJlbW92ZUVtcHR5U3BhY2VBdEJvdHRvbSA9IHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5Vc2VQYWdlSGVhZGVyc0FuZEZvb3RlcnM7XHJcblxyXG4gICAgaWYgKHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5JbWFnZVR5cGUgIT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBpZkNvbXBvbmVudCA9IHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRGb3JtU2V0dGluZ3MuY29tcG9uZW50cy5maW5kKGMgPT4gYy5uYW1lID09PSAnSW1hZ2VGb3JtYXQnKTtcclxuICAgICAgaWYgKGlmQ29tcG9uZW50ICE9IG51bGwpIHtcclxuICAgICAgICBpZkNvbXBvbmVudC5pdGVtcyA9IHRoaXMuY29sbGVjdGlvbnMuZ2V0SW1hZ2VGb3JtYXRJdGVtcyh0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuSW1hZ2VUeXBlID09PSAnRW1mJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRpc2FibGVkQ29tcG9uZW50cy5EaXRoZXJpbmdUeXBlID0gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLkltYWdlRm9ybWF0ICE9PSAnTW9ub2Nocm9tZSc7XHJcblxyXG4gICAgaWYgKHRoaXMuc2F2ZVJlcG9ydE1kYykgeyB0aGlzLnNhdmVSZXBvcnRNZGMuY2xpY2soKTsgfVxyXG4gICAgaWYgKHRoaXMucGFnZXNSYW5nZUFsbCAmJiAhdGhpcy5leHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLnBhZ2VSYW5nZUFsbElzRGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy5wYWdlc1JhbmdlQWxsLmNsaWNrKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wYWdlUmFuZ2VDdXJyZW50UGFnZSAmJiB0aGlzLmV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMucGFnZVJhbmdlR3JvdXAucGFnZVJhbmdlQWxsSXNEaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLnBhZ2VSYW5nZUN1cnJlbnRQYWdlLmNsaWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5Db21wcmVzc1RvQXJjaGl2ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLmV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMucGFnZVJhbmdlR3JvdXAucGFnZVJhbmdlQWxsSXNEaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuQ29tcHJlc3NUb0FyY2hpdmUgPT09IGZhbHNlKSB7XHJcbiAgICAgIHRoaXMuZXhwb3J0Rm9ybVNldHRpbmdzLmdyb3Vwcy5wYWdlUmFuZ2VHcm91cC5wYWdlUmFuZ2VBbGxJc0Rpc2FibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudEFjdGlvbihjb21wOiBFeHBvcnRDb21wb25lbnQsIHZhbHVlPzogYW55KSB7XHJcbiAgICBsZXQgcHJvcGVydHkgPSB0aGlzLlBST1BFUlRZX0FMSUFTW2NvbXAubmFtZV0gfHwgY29tcC5uYW1lO1xyXG5cclxuICAgIHN3aXRjaCAocHJvcGVydHkpIHtcclxuICAgICAgY2FzZSAnRW1iZWRkZWRGb250cyc6XHJcbiAgICAgIGNhc2UgJ1VzZVVuaWNvZGUnOlxyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLlN0YW5kYXJkUGRmRm9udHMgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdTdGFuZGFyZFBkZkZvbnRzJzpcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5FbWJlZGRlZEZvbnRzID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuVXNlVW5pY29kZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ0ltYWdlVHlwZSc6XHJcbiAgICAgICAgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydCgnSW1hZ2UnICsgdmFsdWUsIHRydWUpO1xyXG4gICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgY2FzZSAnRGF0YVR5cGUnOlxyXG4gICAgICBjYXNlICdIdG1sVHlwZSc6XHJcbiAgICAgICAgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydCh2YWx1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICBjYXNlICdFeGNlbFR5cGUnOlxyXG4gICAgICAgIGNvbnN0IGV4cG9ydEZvcm1hdCA9IHZhbHVlID09PSAnRXhjZWxCaW5hcnknID8gJ0V4Y2VsJyA6IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnQoZXhwb3J0Rm9ybWF0LCB0cnVlKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ1VzZURpZ2l0YWxTaWduYXR1cmUnOlxyXG4gICAgICAgIGlmICghKHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09PSBmYWxzZSkpIHtcclxuICAgICAgICAgIHByb3BlcnR5ID0gJ0NlcnRpZmljYXRlVGh1bWJwcmludCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSAmJiB0aGlzLmNvbGxlY3Rpb25zLmdldFBkZlNlY3VyaXR5Q2VydGlmaWNhdGVzSXRlbXMoKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgdmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMuY29udHJvbGxlci5zaG93RXJyb3IoJ1dhcm5pbmcnLCAnQ2VydGlmaWNhdGUgTm90IEZvdW5kIScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgJ1VzZVBhZ2VIZWFkZXJzQW5kRm9vdGVycyc6XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUmVtb3ZlRW1wdHlTcGFjZUF0Qm90dG9tID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzW3Byb3BlcnR5XSA9IHZhbHVlO1xyXG5cclxuICAgIHRoaXMudXBkYXRlRGlzYWJsZWRDb21wb25lbnRzKCk7XHJcbiAgfVxyXG5cclxuICBnZXRWYWx1ZShjb21wOiBFeHBvcnRDb21wb25lbnQsIGNvbXBvbmVudD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBwcm9wZXJ0eSA9IHRoaXMuUFJPUEVSVFlfQUxJQVNbY29tcC5uYW1lXSB8fCBjb21wLm5hbWU7XHJcbiAgICBzd2l0Y2ggKHByb3BlcnR5KSB7XHJcbiAgICAgIGNhc2UgJ1pvb20yJzpcclxuICAgICAgICByZXR1cm4gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzW3Byb3BlcnR5XS50b1N0cmluZygpO1xyXG5cclxuICAgICAgY2FzZSAnVXNlRGlnaXRhbFNpZ25hdHVyZSc6XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudCA9PSAnZHJvcERvd25MaXN0Jykge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5nc1snQ2VydGlmaWNhdGVUaHVtYnByaW50J107XHJcbiAgICAgICAgfVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB0aGlzLmV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3NbcHJvcGVydHldO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2hhbmdlVmlzaWJpbGl0eShzdGF0ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmZvcm1WaXNpYmxlID0gc3RhdGUgPT09ICd2aXNpYmxlJztcclxuXHJcbiAgICBpZiAoc3RhdGUgPT09ICdoaWRkZW4nICYmIHRoaXMuZXhwb3J0Rm9ybVNldHRpbmdzPy5ncm91cHM/LnNhdmluZ1JlcG9ydEdyb3VwKSB7XHJcbiAgICAgIHRoaXMuaGVscGVyLnNldENvb2tpZSgnU3RpbXVsc29mdFdlYlZpZXdlckV4cG9ydFNldHRpbmdzT3BlbmluZ0dyb3VwcycsIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBTYXZpbmdSZXBvcnRHcm91cDogdGhpcy5leHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnNhdmluZ1JlcG9ydEdyb3VwLm9wZW5lZCxcclxuICAgICAgICBQYWdlUmFuZ2VHcm91cDogdGhpcy5leHBvcnRGb3JtU2V0dGluZ3MuZ3JvdXBzLnBhZ2VSYW5nZUdyb3VwLm9wZW5lZCxcclxuICAgICAgICBTZXR0aW5nc0dyb3VwOiB0aGlzLmV4cG9ydEZvcm1TZXR0aW5ncy5ncm91cHMuc2V0dGluZ3NHcm91cC5vcGVuZWRcclxuICAgICAgfSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHN0YXRlID09PSAndmlzaWJsZScpIHtcclxuICAgICAgdGhpcy51cGRhdGVEaXNhYmxlZENvbXBvbmVudHMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNob3dNZW51KGNvbXA6IEV4cG9ydENvbXBvbmVudCwgYnV0dG9uOiBCdXR0b25Db21wb25lbnQpIHtcclxuICAgIGxldCBtZW51TmFtZSA9ICdkb2N1bWVudFNlY3VyaXR5TWVudSc7XHJcbiAgICBpZiAoY29tcC5uYW1lID09PSAnRG9jdW1lbnRTZWN1cml0eUJ1dHRvbicpIHtcclxuICAgICAgdGhpcy5tZW51U2VydmljZS5hZGRNZW51KHtcclxuICAgICAgICB0eXBlOiBtZW51TmFtZSwgbmFtZTogbWVudU5hbWUsIGl0ZW1zOiBbXSwgcGFyZW50OiBidXR0b24uYnV0dG9uLFxyXG4gICAgICAgIGl0ZW1TdHlsZU5hbWU6ICdzdGlKc1ZpZXdlck1lbnVTdGFuZGFydEl0ZW0nLCBtZW51U3R5bGVOYW1lOiAnc3RpSnNWaWV3ZXJEcm9wZG93bk1lbnUnXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWVudU5hbWUgPSB0aGlzLm1lbnVTZXJ2aWNlLlZFUlRJQ0FMX01FTlVfTkFNRTtcclxuICAgICAgdGhpcy5tZW51U2VydmljZS5hZGRNZW51KHtcclxuICAgICAgICB0eXBlOiAnYnV0dG9uTWVudScsIG5hbWU6IG1lbnVOYW1lLCBpdGVtczogdGhpcy5jb2xsZWN0aW9ucy5nZXRQZGZTZWN1cml0eUNlcnRpZmljYXRlc0l0ZW1zKCksIHBhcmVudDogYnV0dG9uLmJ1dHRvbixcclxuICAgICAgICBpdGVtU3R5bGVOYW1lOiAnc3RpSnNWaWV3ZXJNZW51U3RhbmRhcnRJdGVtJywgbWVudVN0eWxlTmFtZTogJ3N0aUpzVmlld2VyRHJvcGRvd25NZW51J1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5tZW51U2VydmljZS5zaG93TWVudShtZW51TmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFRleHRCb3hUeXBlKG5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKG5hbWUgPT09ICdTYXZlUmVwb3J0UGFzc3dvcmQnIHx8IG5hbWUgPT09ICdQYXNzd29yZElucHV0VXNlcicgfHwgbmFtZSA9PT0gJ1Bhc3N3b3JkSW5wdXRPd25lcicpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZm9ybVZpc2libGUgPyAncGFzc3dvcmQnIDogJyc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuIl19