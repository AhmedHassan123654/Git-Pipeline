import { __decorate } from "tslib";
import { Component, Input } from '@angular/core';
import { ModelService } from '../services/model.service';
import { HelperService } from '../services/helper.service';
import { MenuService } from '../menu/menu.service';
let DatePickerDayButtonComponent = class DatePickerDayButtonComponent {
    constructor(model, helper, menuService) {
        this.model = model;
        this.helper = helper;
        this.menuService = menuService;
        this.caption = '';
        this.enabled = false;
        this.selected = false;
        this.closeOnAction = true;
    }
    action() {
        this.date.day = this.row * 7 + this.col - this.getFirstDay() + 1;
        if (this.closeOnAction && this.menuService.getMenu('datePickerMenu') != null) {
            this.menuService.getMenu('datePickerMenu').state = 'initialUp';
        }
    }
    getFirstDay() {
        let firstDay = new Date(this.date.year, this.date.month - 1, 1).getDay();
        if (firstDay === 0) {
            firstDay = 7;
        }
        if (this.model.options.appearance.datePickerFirstDayOfWeek !== 'Sunday') {
            firstDay--;
        }
        return firstDay;
    }
    ngOnInit() { }
};
DatePickerDayButtonComponent.ctorParameters = () => [
    { type: ModelService },
    { type: HelperService },
    { type: MenuService }
];
__decorate([
    Input()
], DatePickerDayButtonComponent.prototype, "col", void 0);
__decorate([
    Input()
], DatePickerDayButtonComponent.prototype, "row", void 0);
__decorate([
    Input()
], DatePickerDayButtonComponent.prototype, "caption", void 0);
__decorate([
    Input()
], DatePickerDayButtonComponent.prototype, "enabled", void 0);
__decorate([
    Input()
], DatePickerDayButtonComponent.prototype, "selected", void 0);
__decorate([
    Input()
], DatePickerDayButtonComponent.prototype, "date", void 0);
__decorate([
    Input()
], DatePickerDayButtonComponent.prototype, "closeOnAction", void 0);
DatePickerDayButtonComponent = __decorate([
    Component({
        selector: 'sti-date-picker-day-button',
        template: `
    <sti-button [styleName]="'stiJsViewerDatePickerDayButton'"
                [width]="model.options.isTouchDevice ? '25px' : '23px'"
                [height]="model.options.isTouchDevice ? '25px' : '23px'"
                [captionAlign]="'center'"
                [innerTableWidth]="'100%'"
                [captionPadding]="'0px'"
                [margin]="'1px'"
                [caption]="caption"
                [enabled]="enabled"
                [selected]="selected"
                (action)="action()">
    </sti-button>
  `
    })
], DatePickerDayButtonComponent);
export { DatePickerDayButtonComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1waWNrZXItZGF5LWJ1dHRvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL2NvbnRyb2xzL2RhdGUtcGlja2VyLWRheS1idXR0b24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFekQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQW9CbkQsSUFBYSw0QkFBNEIsR0FBekMsTUFBYSw0QkFBNEI7SUFVdkMsWUFBbUIsS0FBbUIsRUFBUyxNQUFxQixFQUFTLFdBQXdCO1FBQWxGLFVBQUssR0FBTCxLQUFLLENBQWM7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQVMsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFONUYsWUFBTyxHQUFHLEVBQUUsQ0FBQztRQUNiLFlBQU8sR0FBRyxLQUFLLENBQUM7UUFDaEIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUVqQixrQkFBYSxHQUFHLElBQUksQ0FBQztJQUUyRSxDQUFDO0lBRTFHLE1BQU07UUFDSixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDakUsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLElBQUksSUFBSSxFQUFFO1lBQzVFLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQztTQUNoRTtJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxRQUFRLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3pFLElBQUksUUFBUSxLQUFLLENBQUMsRUFBRTtZQUNsQixRQUFRLEdBQUcsQ0FBQyxDQUFDO1NBQ2Q7UUFDRCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyx3QkFBd0IsS0FBSyxRQUFRLEVBQUU7WUFDdkUsUUFBUSxFQUFFLENBQUM7U0FDWjtRQUNELE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFFRCxRQUFRLEtBQUssQ0FBQztDQUNmLENBQUE7O1lBckIyQixZQUFZO1lBQWlCLGFBQWE7WUFBc0IsV0FBVzs7QUFSNUY7SUFBUixLQUFLLEVBQUU7eURBQWE7QUFDWjtJQUFSLEtBQUssRUFBRTt5REFBYTtBQUNaO0lBQVIsS0FBSyxFQUFFOzZEQUFjO0FBQ2I7SUFBUixLQUFLLEVBQUU7NkRBQWlCO0FBQ2hCO0lBQVIsS0FBSyxFQUFFOzhEQUFrQjtBQUNqQjtJQUFSLEtBQUssRUFBRTswREFBc0I7QUFDckI7SUFBUixLQUFLLEVBQUU7bUVBQXNCO0FBUm5CLDRCQUE0QjtJQWxCeEMsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLDRCQUE0QjtRQUN0QyxRQUFRLEVBQUU7Ozs7Ozs7Ozs7Ozs7R0FhVDtLQUNGLENBQUM7R0FFVyw0QkFBNEIsQ0ErQnhDO1NBL0JZLDRCQUE0QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNb2RlbFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9tb2RlbC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0ZVRpbWVPYmplY3QgfSBmcm9tICcuLi9zZXJ2aWNlcy9vYmplY3RzJztcclxuaW1wb3J0IHsgSGVscGVyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWVudVNlcnZpY2UgfSBmcm9tICcuLi9tZW51L21lbnUuc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3N0aS1kYXRlLXBpY2tlci1kYXktYnV0dG9uJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPHN0aS1idXR0b24gW3N0eWxlTmFtZV09XCInc3RpSnNWaWV3ZXJEYXRlUGlja2VyRGF5QnV0dG9uJ1wiXHJcbiAgICAgICAgICAgICAgICBbd2lkdGhdPVwibW9kZWwub3B0aW9ucy5pc1RvdWNoRGV2aWNlID8gJzI1cHgnIDogJzIzcHgnXCJcclxuICAgICAgICAgICAgICAgIFtoZWlnaHRdPVwibW9kZWwub3B0aW9ucy5pc1RvdWNoRGV2aWNlID8gJzI1cHgnIDogJzIzcHgnXCJcclxuICAgICAgICAgICAgICAgIFtjYXB0aW9uQWxpZ25dPVwiJ2NlbnRlcidcIlxyXG4gICAgICAgICAgICAgICAgW2lubmVyVGFibGVXaWR0aF09XCInMTAwJSdcIlxyXG4gICAgICAgICAgICAgICAgW2NhcHRpb25QYWRkaW5nXT1cIicwcHgnXCJcclxuICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzFweCdcIlxyXG4gICAgICAgICAgICAgICAgW2NhcHRpb25dPVwiY2FwdGlvblwiXHJcbiAgICAgICAgICAgICAgICBbZW5hYmxlZF09XCJlbmFibGVkXCJcclxuICAgICAgICAgICAgICAgIFtzZWxlY3RlZF09XCJzZWxlY3RlZFwiXHJcbiAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImFjdGlvbigpXCI+XHJcbiAgICA8L3N0aS1idXR0b24+XHJcbiAgYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJEYXlCdXR0b25Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBASW5wdXQoKSBjb2w6IG51bWJlcjtcclxuICBASW5wdXQoKSByb3c6IG51bWJlcjtcclxuICBASW5wdXQoKSBjYXB0aW9uID0gJyc7XHJcbiAgQElucHV0KCkgZW5hYmxlZCA9IGZhbHNlO1xyXG4gIEBJbnB1dCgpIHNlbGVjdGVkID0gZmFsc2U7XHJcbiAgQElucHV0KCkgZGF0ZTogRGF0ZVRpbWVPYmplY3Q7XHJcbiAgQElucHV0KCkgY2xvc2VPbkFjdGlvbiA9IHRydWU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtb2RlbDogTW9kZWxTZXJ2aWNlLCBwdWJsaWMgaGVscGVyOiBIZWxwZXJTZXJ2aWNlLCBwdWJsaWMgbWVudVNlcnZpY2U6IE1lbnVTZXJ2aWNlKSB7IH1cclxuXHJcbiAgYWN0aW9uKCkge1xyXG4gICAgdGhpcy5kYXRlLmRheSA9IHRoaXMucm93ICogNyArIHRoaXMuY29sIC0gdGhpcy5nZXRGaXJzdERheSgpICsgMTtcclxuICAgIGlmICh0aGlzLmNsb3NlT25BY3Rpb24gJiYgdGhpcy5tZW51U2VydmljZS5nZXRNZW51KCdkYXRlUGlja2VyTWVudScpICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5tZW51U2VydmljZS5nZXRNZW51KCdkYXRlUGlja2VyTWVudScpLnN0YXRlID0gJ2luaXRpYWxVcCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRGaXJzdERheSgpOiBudW1iZXIge1xyXG4gICAgbGV0IGZpcnN0RGF5ID0gbmV3IERhdGUodGhpcy5kYXRlLnllYXIsIHRoaXMuZGF0ZS5tb250aCAtIDEsIDEpLmdldERheSgpO1xyXG4gICAgaWYgKGZpcnN0RGF5ID09PSAwKSB7XHJcbiAgICAgIGZpcnN0RGF5ID0gNztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm1vZGVsLm9wdGlvbnMuYXBwZWFyYW5jZS5kYXRlUGlja2VyRmlyc3REYXlPZldlZWsgIT09ICdTdW5kYXknKSB7XHJcbiAgICAgIGZpcnN0RGF5LS07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlyc3REYXk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG59XHJcbiJdfQ==