import { __decorate } from "tslib";
import { Component, Input, ViewChild, Output, EventEmitter } from '@angular/core';
import { ModelService } from '../services/model.service';
let TextBoxComponent = class TextBoxComponent {
    constructor(model) {
        this.model = model;
        this.enabled = true;
        this.focusOnCreate = false;
        this.action = new EventEmitter();
        this.onchange = new EventEmitter();
        this.onblur = new EventEmitter();
        this.selected = false;
        this.focused = false;
        this.over = false;
        this._readOnly = false;
        this.styleName = 'stiJsViewerTextBox';
    }
    ngAfterViewInit() {
        if (this.focusOnCreate) {
            setTimeout(() => {
                this.element.nativeElement.focus();
            });
        }
    }
    keypress(event) {
        if (!this.enabled) {
            return false;
        }
        if (event.keyCode === 13) {
            this.action.emit(event.target);
        }
    }
    onchanged(event) {
        this.onchange.emit(event.target);
    }
    focus() {
        this.oldValue = this.element.nativeElement.value;
    }
    get height() {
        return this.model.options.isTouchDevice ? '26px' : '21px';
    }
    get className() {
        if (this._readOnly) {
            return this.styleName + ' ' + this.styleName + 'Default';
        }
        return this.styleName + ' ' + this.styleName + (this.selected ? 'Over' : (this.enabled ? (this.over ? 'Over' : 'Default') : 'Disabled'));
    }
    set readOnly(value) {
        this._readOnly = value;
        setTimeout(() => {
            try {
                this.element.nativeElement.setAttribute('unselectable', value ? 'on' : 'off');
                this.element.nativeElement.setAttribute('onselectstart', value ? 'return false' : '');
                this.element.nativeElement.readOnly = value;
            }
            catch (e) { }
        });
    }
    get readOnly() {
        return this._readOnly;
    }
    ngOnInit() { }
};
TextBoxComponent.ctorParameters = () => [
    { type: ModelService }
];
__decorate([
    ViewChild('element')
], TextBoxComponent.prototype, "element", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "width", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "actionLostFocus", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "tooltip", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "enabled", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "value", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "margin", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "focusOnCreate", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "maxLength", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "color", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "type", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "padding", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "border", void 0);
__decorate([
    Output()
], TextBoxComponent.prototype, "action", void 0);
__decorate([
    Output()
], TextBoxComponent.prototype, "onchange", void 0);
__decorate([
    Output()
], TextBoxComponent.prototype, "onblur", void 0);
__decorate([
    Input()
], TextBoxComponent.prototype, "readOnly", null);
TextBoxComponent = __decorate([
    Component({
        selector: 'sti-text-box',
        template: `
    <input #element
    [style]="{fontFamily:model.options.toolbar.fontFamily, height: height, lineHeight: height, boxSizing:'content-box'}"
    [style.color]="color ? color : (model.options.toolbar.fontColor != '' ? model.options.toolbar.fontColor : '')"
    [style.width]="width != null ? width + 'px' : ''"
    [style.margin]="margin"
    [style.cursor]="readOnly ? 'default' : ''"
    [style.padding]="padding"
    [style.border]="border"
    [title]="tooltip || ''"
    [class]="className"
    [value]="value || ''"
    [attr.maxLength]="maxLength"
    [attr.type]="type"
    (mouseover)="over=true"
    (mouseleave)="over=false"
    (focused)="focused=true; selected=true"
    (blur)="focused=false; selected=false; onblur.emit($event.target)"
    (keypress)="keypress($event)"
    (keyup)="onchanged($event)"
    (focus)="focus()"/>
  `
    })
], TextBoxComponent);
export { TextBoxComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC1ib3guY29tcG9uZXQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL2NvbnRyb2xzL3RleHQtYm94LmNvbXBvbmV0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxTQUFTLEVBQWMsTUFBTSxFQUFFLFlBQVksRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDckgsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBNEJ6RCxJQUFhLGdCQUFnQixHQUE3QixNQUFhLGdCQUFnQjtJQThCM0IsWUFBbUIsS0FBbUI7UUFBbkIsVUFBSyxHQUFMLEtBQUssQ0FBYztRQXZCN0IsWUFBTyxHQUFHLElBQUksQ0FBQztRQUdmLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBT3JCLFdBQU0sR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUMvQyxhQUFRLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDakQsV0FBTSxHQUFzQixJQUFJLFlBQVksRUFBRSxDQUFDO1FBSXpELGFBQVEsR0FBRyxLQUFLLENBQUM7UUFDakIsWUFBTyxHQUFHLEtBQUssQ0FBQztRQUNoQixTQUFJLEdBQUcsS0FBSyxDQUFDO1FBQ2IsY0FBUyxHQUFHLEtBQUssQ0FBQztRQUVsQixjQUFTLEdBQUcsb0JBQW9CLENBQUM7SUFFUyxDQUFDO0lBRTNDLGVBQWU7UUFDYixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7WUFDdEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtnQkFDZCxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNyQyxDQUFDLENBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQztJQUVELFFBQVEsQ0FBQyxLQUFvQjtRQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNqQixPQUFPLEtBQUss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SUFEQyxLQUFLLEVBQUU7Z0RBVVA7QUE5RVUsZ0JBQWdCO0lBMUI1QixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsY0FBYztRQUN4QixRQUFRLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXFCVDtLQUNGLENBQUM7R0FFVyxnQkFBZ0IsQ0FxRjVCO1NBckZZLGdCQUFnQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgVmlld0NoaWxkLCBFbGVtZW50UmVmLCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgQWZ0ZXJWaWV3SW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNb2RlbFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9tb2RlbC5zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnc3RpLXRleHQtYm94JyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPGlucHV0ICNlbGVtZW50XHJcbiAgICBbc3R5bGVdPVwie2ZvbnRGYW1pbHk6bW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRGYW1pbHksIGhlaWdodDogaGVpZ2h0LCBsaW5lSGVpZ2h0OiBoZWlnaHQsIGJveFNpemluZzonY29udGVudC1ib3gnfVwiXHJcbiAgICBbc3R5bGUuY29sb3JdPVwiY29sb3IgPyBjb2xvciA6IChtb2RlbC5vcHRpb25zLnRvb2xiYXIuZm9udENvbG9yICE9ICcnID8gbW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRDb2xvciA6ICcnKVwiXHJcbiAgICBbc3R5bGUud2lkdGhdPVwid2lkdGggIT0gbnVsbCA/IHdpZHRoICsgJ3B4JyA6ICcnXCJcclxuICAgIFtzdHlsZS5tYXJnaW5dPVwibWFyZ2luXCJcclxuICAgIFtzdHlsZS5jdXJzb3JdPVwicmVhZE9ubHkgPyAnZGVmYXVsdCcgOiAnJ1wiXHJcbiAgICBbc3R5bGUucGFkZGluZ109XCJwYWRkaW5nXCJcclxuICAgIFtzdHlsZS5ib3JkZXJdPVwiYm9yZGVyXCJcclxuICAgIFt0aXRsZV09XCJ0b29sdGlwIHx8ICcnXCJcclxuICAgIFtjbGFzc109XCJjbGFzc05hbWVcIlxyXG4gICAgW3ZhbHVlXT1cInZhbHVlIHx8ICcnXCJcclxuICAgIFthdHRyLm1heExlbmd0aF09XCJtYXhMZW5ndGhcIlxyXG4gICAgW2F0dHIudHlwZV09XCJ0eXBlXCJcclxuICAgIChtb3VzZW92ZXIpPVwib3Zlcj10cnVlXCJcclxuICAgIChtb3VzZWxlYXZlKT1cIm92ZXI9ZmFsc2VcIlxyXG4gICAgKGZvY3VzZWQpPVwiZm9jdXNlZD10cnVlOyBzZWxlY3RlZD10cnVlXCJcclxuICAgIChibHVyKT1cImZvY3VzZWQ9ZmFsc2U7IHNlbGVjdGVkPWZhbHNlOyBvbmJsdXIuZW1pdCgkZXZlbnQudGFyZ2V0KVwiXHJcbiAgICAoa2V5cHJlc3MpPVwia2V5cHJlc3MoJGV2ZW50KVwiXHJcbiAgICAoa2V5dXApPVwib25jaGFuZ2VkKCRldmVudClcIlxyXG4gICAgKGZvY3VzKT1cImZvY3VzKClcIi8+XHJcbiAgYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRCb3hDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICBAVmlld0NoaWxkKCdlbGVtZW50JykgZWxlbWVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgQElucHV0KCkgd2lkdGg6IG51bWJlcjtcclxuICBASW5wdXQoKSBhY3Rpb25Mb3N0Rm9jdXM6IGFueTtcclxuICBASW5wdXQoKSB0b29sdGlwOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgZW5hYmxlZCA9IHRydWU7XHJcbiAgQElucHV0KCkgdmFsdWU6IHN0cmluZztcclxuICBASW5wdXQoKSBtYXJnaW46IHN0cmluZztcclxuICBASW5wdXQoKSBmb2N1c09uQ3JlYXRlID0gZmFsc2U7XHJcbiAgQElucHV0KCkgbWF4TGVuZ3RoOiBudW1iZXI7XHJcbiAgQElucHV0KCkgY29sb3I6IHN0cmluZztcclxuICBASW5wdXQoKSB0eXBlOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgcGFkZGluZzogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIGJvcmRlcjogc3RyaW5nO1xyXG5cclxuICBAT3V0cHV0KCkgYWN0aW9uOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICBAT3V0cHV0KCkgb25jaGFuZ2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gIEBPdXRwdXQoKSBvbmJsdXI6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBwdWJsaWMgb2xkVmFsdWU6IHN0cmluZztcclxuXHJcbiAgc2VsZWN0ZWQgPSBmYWxzZTtcclxuICBmb2N1c2VkID0gZmFsc2U7XHJcbiAgb3ZlciA9IGZhbHNlO1xyXG4gIF9yZWFkT25seSA9IGZhbHNlO1xyXG5cclxuICBzdHlsZU5hbWUgPSAnc3RpSnNWaWV3ZXJUZXh0Qm94JztcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UpIHsgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5mb2N1c09uQ3JlYXRlKSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAga2V5cHJlc3MoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIGlmICghdGhpcy5lbmFibGVkKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICB0aGlzLmFjdGlvbi5lbWl0KGV2ZW50LnRhcmdldCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbmNoYW5nZWQoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcclxuICAgIHRoaXMub25jaGFuZ2UuZW1pdChldmVudC50YXJnZXQpO1xyXG4gIH1cclxuXHJcbiAgZm9jdXMoKSB7XHJcbiAgICB0aGlzLm9sZFZhbHVlID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQudmFsdWU7XHJcbiAgfVxyXG5cclxuICBnZXQgaGVpZ2h0KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5tb2RlbC5vcHRpb25zLmlzVG91Y2hEZXZpY2UgPyAnMjZweCcgOiAnMjFweCc7XHJcbiAgfVxyXG5cclxuICBnZXQgY2xhc3NOYW1lKCk6IHN0cmluZyB7XHJcbiAgICBpZiAodGhpcy5fcmVhZE9ubHkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc3R5bGVOYW1lICsgJyAnICsgdGhpcy5zdHlsZU5hbWUgKyAnRGVmYXVsdCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5zdHlsZU5hbWUgKyAnICcgKyB0aGlzLnN0eWxlTmFtZSArICh0aGlzLnNlbGVjdGVkID8gJ092ZXInIDogKHRoaXMuZW5hYmxlZCA/ICh0aGlzLm92ZXIgPyAnT3ZlcicgOiAnRGVmYXVsdCcpIDogJ0Rpc2FibGVkJykpO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgcmVhZE9ubHkodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuX3JlYWRPbmx5ID0gdmFsdWU7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3Vuc2VsZWN0YWJsZScsIHZhbHVlID8gJ29uJyA6ICdvZmYnKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ29uc2VsZWN0c3RhcnQnLCB2YWx1ZSA/ICdyZXR1cm4gZmFsc2UnIDogJycpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LnJlYWRPbmx5ID0gdmFsdWU7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHsgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXQgcmVhZE9ubHkoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVhZE9ubHk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG59XHJcbiJdfQ==