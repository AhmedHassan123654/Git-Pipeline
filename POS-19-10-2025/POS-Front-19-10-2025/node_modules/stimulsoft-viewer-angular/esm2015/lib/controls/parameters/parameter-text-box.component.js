import { __decorate } from "tslib";
import { Component, Input, ViewChild } from '@angular/core';
import { HelperService } from '../../services/helper.service';
import { ModelService } from '../../services/model.service';
let ParameterTextBoxComponent = class ParameterTextBoxComponent {
    constructor(helper, model) {
        this.helper = helper;
        this.model = model;
        this.focusOnCreate = false;
        this.isMenu = false;
        this.value = '';
        this.secondTextBox = false;
    }
    ngOnInit() { }
    onchange(target) {
        if (this.element.oldValue === target.value) {
            return;
        }
        const value = this.getValue(target);
        if (this.isMenu) {
            if (!this.secondTextBox) {
                this.item.key = value;
            }
            else {
                this.item.keyTo = value;
            }
        }
        else {
            if (!this.secondTextBox) {
                if (this.variable.basicType === 'Range' || this.variable.type === 'DateTime') {
                    this.variable.key = value;
                }
                else {
                    this.variable.value = value;
                }
            }
            else {
                this.variable.keyTo = value;
            }
        }
    }
    getValue(target) {
        if (this.variable.type === 'DateTime') {
            if (this.element.oldValue === target.value) {
                return;
            }
            try {
                const timeString = new Date().toLocaleTimeString();
                const isAmericanFormat = timeString.toLowerCase().indexOf('am') >= 0 || timeString.toLowerCase().indexOf('pm') >= 0;
                const formatDate = isAmericanFormat ? 'MM/dd/yyyy' : 'dd.MM.yyyy';
                let format = formatDate + (isAmericanFormat ? ' h:mm:ss tt' : ' hh:mm:ss');
                if (this.variable.dateTimeType === 'Date') {
                    format = formatDate;
                }
                if (this.variable.dateTimeType === 'Time') {
                    format = 'hh:mm:ss';
                }
                const date = this.helper.getDateTimeFromString(target.value, this.model.options.appearance.parametersPanelDateFormat || format);
                return this.helper.getDateTimeObject(date);
            }
            catch (e) {
                alert(e);
            }
        }
        else {
            return target.value;
        }
    }
    get width() {
        let width = 210;
        if (this.variable.basicType === 'Range') {
            width = 140;
            if (this.variable.type === 'Guid' || this.variable.type === 'String') {
                width = 190;
            }
            if (this.variable.type === 'DateTime') {
                width = 235;
            }
            if (this.variable.type === 'Char') {
                width = 60;
            }
        }
        else {
            if (this.variable.type === 'Guid') {
                width = 265;
            }
            else {
                width = 210;
            }
        }
        return width;
    }
    get color() {
        return !this.variable.isNull
            ? (this.model.options.toolbar.fontColor && this.model.options.toolbar.fontColor !== 'Empty' ? this.model.options.toolbar.fontColor : '#444444')
            : this.variable.type === 'DateTime' ? 'transparent' : '#c6c6c6';
    }
};
ParameterTextBoxComponent.ctorParameters = () => [
    { type: HelperService },
    { type: ModelService }
];
__decorate([
    ViewChild('element')
], ParameterTextBoxComponent.prototype, "element", void 0);
__decorate([
    Input()
], ParameterTextBoxComponent.prototype, "item", void 0);
__decorate([
    Input()
], ParameterTextBoxComponent.prototype, "variable", void 0);
__decorate([
    Input()
], ParameterTextBoxComponent.prototype, "readOnly", void 0);
__decorate([
    Input()
], ParameterTextBoxComponent.prototype, "focusOnCreate", void 0);
__decorate([
    Input()
], ParameterTextBoxComponent.prototype, "isMenu", void 0);
__decorate([
    Input()
], ParameterTextBoxComponent.prototype, "value", void 0);
__decorate([
    Input()
], ParameterTextBoxComponent.prototype, "secondTextBox", void 0);
ParameterTextBoxComponent = __decorate([
    Component({
        selector: 'sti-parameter-text-box',
        template: `
    <sti-text-box #element
      [maxLength]="variable.type === 'Char' ? 1 : ''"
      [value]="isMenu ? helper.getStringKey(item.key, variable): value"
      [width]="width"
      [readOnly]="readOnly"
      [focusOnCreate]="focusOnCreate"
      [enabled]="!variable?.isNull"
      [color]="color"
      (onchange)="onchange($event)">
    </sti-text-box>
  `
    })
], ParameterTextBoxComponent);
export { ParameterTextBoxComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyYW1ldGVyLXRleHQtYm94LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3N0aW11bHNvZnQtdmlld2VyLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvY29udHJvbHMvcGFyYW1ldGVycy9wYXJhbWV0ZXItdGV4dC1ib3guY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzlELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQWtCNUQsSUFBYSx5QkFBeUIsR0FBdEMsTUFBYSx5QkFBeUI7SUFZcEMsWUFBbUIsTUFBcUIsRUFBUyxLQUFtQjtRQUFqRCxXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQVMsVUFBSyxHQUFMLEtBQUssQ0FBYztRQUwzRCxrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUN0QixXQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ2YsVUFBSyxHQUFHLEVBQUUsQ0FBQztRQUNYLGtCQUFhLEdBQUcsS0FBSyxDQUFDO0lBRXlDLENBQUM7SUFFekUsUUFBUSxLQUFLLENBQUM7SUFFZCxRQUFRLENBQUMsTUFBVztRQUNsQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxLQUFLLE1BQU0sQ0FBQyxLQUFLLEVBQUU7WUFDMUMsT0FBTztTQUNSO1FBQ0QsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNwQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZixJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtnQkFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO2FBQ3ZCO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQzthQUN6QjtTQUNGO2FBQU07WUFDTCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtnQkFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsS0FBSyxPQUFPLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssVUFBVSxFQUFFO29CQUM1RSxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7aUJBQzNCO3FCQUFNO29CQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztpQkFDN0I7YUFDRjtpQkFBTTtnQkFDTCxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7YUFDN0I7U0FDRjtJQUNILENBQUM7SUFFRCxRQUFRLENBQUMsTUFBVztRQUNsQixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtZQUNyQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxLQUFLLE1BQU0sQ0FBQyxLQUFLLEVBQUU7Z0JBQzFDLE9BQU87YUFDUjtZQUNELElBQUk7Z0JBQ0YsTUFBTSxVQUFVLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO2dCQUNuRCxNQUFNLGdCQUFnQixHQUFHLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNwSCxNQUFNLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7Z0JBQ2xFLElBQUksTUFBTSxHQUFHLFVBQVUsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUMzRSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxLQUFLLE1BQU0sRUFBRTtvQkFDekMsTUFBTSxHQUFHLFVBQVUsQ0FBQztpQkFDckI7Z0JBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksS0FBSyxNQUFNLEVBQUU7b0JBQ3pDLE1BQU0sR0FBRyxVQUFVLENBQUM7aUJBQ3JCO2dCQUNELE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMseUJBQXlCLElBQUksTUFBTSxDQUFDLENBQUM7Z0JBQ2hJLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUM1QztZQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNWLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNWO1NBQ0Y7YUFBTTtZQUNMLE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQztTQUNyQjtJQUNILENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDUCxJQUFJLEtBQUssR0FBRyxHQUFHLENBQUM7UUFDaEIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsS0FBSyxPQUFPLEVBQUU7WUFDdkMsS0FBSyxHQUFHLEdBQUcsQ0FBQztZQUNaLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssTUFBTSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFFBQVEsRUFBRTtnQkFDcEUsS0FBSyxHQUFHLEdBQUcsQ0FBQzthQUNiO1lBQ0QsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxVQUFVLEVBQUU7Z0JBQ3JDLEtBQUssR0FBRyxHQUFHLENBQUM7YUFDYjtZQUNELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssTUFBTSxFQUFFO2dCQUNqQyxLQUFLLEdBQUcsRUFBRSxDQUFDO2FBQ1o7U0FDRjthQUFNO1lBQ0wsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxNQUFNLEVBQUU7Z0JBQ2pDLEtBQUssR0FBRyxHQUFHLENBQUM7YUFDYjtpQkFBTTtnQkFDTCxLQUFLLEdBQUcsR0FBRyxDQUFDO2FBQ2I7U0FDRjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztJQUVELElBQUksS0FBSztRQUNQLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU07WUFDMUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxLQUFLLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1lBQy9JLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ3BFLENBQUM7Q0FDRixDQUFBOztZQWxGNEIsYUFBYTtZQUFnQixZQUFZOztBQVY5QztJQUFyQixTQUFTLENBQUMsU0FBUyxDQUFDOzBEQUEyQjtBQUV2QztJQUFSLEtBQUssRUFBRTt1REFBZ0I7QUFDZjtJQUFSLEtBQUssRUFBRTsyREFBb0I7QUFDbkI7SUFBUixLQUFLLEVBQUU7MkRBQW1CO0FBQ2xCO0lBQVIsS0FBSyxFQUFFO2dFQUF1QjtBQUN0QjtJQUFSLEtBQUssRUFBRTt5REFBZ0I7QUFDZjtJQUFSLEtBQUssRUFBRTt3REFBWTtBQUNYO0lBQVIsS0FBSyxFQUFFO2dFQUF1QjtBQVZwQix5QkFBeUI7SUFoQnJDLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSx3QkFBd0I7UUFDbEMsUUFBUSxFQUFFOzs7Ozs7Ozs7OztHQVdUO0tBQ0YsQ0FBQztHQUVXLHlCQUF5QixDQThGckM7U0E5RlkseUJBQXlCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgVmFyaWFibGUgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9vYmplY3RzJztcclxuaW1wb3J0IHsgVGV4dEJveENvbXBvbmVudCB9IGZyb20gJy4uL3RleHQtYm94LmNvbXBvbmV0JztcclxuaW1wb3J0IHsgSGVscGVyU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvbW9kZWwuc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3N0aS1wYXJhbWV0ZXItdGV4dC1ib3gnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8c3RpLXRleHQtYm94ICNlbGVtZW50XHJcbiAgICAgIFttYXhMZW5ndGhdPVwidmFyaWFibGUudHlwZSA9PT0gJ0NoYXInID8gMSA6ICcnXCJcclxuICAgICAgW3ZhbHVlXT1cImlzTWVudSA/IGhlbHBlci5nZXRTdHJpbmdLZXkoaXRlbS5rZXksIHZhcmlhYmxlKTogdmFsdWVcIlxyXG4gICAgICBbd2lkdGhdPVwid2lkdGhcIlxyXG4gICAgICBbcmVhZE9ubHldPVwicmVhZE9ubHlcIlxyXG4gICAgICBbZm9jdXNPbkNyZWF0ZV09XCJmb2N1c09uQ3JlYXRlXCJcclxuICAgICAgW2VuYWJsZWRdPVwiIXZhcmlhYmxlPy5pc051bGxcIlxyXG4gICAgICBbY29sb3JdPVwiY29sb3JcIlxyXG4gICAgICAob25jaGFuZ2UpPVwib25jaGFuZ2UoJGV2ZW50KVwiPlxyXG4gICAgPC9zdGktdGV4dC1ib3g+XHJcbiAgYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIFBhcmFtZXRlclRleHRCb3hDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBAVmlld0NoaWxkKCdlbGVtZW50JykgZWxlbWVudDogVGV4dEJveENvbXBvbmVudDtcclxuXHJcbiAgQElucHV0KCkgaXRlbTogVmFyaWFibGU7XHJcbiAgQElucHV0KCkgdmFyaWFibGU6IFZhcmlhYmxlO1xyXG4gIEBJbnB1dCgpIHJlYWRPbmx5OiBib29sZWFuO1xyXG4gIEBJbnB1dCgpIGZvY3VzT25DcmVhdGUgPSBmYWxzZTtcclxuICBASW5wdXQoKSBpc01lbnUgPSBmYWxzZTtcclxuICBASW5wdXQoKSB2YWx1ZSA9ICcnO1xyXG4gIEBJbnB1dCgpIHNlY29uZFRleHRCb3ggPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIGhlbHBlcjogSGVscGVyU2VydmljZSwgcHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICBvbmNoYW5nZSh0YXJnZXQ6IGFueSkge1xyXG4gICAgaWYgKHRoaXMuZWxlbWVudC5vbGRWYWx1ZSA9PT0gdGFyZ2V0LnZhbHVlKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRWYWx1ZSh0YXJnZXQpO1xyXG4gICAgaWYgKHRoaXMuaXNNZW51KSB7XHJcbiAgICAgIGlmICghdGhpcy5zZWNvbmRUZXh0Qm94KSB7XHJcbiAgICAgICAgdGhpcy5pdGVtLmtleSA9IHZhbHVlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaXRlbS5rZXlUbyA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoIXRoaXMuc2Vjb25kVGV4dEJveCkge1xyXG4gICAgICAgIGlmICh0aGlzLnZhcmlhYmxlLmJhc2ljVHlwZSA9PT0gJ1JhbmdlJyB8fCB0aGlzLnZhcmlhYmxlLnR5cGUgPT09ICdEYXRlVGltZScpIHtcclxuICAgICAgICAgIHRoaXMudmFyaWFibGUua2V5ID0gdmFsdWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMudmFyaWFibGUudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy52YXJpYWJsZS5rZXlUbyA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRWYWx1ZSh0YXJnZXQ6IGFueSk6IGFueSB7XHJcbiAgICBpZiAodGhpcy52YXJpYWJsZS50eXBlID09PSAnRGF0ZVRpbWUnKSB7XHJcbiAgICAgIGlmICh0aGlzLmVsZW1lbnQub2xkVmFsdWUgPT09IHRhcmdldC52YWx1ZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHRpbWVTdHJpbmcgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGlzQW1lcmljYW5Gb3JtYXQgPSB0aW1lU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYW0nKSA+PSAwIHx8IHRpbWVTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdwbScpID49IDA7XHJcbiAgICAgICAgY29uc3QgZm9ybWF0RGF0ZSA9IGlzQW1lcmljYW5Gb3JtYXQgPyAnTU0vZGQveXl5eScgOiAnZGQuTU0ueXl5eSc7XHJcbiAgICAgICAgbGV0IGZvcm1hdCA9IGZvcm1hdERhdGUgKyAoaXNBbWVyaWNhbkZvcm1hdCA/ICcgaDptbTpzcyB0dCcgOiAnIGhoOm1tOnNzJyk7XHJcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGUuZGF0ZVRpbWVUeXBlID09PSAnRGF0ZScpIHtcclxuICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdERhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnZhcmlhYmxlLmRhdGVUaW1lVHlwZSA9PT0gJ1RpbWUnKSB7XHJcbiAgICAgICAgICBmb3JtYXQgPSAnaGg6bW06c3MnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5oZWxwZXIuZ2V0RGF0ZVRpbWVGcm9tU3RyaW5nKHRhcmdldC52YWx1ZSwgdGhpcy5tb2RlbC5vcHRpb25zLmFwcGVhcmFuY2UucGFyYW1ldGVyc1BhbmVsRGF0ZUZvcm1hdCB8fCBmb3JtYXQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhlbHBlci5nZXREYXRlVGltZU9iamVjdChkYXRlKTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGFsZXJ0KGUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdGFyZ2V0LnZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IHdpZHRoKCk6IG51bWJlciB7XHJcbiAgICBsZXQgd2lkdGggPSAyMTA7XHJcbiAgICBpZiAodGhpcy52YXJpYWJsZS5iYXNpY1R5cGUgPT09ICdSYW5nZScpIHtcclxuICAgICAgd2lkdGggPSAxNDA7XHJcbiAgICAgIGlmICh0aGlzLnZhcmlhYmxlLnR5cGUgPT09ICdHdWlkJyB8fCB0aGlzLnZhcmlhYmxlLnR5cGUgPT09ICdTdHJpbmcnKSB7XHJcbiAgICAgICAgd2lkdGggPSAxOTA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMudmFyaWFibGUudHlwZSA9PT0gJ0RhdGVUaW1lJykge1xyXG4gICAgICAgIHdpZHRoID0gMjM1O1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnZhcmlhYmxlLnR5cGUgPT09ICdDaGFyJykge1xyXG4gICAgICAgIHdpZHRoID0gNjA7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLnZhcmlhYmxlLnR5cGUgPT09ICdHdWlkJykge1xyXG4gICAgICAgIHdpZHRoID0gMjY1O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdpZHRoID0gMjEwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gd2lkdGg7XHJcbiAgfVxyXG5cclxuICBnZXQgY29sb3IoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiAhdGhpcy52YXJpYWJsZS5pc051bGxcclxuICAgICAgPyAodGhpcy5tb2RlbC5vcHRpb25zLnRvb2xiYXIuZm9udENvbG9yICYmIHRoaXMubW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRDb2xvciAhPT0gJ0VtcHR5JyA/IHRoaXMubW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRDb2xvciA6ICcjNDQ0NDQ0JylcclxuICAgICAgOiB0aGlzLnZhcmlhYmxlLnR5cGUgPT09ICdEYXRlVGltZScgPyAndHJhbnNwYXJlbnQnIDogJyNjNmM2YzYnO1xyXG4gIH1cclxufVxyXG4iXX0=