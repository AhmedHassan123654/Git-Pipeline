import { __decorate } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { HelperService } from '../services/helper.service';
import { DashboardService } from '../services/dashboard.service';
let DashboardsPanelComponent = class DashboardsPanelComponent {
    constructor(model, helper, dashboardService) {
        this.model = model;
        this.helper = helper;
        this.dashboardService = dashboardService;
        this.imagesPath = 'Dashboards.Actions.Light.';
    }
    ngOnInit() { }
    ngAfterViewInit() {
        this.model.controls.navigatePanel.el = this.element;
    }
    get dbsMode() {
        return this.dashboardsCount > 0 && this.reportsCount === 0;
    }
    get dashboardsCount() {
        var _a, _b;
        let count = 0;
        if ((_b = (_a = this.model) === null || _a === void 0 ? void 0 : _a.reportParams) === null || _b === void 0 ? void 0 : _b.dashboards) {
            this.model.reportParams.dashboards.forEach(i => {
                if (i['type'] === 'Dashboard') {
                    count++;
                }
            });
        }
        return count;
    }
    get reportsCount() {
        var _a, _b;
        if ((_b = (_a = this.model) === null || _a === void 0 ? void 0 : _a.reportParams) === null || _b === void 0 ? void 0 : _b.dashboards) {
            return this.model.reportParams.dashboards.length - this.dashboardsCount;
        }
        return 0;
    }
    get previewSettings() {
        return this.model.reportParams.previewSettings || {};
    }
};
DashboardsPanelComponent.ctorParameters = () => [
    { type: ModelService },
    { type: HelperService },
    { type: DashboardService }
];
__decorate([
    ViewChild('element')
], DashboardsPanelComponent.prototype, "element", void 0);
DashboardsPanelComponent = __decorate([
    Component({
        selector: 'sti-dashboards-panel',
        template: `
    <div #element
      [class]="'stiJsViewerToolBar' + (model.options.toolbar.displayMode == 'Separated' ? ' stiJsViewerToolBarSeparated' : '')"
      [style.fontFamily]="model.options.toolbar.fontFamily"
      [style.fontColor]="helper.val(model.options.toolbar.fontColor)"
      [style.display]="model.controls.dashboardsPanel.visible ? '' : 'none'"
      [style.background]="dbsMode ? 'transparent' : ''"
      [style.borderColor]="dbsMode ? 'transparent' : ''">
      <div [style.paddingTop]="model.options.toolbar.displayMode == 'Simple' ? '2px' : ''">
        <table class="stiJsViewerToolBarTable" cellpadding="0" cellspacing="0" style="margin: 0px; box-sizing: border-box;"
          [style.border]="model.options.toolbar.displayMode == 'Separated' ? '0px' : ''"
          [style.background]="dbsMode ? 'transparent' : ''"
          [style.borderColor]="dbsMode ? 'transparent' : ''">
          <tbody>
            <tr class="stiJsViewerClearAllStyles">
              <td class="stiJsViewerClearAllStyles" style="width: 100%;">
                <table class="stiJsViewerToolBarTable" cellpadding="0" cellspacing="0"
                  [style.align]="model.options.appearance.rightToLeft ? 'right' : (model.options.toolbar.alignment == 'default' ? 'left' : model.options.toolbar.alignment)">
                  <tbody>
                      <tr>
                         <td *ngFor="let info of model.reportParams.dashboards; let i=index">
                            <sti-dashboard-button
                              [info]="info"
                              [dbsMode]="dbsMode"
                              [display]="dashboardsCount == 1 && reportsCount == 0 ? 'none': null">
                            </sti-dashboard-button>
                        </td>
                      </tr>
                  </tbody>
                </table>
              </td>

              <!-- actions table -->
              <td class="stiJsViewerClearAllStyles">
                <table class="stiJsViewerToolBarTable" cellpadding="0" cellspacing="0" style="margin-right:2px">
                  <tbody>
                      <tr>
                        <td *ngIf="model.options.toolbar.showRefreshButton && model.options.toolbar.visible">
                          <sti-button [imageName]="imagesPath + 'Refresh.png'"
                            [tooltip]="model.loc('Refresh')"
                            [helpLink]="helper.helpLinks['DashboardToolbar']"
                            [margin]="'2px 0 2px 2px'"
                            [actionName]="'Refresh'"
                            [height]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [width]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [innerTableWidth]="model.options.toolbar.displayMode == 'Separated' ? '100%': null"
                            [imageCellTextAlign]="model.options.toolbar.displayMode == 'Separated' ? 'center': null"
                            [display]="previewSettings.dashboardToolBar && previewSettings.dashboardRefreshButton ? '' : 'none'">
                          </sti-button>
                        </td>

                        <td *ngIf="model.options.toolbar.showParametersButton && model.options.toolbar.visible">
                          <sti-button [imageName]="imagesPath + 'Parameters.png'"
                            [tooltip]="model.loc('Parameters')"
                            [helpLink]="helper.helpLinks['DashboardToolbar']"
                            [margin]="'2px 0 2px 2px'"
                            [actionName]="'Parameters'"
                            [height]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [width]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [innerTableWidth]="model.options.toolbar.displayMode == 'Separated' ? '100%': null"
                            [imageCellTextAlign]="model.options.toolbar.displayMode == 'Separated' ? 'center': null">
                          </sti-button>
                        </td>

                        <td *ngIf="model.options.toolbar.showOpenButton && model.options.toolbar.visible">
                          <sti-button [imageName]="imagesPath + 'Open.png'"
                            [tooltip]="model.loc('Open')"
                            [helpLink]="helper.helpLinks['DashboardToolbar']"
                            [margin]="'2px 0 2px 2px'"
                            [actionName]="'OpenDashboard'"
                            [height]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [width]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [innerTableWidth]="model.options.toolbar.displayMode == 'Separated' ? '100%': null"
                            [imageCellTextAlign]="model.options.toolbar.displayMode == 'Separated' ? 'center': null"
                            [display]="previewSettings.dashboardToolBar && previewSettings.dashboardOpenButton ? '' : 'none'">
                          </sti-button>
                        </td>

                        <td *ngIf="model.options.toolbar.showDesignButton && model.options.toolbar.visible">
                          <sti-button [imageName]="imagesPath + 'Edit.png'"
                            [tooltip]="model.loc('Edit')"
                            [helpLink]="helper.helpLinks['DashboardToolbar']"
                            [margin]="'2px 0 2px 2px'"
                            [actionName]="'postDesign'"
                            [height]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [width]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [innerTableWidth]="model.options.toolbar.displayMode == 'Separated' ? '100%': null"
                            [imageCellTextAlign]="model.options.toolbar.displayMode == 'Separated' ? 'center': null"
                            [display]="previewSettings.dashboardToolBar && previewSettings.dashboardEditButton ? '' : 'none'">
                          </sti-button>
                        </td>

                        <td *ngIf="model.options.toolbar.showFullScreenButton && model.options.toolbar.visible">
                          <sti-button [imageName]="imagesPath + 'CloseFullScreen.png'"
                            [caption]="model.loc('Close')"
                            [tooltip]="model.loc('FullScreen')"
                            [helpLink]="helper.helpLinks['DashboardToolbar']"
                            [margin]="'2px 0 2px 2px'"
                            [actionName]="'postFullScreen'"
                            [height]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [innerTableWidth]="model.options.toolbar.displayMode == 'Separated' ? '100%': null"
                            [imageCellTextAlign]="model.options.toolbar.displayMode == 'Separated' ? 'center': null"
                            [display]="previewSettings.dashboardToolBar && previewSettings.dashboardFullScreenButton ? '' : 'none'">
                          </sti-button>
                        </td>

                        <td *ngIf="model.options.toolbar.showSaveButton && model.options.toolbar.visible">
                          <sti-button [imageName]="imagesPath + 'Menu.png'"
                            [tooltip]="model.loc('Save')"
                            [helpLink]="helper.helpLinks['DashboardToolbar']"
                            [margin]="'2px 0 2px 2px'"
                            [actionName]="'ExportDashboard'"
                            [height]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [width]="model.options.toolbar.displayMode == 'Separated' ? (dbsMode ? (model.options.isTouchDevice ? '28px' : '23px') : '28px') : null"
                            [innerTableWidth]="model.options.toolbar.displayMode == 'Separated' ? '100%': null"
                            [imageCellTextAlign]="model.options.toolbar.displayMode == 'Separated' ? 'center': null"
                            [display]="previewSettings.dashboardToolBar && previewSettings.dashboardMenuButton && ((previewSettings.dashboardShowReportSnapshots && !model.options.jsMode) || previewSettings.dashboardShowExports) ? '' :'none'">
                          </sti-button>
                        </td>
                      </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  `
    })
], DashboardsPanelComponent);
export { DashboardsPanelComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGFzaGJvYXJkcy1wYW5lbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvZGFzaGJvYXJkcy1wYW5lbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXFDLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN4RixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDekQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBdUlqRSxJQUFhLHdCQUF3QixHQUFyQyxNQUFhLHdCQUF3QjtJQU1uQyxZQUFtQixLQUFtQixFQUFTLE1BQXFCLEVBQVMsZ0JBQWtDO1FBQTVGLFVBQUssR0FBTCxLQUFLLENBQWM7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFlO1FBQVMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUZ4RyxlQUFVLEdBQUcsMkJBQTJCLENBQUM7SUFFbUUsQ0FBQztJQUVwSCxRQUFRLEtBQUssQ0FBQztJQUVkLGVBQWU7UUFDYixJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDdEQsQ0FBQztJQUdELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLFlBQVksS0FBSyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVELElBQUksZUFBZTs7UUFDakIsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsZ0JBQUksSUFBSSxDQUFDLEtBQUssMENBQUUsWUFBWSwwQ0FBRSxVQUFVLEVBQUU7WUFDdkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsVUFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3JELElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLFdBQVcsRUFBRTtvQkFDN0IsS0FBSyxFQUFFLENBQUM7aUJBQ1Q7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsSUFBSSxZQUFZOztRQUNkLGdCQUFJLElBQUksQ0FBQyxLQUFLLDBDQUFFLFlBQVksMENBQUUsVUFBVSxFQUFFO1lBQ3hDLE9BQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsVUFBaUIsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztTQUNqRjtRQUNELE9BQU8sQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVELElBQUksZUFBZTtRQUNqQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLGVBQWUsSUFBSSxFQUFFLENBQUM7SUFDdkQsQ0FBQztDQUNGLENBQUE7O1lBbkMyQixZQUFZO1lBQWlCLGFBQWE7WUFBMkIsZ0JBQWdCOztBQUp6RjtJQUFyQixTQUFTLENBQUMsU0FBUyxDQUFDO3lEQUFxQjtBQUYvQix3QkFBd0I7SUFySXBDLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSxzQkFBc0I7UUFDaEMsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQWdJVDtLQUNGLENBQUM7R0FFVyx3QkFBd0IsQ0F5Q3BDO1NBekNZLHdCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBBZnRlclZpZXdJbml0LCBFbGVtZW50UmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbW9kZWwuc2VydmljZSc7XHJcbmltcG9ydCB7IEhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9kYXNoYm9hcmQuc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3N0aS1kYXNoYm9hcmRzLXBhbmVsJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPGRpdiAjZWxlbWVudFxyXG4gICAgICBbY2xhc3NdPVwiJ3N0aUpzVmlld2VyVG9vbEJhcicgKyAobW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJyBzdGlKc1ZpZXdlclRvb2xCYXJTZXBhcmF0ZWQnIDogJycpXCJcclxuICAgICAgW3N0eWxlLmZvbnRGYW1pbHldPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRGYW1pbHlcIlxyXG4gICAgICBbc3R5bGUuZm9udENvbG9yXT1cImhlbHBlci52YWwobW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRDb2xvcilcIlxyXG4gICAgICBbc3R5bGUuZGlzcGxheV09XCJtb2RlbC5jb250cm9scy5kYXNoYm9hcmRzUGFuZWwudmlzaWJsZSA/ICcnIDogJ25vbmUnXCJcclxuICAgICAgW3N0eWxlLmJhY2tncm91bmRdPVwiZGJzTW9kZSA/ICd0cmFuc3BhcmVudCcgOiAnJ1wiXHJcbiAgICAgIFtzdHlsZS5ib3JkZXJDb2xvcl09XCJkYnNNb2RlID8gJ3RyYW5zcGFyZW50JyA6ICcnXCI+XHJcbiAgICAgIDxkaXYgW3N0eWxlLnBhZGRpbmdUb3BdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTaW1wbGUnID8gJzJweCcgOiAnJ1wiPlxyXG4gICAgICAgIDx0YWJsZSBjbGFzcz1cInN0aUpzVmlld2VyVG9vbEJhclRhYmxlXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgc3R5bGU9XCJtYXJnaW46IDBweDsgYm94LXNpemluZzogYm9yZGVyLWJveDtcIlxyXG4gICAgICAgICAgW3N0eWxlLmJvcmRlcl09XCJtb2RlbC5vcHRpb25zLnRvb2xiYXIuZGlzcGxheU1vZGUgPT0gJ1NlcGFyYXRlZCcgPyAnMHB4JyA6ICcnXCJcclxuICAgICAgICAgIFtzdHlsZS5iYWNrZ3JvdW5kXT1cImRic01vZGUgPyAndHJhbnNwYXJlbnQnIDogJydcIlxyXG4gICAgICAgICAgW3N0eWxlLmJvcmRlckNvbG9yXT1cImRic01vZGUgPyAndHJhbnNwYXJlbnQnIDogJydcIj5cclxuICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBzdHlsZT1cIndpZHRoOiAxMDAlO1wiPlxyXG4gICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPVwic3RpSnNWaWV3ZXJUb29sQmFyVGFibGVcIiBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIlxyXG4gICAgICAgICAgICAgICAgICBbc3R5bGUuYWxpZ25dPVwibW9kZWwub3B0aW9ucy5hcHBlYXJhbmNlLnJpZ2h0VG9MZWZ0ID8gJ3JpZ2h0JyA6IChtb2RlbC5vcHRpb25zLnRvb2xiYXIuYWxpZ25tZW50ID09ICdkZWZhdWx0JyA/ICdsZWZ0JyA6IG1vZGVsLm9wdGlvbnMudG9vbGJhci5hbGlnbm1lbnQpXCI+XHJcbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdGb3I9XCJsZXQgaW5mbyBvZiBtb2RlbC5yZXBvcnRQYXJhbXMuZGFzaGJvYXJkczsgbGV0IGk9aW5kZXhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktZGFzaGJvYXJkLWJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW5mb109XCJpbmZvXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Ric01vZGVdPVwiZGJzTW9kZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkaXNwbGF5XT1cImRhc2hib2FyZHNDb3VudCA9PSAxICYmIHJlcG9ydHNDb3VudCA9PSAwID8gJ25vbmUnOiBudWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1kYXNoYm9hcmQtYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgPCEtLSBhY3Rpb25zIHRhYmxlIC0tPlxyXG4gICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInN0aUpzVmlld2VyVG9vbEJhclRhYmxlXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6MnB4XCI+XHJcbiAgICAgICAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkICpuZ0lmPVwibW9kZWwub3B0aW9ucy50b29sYmFyLnNob3dSZWZyZXNoQnV0dG9uICYmIG1vZGVsLm9wdGlvbnMudG9vbGJhci52aXNpYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1idXR0b24gW2ltYWdlTmFtZV09XCJpbWFnZXNQYXRoICsgJ1JlZnJlc2gucG5nJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ1JlZnJlc2gnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaGVscExpbmtdPVwiaGVscGVyLmhlbHBMaW5rc1snRGFzaGJvYXJkVG9vbGJhciddXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzJweCAwIDJweCAycHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFthY3Rpb25OYW1lXT1cIidSZWZyZXNoJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9PSAnU2VwYXJhdGVkJyA/IChkYnNNb2RlID8gKG1vZGVsLm9wdGlvbnMuaXNUb3VjaERldmljZSA/ICcyOHB4JyA6ICcyM3B4JykgOiAnMjhweCcpIDogbnVsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gKGRic01vZGUgPyAobW9kZWwub3B0aW9ucy5pc1RvdWNoRGV2aWNlID8gJzI4cHgnIDogJzIzcHgnKSA6ICcyOHB4JykgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbm5lclRhYmxlV2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJzEwMCUnOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbWFnZUNlbGxUZXh0QWxpZ25dPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJ2NlbnRlcic6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Rpc3BsYXldPVwicHJldmlld1NldHRpbmdzLmRhc2hib2FyZFRvb2xCYXIgJiYgcHJldmlld1NldHRpbmdzLmRhc2hib2FyZFJlZnJlc2hCdXR0b24gPyAnJyA6ICdub25lJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdJZj1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5zaG93UGFyYW1ldGVyc0J1dHRvbiAmJiBtb2RlbC5vcHRpb25zLnRvb2xiYXIudmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktYnV0dG9uIFtpbWFnZU5hbWVdPVwiaW1hZ2VzUGF0aCArICdQYXJhbWV0ZXJzLnBuZydcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdQYXJhbWV0ZXJzJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2hlbHBMaW5rXT1cImhlbHBlci5oZWxwTGlua3NbJ0Rhc2hib2FyZFRvb2xiYXInXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicycHggMCAycHggMnB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYWN0aW9uTmFtZV09XCInUGFyYW1ldGVycydcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2hlaWdodF09XCJtb2RlbC5vcHRpb25zLnRvb2xiYXIuZGlzcGxheU1vZGUgPT0gJ1NlcGFyYXRlZCcgPyAoZGJzTW9kZSA/IChtb2RlbC5vcHRpb25zLmlzVG91Y2hEZXZpY2UgPyAnMjhweCcgOiAnMjNweCcpIDogJzI4cHgnKSA6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3dpZHRoXT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9PSAnU2VwYXJhdGVkJyA/IChkYnNNb2RlID8gKG1vZGVsLm9wdGlvbnMuaXNUb3VjaERldmljZSA/ICcyOHB4JyA6ICcyM3B4JykgOiAnMjhweCcpIDogbnVsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW5uZXJUYWJsZVdpZHRoXT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9PSAnU2VwYXJhdGVkJyA/ICcxMDAlJzogbnVsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW1hZ2VDZWxsVGV4dEFsaWduXT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9PSAnU2VwYXJhdGVkJyA/ICdjZW50ZXInOiBudWxsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRkICpuZ0lmPVwibW9kZWwub3B0aW9ucy50b29sYmFyLnNob3dPcGVuQnV0dG9uICYmIG1vZGVsLm9wdGlvbnMudG9vbGJhci52aXNpYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1idXR0b24gW2ltYWdlTmFtZV09XCJpbWFnZXNQYXRoICsgJ09wZW4ucG5nJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ09wZW4nKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaGVscExpbmtdPVwiaGVscGVyLmhlbHBMaW5rc1snRGFzaGJvYXJkVG9vbGJhciddXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzJweCAwIDJweCAycHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFthY3Rpb25OYW1lXT1cIidPcGVuRGFzaGJvYXJkJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9PSAnU2VwYXJhdGVkJyA/IChkYnNNb2RlID8gKG1vZGVsLm9wdGlvbnMuaXNUb3VjaERldmljZSA/ICcyOHB4JyA6ICcyM3B4JykgOiAnMjhweCcpIDogbnVsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gKGRic01vZGUgPyAobW9kZWwub3B0aW9ucy5pc1RvdWNoRGV2aWNlID8gJzI4cHgnIDogJzIzcHgnKSA6ICcyOHB4JykgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbm5lclRhYmxlV2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJzEwMCUnOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbWFnZUNlbGxUZXh0QWxpZ25dPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJ2NlbnRlcic6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Rpc3BsYXldPVwicHJldmlld1NldHRpbmdzLmRhc2hib2FyZFRvb2xCYXIgJiYgcHJldmlld1NldHRpbmdzLmRhc2hib2FyZE9wZW5CdXR0b24gPyAnJyA6ICdub25lJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdJZj1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5zaG93RGVzaWduQnV0dG9uICYmIG1vZGVsLm9wdGlvbnMudG9vbGJhci52aXNpYmxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1idXR0b24gW2ltYWdlTmFtZV09XCJpbWFnZXNQYXRoICsgJ0VkaXQucG5nJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ0VkaXQnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaGVscExpbmtdPVwiaGVscGVyLmhlbHBMaW5rc1snRGFzaGJvYXJkVG9vbGJhciddXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzJweCAwIDJweCAycHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFthY3Rpb25OYW1lXT1cIidwb3N0RGVzaWduJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9PSAnU2VwYXJhdGVkJyA/IChkYnNNb2RlID8gKG1vZGVsLm9wdGlvbnMuaXNUb3VjaERldmljZSA/ICcyOHB4JyA6ICcyM3B4JykgOiAnMjhweCcpIDogbnVsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gKGRic01vZGUgPyAobW9kZWwub3B0aW9ucy5pc1RvdWNoRGV2aWNlID8gJzI4cHgnIDogJzIzcHgnKSA6ICcyOHB4JykgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbm5lclRhYmxlV2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJzEwMCUnOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbWFnZUNlbGxUZXh0QWxpZ25dPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJ2NlbnRlcic6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Rpc3BsYXldPVwicHJldmlld1NldHRpbmdzLmRhc2hib2FyZFRvb2xCYXIgJiYgcHJldmlld1NldHRpbmdzLmRhc2hib2FyZEVkaXRCdXR0b24gPyAnJyA6ICdub25lJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdJZj1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5zaG93RnVsbFNjcmVlbkJ1dHRvbiAmJiBtb2RlbC5vcHRpb25zLnRvb2xiYXIudmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktYnV0dG9uIFtpbWFnZU5hbWVdPVwiaW1hZ2VzUGF0aCArICdDbG9zZUZ1bGxTY3JlZW4ucG5nJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbl09XCJtb2RlbC5sb2MoJ0Nsb3NlJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdGdWxsU2NyZWVuJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2hlbHBMaW5rXT1cImhlbHBlci5oZWxwTGlua3NbJ0Rhc2hib2FyZFRvb2xiYXInXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicycHggMCAycHggMnB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYWN0aW9uTmFtZV09XCIncG9zdEZ1bGxTY3JlZW4nXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtoZWlnaHRdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gKGRic01vZGUgPyAobW9kZWwub3B0aW9ucy5pc1RvdWNoRGV2aWNlID8gJzI4cHgnIDogJzIzcHgnKSA6ICcyOHB4JykgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbm5lclRhYmxlV2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJzEwMCUnOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbWFnZUNlbGxUZXh0QWxpZ25dPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJ2NlbnRlcic6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Rpc3BsYXldPVwicHJldmlld1NldHRpbmdzLmRhc2hib2FyZFRvb2xCYXIgJiYgcHJldmlld1NldHRpbmdzLmRhc2hib2FyZEZ1bGxTY3JlZW5CdXR0b24gPyAnJyA6ICdub25lJ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3RpLWJ1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCAqbmdJZj1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5zaG93U2F2ZUJ1dHRvbiAmJiBtb2RlbC5vcHRpb25zLnRvb2xiYXIudmlzaWJsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktYnV0dG9uIFtpbWFnZU5hbWVdPVwiaW1hZ2VzUGF0aCArICdNZW51LnBuZydcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdTYXZlJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2hlbHBMaW5rXT1cImhlbHBlci5oZWxwTGlua3NbJ0Rhc2hib2FyZFRvb2xiYXInXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicycHggMCAycHggMnB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYWN0aW9uTmFtZV09XCInRXhwb3J0RGFzaGJvYXJkJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaGVpZ2h0XT1cIm1vZGVsLm9wdGlvbnMudG9vbGJhci5kaXNwbGF5TW9kZSA9PSAnU2VwYXJhdGVkJyA/IChkYnNNb2RlID8gKG1vZGVsLm9wdGlvbnMuaXNUb3VjaERldmljZSA/ICcyOHB4JyA6ICcyM3B4JykgOiAnMjhweCcpIDogbnVsbFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gKGRic01vZGUgPyAobW9kZWwub3B0aW9ucy5pc1RvdWNoRGV2aWNlID8gJzI4cHgnIDogJzIzcHgnKSA6ICcyOHB4JykgOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbm5lclRhYmxlV2lkdGhdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJzEwMCUnOiBudWxsXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbWFnZUNlbGxUZXh0QWxpZ25dPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmRpc3BsYXlNb2RlID09ICdTZXBhcmF0ZWQnID8gJ2NlbnRlcic6IG51bGxcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2Rpc3BsYXldPVwicHJldmlld1NldHRpbmdzLmRhc2hib2FyZFRvb2xCYXIgJiYgcHJldmlld1NldHRpbmdzLmRhc2hib2FyZE1lbnVCdXR0b24gJiYgKChwcmV2aWV3U2V0dGluZ3MuZGFzaGJvYXJkU2hvd1JlcG9ydFNuYXBzaG90cyAmJiAhbW9kZWwub3B0aW9ucy5qc01vZGUpIHx8IHByZXZpZXdTZXR0aW5ncy5kYXNoYm9hcmRTaG93RXhwb3J0cykgPyAnJyA6J25vbmUnXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgPC90YWJsZT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgRGFzaGJvYXJkc1BhbmVsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgQFZpZXdDaGlsZCgnZWxlbWVudCcpIGVsZW1lbnQ6IEVsZW1lbnRSZWY7XHJcblxyXG4gIHB1YmxpYyBpbWFnZXNQYXRoID0gJ0Rhc2hib2FyZHMuQWN0aW9ucy5MaWdodC4nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgbW9kZWw6IE1vZGVsU2VydmljZSwgcHVibGljIGhlbHBlcjogSGVscGVyU2VydmljZSwgcHVibGljIGRhc2hib2FyZFNlcnZpY2U6IERhc2hib2FyZFNlcnZpY2UpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vZGVsLmNvbnRyb2xzLm5hdmlnYXRlUGFuZWwuZWwgPSB0aGlzLmVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0IGRic01vZGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5kYXNoYm9hcmRzQ291bnQgPiAwICYmIHRoaXMucmVwb3J0c0NvdW50ID09PSAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRhc2hib2FyZHNDb3VudCgpOiBudW1iZXIge1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuICAgIGlmICh0aGlzLm1vZGVsPy5yZXBvcnRQYXJhbXM/LmRhc2hib2FyZHMpIHtcclxuICAgICAgKHRoaXMubW9kZWwucmVwb3J0UGFyYW1zLmRhc2hib2FyZHMgYXMgW10pLmZvckVhY2goaSA9PiB7XHJcbiAgICAgICAgaWYgKGlbJ3R5cGUnXSA9PT0gJ0Rhc2hib2FyZCcpIHtcclxuICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb3VudDtcclxuICB9XHJcblxyXG4gIGdldCByZXBvcnRzQ291bnQoKTogbnVtYmVyIHtcclxuICAgIGlmICh0aGlzLm1vZGVsPy5yZXBvcnRQYXJhbXM/LmRhc2hib2FyZHMpIHtcclxuICAgICAgcmV0dXJuICh0aGlzLm1vZGVsLnJlcG9ydFBhcmFtcy5kYXNoYm9hcmRzIGFzIFtdKS5sZW5ndGggLSB0aGlzLmRhc2hib2FyZHNDb3VudDtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHByZXZpZXdTZXR0aW5ncygpOiBhbnkge1xyXG4gICAgcmV0dXJuIHRoaXMubW9kZWwucmVwb3J0UGFyYW1zLnByZXZpZXdTZXR0aW5ncyB8fCB7fTtcclxuICB9XHJcbn1cclxuIl19