import { __decorate } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { ControllerService } from '../services/controller.service';
import { HelperService } from '../services/helper.service';
import { FormService } from '../forms/form.service';
let AboutPanelComponent = class AboutPanelComponent {
    constructor(model, controller, helper, formService) {
        this.model = model;
        this.controller = controller;
        this.helper = helper;
        this.formService = formService;
        this.year = new Date().getFullYear();
        this.top = 0;
        this.left = 0;
        this.opacity = 0;
        controller.getActionMessage().subscribe((message) => {
            if (message.action === 'About') {
                this.formService.form = { name: 'about', left: 0, top: 0, isMooving: false, level: 2 };
                this.opacity = 0;
                setTimeout(() => {
                    this.top = this.model.viewerSize.height / 2 - this.element.nativeElement.offsetHeight / 2;
                    this.left = this.model.viewerSize.width / 2 - this.element.nativeElement.offsetWidth / 2;
                    this.opacity = 1;
                });
            }
        });
    }
    ngOnInit() { }
    close() {
        this.formService.closeForm('about');
    }
    click(event) {
        if (event) {
            event.stopPropagation();
            event.preventDefault();
        }
        this.helper.openNewWindow('https://www.stimulsoft.com');
    }
    isLicensed() {
        return !this.model.options.cloudMode && !this.model.options.serverMode && !this.model.options.standaloneJsMode &&
            !this.model.options.reportDesignerMode && !this.model.options.licenseIsValid;
    }
    get userLabel() {
        let userName = this.model.options.licenseUserName || '';
        if (this.isLicensed()) {
            if (userName) {
                userName += ', ';
            }
            return userName + this.helper.getBackText(true) + ' Version';
        }
        else {
            return userName;
        }
    }
};
AboutPanelComponent.ctorParameters = () => [
    { type: ModelService },
    { type: ControllerService },
    { type: HelperService },
    { type: FormService }
];
__decorate([
    ViewChild('element')
], AboutPanelComponent.prototype, "element", void 0);
AboutPanelComponent = __decorate([
    Component({
        selector: 'sti-about-panel',
        template: `
    <div #element class="stiJsViewerAboutPanel" style="background-size: contain;"
      [style.display]="formService.form?.name == 'about' ? '' : 'none'"
      [style.left.px]="left"
      [style.top.px]="top"
      [style.opacity]="opacity"
      (click)="close()" >
      <div class="stiJsViewerAboutPanelHeader">
        Stimulsoft Reports
      </div>
      <img src="{{model.img('About.png')}}" style="margin-top: 30px; height: 94px; width: 94px;">
      <div class="stiJsViewerAboutPanelCopyright">
        {{'Copyright 2003-' + year + ' Stimulsoft'}}
      </div>
      <div class="stiJsViewerAboutPanelVersion">
        {{model.options.productVersion?.trim()}}, {{model.options?.frameworkType}}, Angular
      </div>
      <div class="stiJsViewerAboutPanelVersion">
        All rights reserved
      </div>
      <div class="stiJsViewerAboutPanelVersion" style="margin-top: 20px;font-weight: bold; "
        [style.color]="isLicensed() ? 'red' : '#444444'"
        [style.display]="isLicensed() || userLabel ? '' : 'none'">
        {{userLabel}}
      </div>
      <div class="stiJsViewerFormSeparator" style="margin-top: 20px;">
      </div>
      <div class="stiJsViewerAboutPanelStiLink" (click)='click($event)'>
        www.stimulsoft.com
      </div>
    </div>
  `
    })
], AboutPanelComponent);
export { AboutPanelComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJvdXQtcGFuZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vc3RpbXVsc29mdC12aWV3ZXItYW5ndWxhci8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2Fib3V0LXBhbmVsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQWMsTUFBTSxlQUFlLENBQUM7QUFDekUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBRW5FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFzQ3BELElBQWEsbUJBQW1CLEdBQWhDLE1BQWEsbUJBQW1CO0lBVTlCLFlBQW1CLEtBQW1CLEVBQVMsVUFBNkIsRUFBUyxNQUFxQixFQUNqRyxXQUF3QjtRQURkLFVBQUssR0FBTCxLQUFLLENBQWM7UUFBUyxlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUFTLFdBQU0sR0FBTixNQUFNLENBQWU7UUFDakcsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFQakMsU0FBSSxHQUFXLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFeEMsUUFBRyxHQUFHLENBQUMsQ0FBQztRQUNSLFNBQUksR0FBRyxDQUFDLENBQUM7UUFDVCxZQUFPLEdBQUcsQ0FBQyxDQUFDO1FBSVYsVUFBVSxDQUFDLGdCQUFnQixFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsT0FBZ0IsRUFBRSxFQUFFO1lBQzNELElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxPQUFPLEVBQUU7Z0JBQzlCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0JBQ3ZGLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dCQUNqQixVQUFVLENBQUMsR0FBRyxFQUFFO29CQUNkLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO29CQUMxRixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztvQkFDekYsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7Z0JBQ25CLENBQUMsQ0FBQyxDQUFDO2FBQ0o7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRCxRQUFRLEtBQUssQ0FBQztJQUVkLEtBQUs7UUFDSCxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQVU7UUFDZCxJQUFJLEtBQUssRUFBRTtZQUNULEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztZQUN4QixLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDeEI7UUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFRCxVQUFVO1FBQ1IsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGdCQUFnQjtZQUM1RyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLGtCQUFrQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDO0lBQ2pGLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDO1FBQ3hELElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFO1lBQ3JCLElBQUksUUFBUSxFQUFFO2dCQUNaLFFBQVEsSUFBSSxJQUFJLENBQUM7YUFDbEI7WUFDRCxPQUFPLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxVQUFVLENBQUM7U0FDOUQ7YUFBTTtZQUNMLE9BQU8sUUFBUSxDQUFDO1NBQ2pCO0lBQ0gsQ0FBQztDQUNGLENBQUE7O1lBN0MyQixZQUFZO1lBQXFCLGlCQUFpQjtZQUFpQixhQUFhO1lBQ3BGLFdBQVc7O0FBVFg7SUFBckIsU0FBUyxDQUFDLFNBQVMsQ0FBQztvREFBcUI7QUFGL0IsbUJBQW1CO0lBcEMvQixTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsaUJBQWlCO1FBQzNCLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQStCVDtLQUNGLENBQUM7R0FFVyxtQkFBbUIsQ0F1RC9CO1NBdkRZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbW9kZWwuc2VydmljZSc7XHJcbmltcG9ydCB7IENvbnRyb2xsZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY29udHJvbGxlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uL3NlcnZpY2VzL29iamVjdHMnO1xyXG5pbXBvcnQgeyBIZWxwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvaGVscGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGb3JtU2VydmljZSB9IGZyb20gJy4uL2Zvcm1zL2Zvcm0uc2VydmljZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3N0aS1hYm91dC1wYW5lbCcsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgI2VsZW1lbnQgY2xhc3M9XCJzdGlKc1ZpZXdlckFib3V0UGFuZWxcIiBzdHlsZT1cImJhY2tncm91bmQtc2l6ZTogY29udGFpbjtcIlxyXG4gICAgICBbc3R5bGUuZGlzcGxheV09XCJmb3JtU2VydmljZS5mb3JtPy5uYW1lID09ICdhYm91dCcgPyAnJyA6ICdub25lJ1wiXHJcbiAgICAgIFtzdHlsZS5sZWZ0LnB4XT1cImxlZnRcIlxyXG4gICAgICBbc3R5bGUudG9wLnB4XT1cInRvcFwiXHJcbiAgICAgIFtzdHlsZS5vcGFjaXR5XT1cIm9wYWNpdHlcIlxyXG4gICAgICAoY2xpY2spPVwiY2xvc2UoKVwiID5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyQWJvdXRQYW5lbEhlYWRlclwiPlxyXG4gICAgICAgIFN0aW11bHNvZnQgUmVwb3J0c1xyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGltZyBzcmM9XCJ7e21vZGVsLmltZygnQWJvdXQucG5nJyl9fVwiIHN0eWxlPVwibWFyZ2luLXRvcDogMzBweDsgaGVpZ2h0OiA5NHB4OyB3aWR0aDogOTRweDtcIj5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyQWJvdXRQYW5lbENvcHlyaWdodFwiPlxyXG4gICAgICAgIHt7J0NvcHlyaWdodCAyMDAzLScgKyB5ZWFyICsgJyBTdGltdWxzb2Z0J319XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwic3RpSnNWaWV3ZXJBYm91dFBhbmVsVmVyc2lvblwiPlxyXG4gICAgICAgIHt7bW9kZWwub3B0aW9ucy5wcm9kdWN0VmVyc2lvbj8udHJpbSgpfX0sIHt7bW9kZWwub3B0aW9ucz8uZnJhbWV3b3JrVHlwZX19LCBBbmd1bGFyXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwic3RpSnNWaWV3ZXJBYm91dFBhbmVsVmVyc2lvblwiPlxyXG4gICAgICAgIEFsbCByaWdodHMgcmVzZXJ2ZWRcclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzdGlKc1ZpZXdlckFib3V0UGFuZWxWZXJzaW9uXCIgc3R5bGU9XCJtYXJnaW4tdG9wOiAyMHB4O2ZvbnQtd2VpZ2h0OiBib2xkOyBcIlxyXG4gICAgICAgIFtzdHlsZS5jb2xvcl09XCJpc0xpY2Vuc2VkKCkgPyAncmVkJyA6ICcjNDQ0NDQ0J1wiXHJcbiAgICAgICAgW3N0eWxlLmRpc3BsYXldPVwiaXNMaWNlbnNlZCgpIHx8IHVzZXJMYWJlbCA/ICcnIDogJ25vbmUnXCI+XHJcbiAgICAgICAge3t1c2VyTGFiZWx9fVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyRm9ybVNlcGFyYXRvclwiIHN0eWxlPVwibWFyZ2luLXRvcDogMjBweDtcIj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJzdGlKc1ZpZXdlckFib3V0UGFuZWxTdGlMaW5rXCIgKGNsaWNrKT0nY2xpY2soJGV2ZW50KSc+XHJcbiAgICAgICAgd3d3LnN0aW11bHNvZnQuY29tXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIEFib3V0UGFuZWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBAVmlld0NoaWxkKCdlbGVtZW50JykgZWxlbWVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgeWVhcjogbnVtYmVyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG4gIGpzSGVscGVyOiBhbnk7XHJcbiAgdG9wID0gMDtcclxuICBsZWZ0ID0gMDtcclxuICBvcGFjaXR5ID0gMDtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UsIHB1YmxpYyBjb250cm9sbGVyOiBDb250cm9sbGVyU2VydmljZSwgcHVibGljIGhlbHBlcjogSGVscGVyU2VydmljZSxcclxuICAgIHB1YmxpYyBmb3JtU2VydmljZTogRm9ybVNlcnZpY2UpIHtcclxuICAgIGNvbnRyb2xsZXIuZ2V0QWN0aW9uTWVzc2FnZSgpLnN1YnNjcmliZSgobWVzc2FnZTogTWVzc2FnZSkgPT4ge1xyXG4gICAgICBpZiAobWVzc2FnZS5hY3Rpb24gPT09ICdBYm91dCcpIHtcclxuICAgICAgICB0aGlzLmZvcm1TZXJ2aWNlLmZvcm0gPSB7IG5hbWU6ICdhYm91dCcsIGxlZnQ6IDAsIHRvcDogMCwgaXNNb292aW5nOiBmYWxzZSwgbGV2ZWw6IDIgfTtcclxuICAgICAgICB0aGlzLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy50b3AgPSB0aGlzLm1vZGVsLnZpZXdlclNpemUuaGVpZ2h0IC8gMiAtIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCAvIDI7XHJcbiAgICAgICAgICB0aGlzLmxlZnQgPSB0aGlzLm1vZGVsLnZpZXdlclNpemUud2lkdGggLyAyIC0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0V2lkdGggLyAyO1xyXG4gICAgICAgICAgdGhpcy5vcGFjaXR5ID0gMTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuZm9ybVNlcnZpY2UuY2xvc2VGb3JtKCdhYm91dCcpO1xyXG4gIH1cclxuXHJcbiAgY2xpY2soZXZlbnQ6IGFueSkge1xyXG4gICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5oZWxwZXIub3Blbk5ld1dpbmRvdygnaHR0cHM6Ly93d3cuc3RpbXVsc29mdC5jb20nKTtcclxuICB9XHJcblxyXG4gIGlzTGljZW5zZWQoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gIXRoaXMubW9kZWwub3B0aW9ucy5jbG91ZE1vZGUgJiYgIXRoaXMubW9kZWwub3B0aW9ucy5zZXJ2ZXJNb2RlICYmICF0aGlzLm1vZGVsLm9wdGlvbnMuc3RhbmRhbG9uZUpzTW9kZSAmJlxyXG4gICAgICAhdGhpcy5tb2RlbC5vcHRpb25zLnJlcG9ydERlc2lnbmVyTW9kZSAmJiAhdGhpcy5tb2RlbC5vcHRpb25zLmxpY2Vuc2VJc1ZhbGlkO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHVzZXJMYWJlbCgpOiBzdHJpbmcge1xyXG4gICAgbGV0IHVzZXJOYW1lID0gdGhpcy5tb2RlbC5vcHRpb25zLmxpY2Vuc2VVc2VyTmFtZSB8fCAnJztcclxuICAgIGlmICh0aGlzLmlzTGljZW5zZWQoKSkge1xyXG4gICAgICBpZiAodXNlck5hbWUpIHtcclxuICAgICAgICB1c2VyTmFtZSArPSAnLCAnO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB1c2VyTmFtZSArIHRoaXMuaGVscGVyLmdldEJhY2tUZXh0KHRydWUpICsgJyBWZXJzaW9uJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB1c2VyTmFtZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19