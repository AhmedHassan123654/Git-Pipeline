import { __decorate } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { ControllerService } from '../services/controller.service';
import { HelperService } from '../services/helper.service';
let ResourcesPanelComponent = class ResourcesPanelComponent {
    constructor(model, controller, helper) {
        this.model = model;
        this.controller = controller;
        this.helper = helper;
        controller.getMessage().subscribe((message) => {
            var _a;
            if (message.action === 'GetReport' || message.action === 'OpenReport') {
                this.model.controls.resourcesPanel.visible = ((_a = this.model.reportParams.resources) === null || _a === void 0 ? void 0 : _a.length) > 0;
            }
        });
    }
    ngOnInit() { }
    ngAfterViewInit() {
        this.model.controls.resourcesPanel.el = this.element;
    }
    action(resource) {
        const resTypesAllowedViewInBrowser = ['Image', 'Pdf', 'Txt'];
        const viewType = resTypesAllowedViewInBrowser.indexOf(resource.type) >= 0 ? 'View' : 'SaveFile';
        this.controller.postReportResource(resource.name, this.model.options.jsMode ? 'SaveFile' : viewType);
    }
    getResourceImage(resourceType) {
        if (this.model.img('BigResource' + resourceType + '.png') !== '') {
            return 'BigResource' + resourceType + '.png';
        }
        else {
            return 'BigResource.png';
        }
    }
    getMenuItems(resource) {
        const items = [];
        items.push({ name: 'Resource' + 'View', caption: this.model.loc('ButtonView'), value: resource });
        items.push({ name: 'Resource' + 'SaveFile', caption: this.model.loc('SaveFile'), value: resource });
        return items;
    }
    getActionName(resource) {
        if (!resource.id) {
            resource.id = Math.random().toString();
        }
        return 'resource' + resource.name + resource.id;
    }
};
ResourcesPanelComponent.ctorParameters = () => [
    { type: ModelService },
    { type: ControllerService },
    { type: HelperService }
];
__decorate([
    ViewChild('element')
], ResourcesPanelComponent.prototype, "element", void 0);
ResourcesPanelComponent = __decorate([
    Component({
        selector: 'sti-resources-panel',
        template: `
    <div #element style="z-index: 3"
      [style.display]="this.model.controls.resourcesPanel.visible ? '' : 'none'"
      [style.fontFamily]="model.options.toolbar.fontFamily"
      [style.fontColor]="model.options.toolbar.fontColor"
      [class]="'stiJsViewerToolBar' + (model.options.toolbar.displayMode == 'Separated' ? ' stiJsViewerToolBarSeparated' : '')">
      <div [style.paddingTop]="model.options.toolbar.displayMode == 'Simple' ? '2px' : ''">
        <div class="stiJsViewerToolBarTable" style="box-sizing: border-box; display: table;"
          [style.border]="model.options.toolbar.displayMode == 'Separated' ? '0px' : ''">
          <table class="stiJsViewerClearAllStyles" cellpadding="0" cellspacing="0">
            <tbody>
              <tr class="stiJsViewerClearAllStyles">
                <td *ngFor="let resource of model.reportParams.resources" class="stiJsViewerClearAllStyles">
                  <sti-button [caption]="resource.name"
                    [caption2]="helper.getHumanFileSize(resource.size, 1)"
                    [imageName]="getResourceImage(resource.type)"
                    [styleName]="'stiJsViewerFormButton'"
                    [height]="'auto'"
                    [margin]="'3px 0 3px 3px'"
                    [innerTableWidth]="'100%'"
                    [minWidth]="'80px'"
                    [captionAlign]="'left'"
                    [captionPaddingLeft]="'3px'"
                    [captionMaxWidth]="'150px'"
                    [captionLineHeight]="'14px'"
                    [captionWhiteSpace]="'nowrap'"
                    [captionOverflow]="'hidden'"
                    [captionTextOverflow]="'ellipsis'"
                    [imageCellWidth]="'1px'"
                    [imageCellPadding]="'4px 8px 4px 4px'"
                    [menuItems]="getMenuItems(resource)"
                    [resourceButton]="true"
                    [imageSizesWidth]="32"
                    [imageSizesHeight]="32"
                    [actionName]="getActionName(resource)"
                    (action)="action(resource)">
                  </sti-button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  `
    })
], ResourcesPanelComponent);
export { ResourcesPanelComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb3VyY2VzLXBhbmVsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3N0aW11bHNvZnQtdmlld2VyLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9yZXNvdXJjZXMtcGFuZWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUF5QixTQUFTLEVBQWMsTUFBTSxlQUFlLENBQUM7QUFDeEYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBRW5FLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQW9EM0QsSUFBYSx1QkFBdUIsR0FBcEMsTUFBYSx1QkFBdUI7SUFJbEMsWUFBbUIsS0FBbUIsRUFBUyxVQUE2QixFQUFTLE1BQXFCO1FBQXZGLFVBQUssR0FBTCxLQUFLLENBQWM7UUFBUyxlQUFVLEdBQVYsVUFBVSxDQUFtQjtRQUFTLFdBQU0sR0FBTixNQUFNLENBQWU7UUFDeEcsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQWdCLEVBQUUsRUFBRTs7WUFDckQsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLFdBQVcsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLFlBQVksRUFBRTtnQkFDckUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLE9BQU8sR0FBRyxPQUFBLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLFNBQVMsMENBQUUsTUFBTSxJQUFHLENBQUMsQ0FBQzthQUM1RjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELFFBQVEsS0FBSyxDQUFDO0lBRWQsZUFBZTtRQUNiLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN2RCxDQUFDO0lBRUQsTUFBTSxDQUFDLFFBQWtCO1FBQ3ZCLE1BQU0sNEJBQTRCLEdBQUcsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzdELE1BQU0sUUFBUSxHQUFHLDRCQUE0QixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQztRQUNoRyxJQUFJLENBQUMsVUFBVSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3ZHLENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxZQUFvQjtRQUNuQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxZQUFZLEdBQUcsTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ2hFLE9BQU8sYUFBYSxHQUFHLFlBQVksR0FBRyxNQUFNLENBQUM7U0FDOUM7YUFBTTtZQUNMLE9BQU8saUJBQWlCLENBQUM7U0FDMUI7SUFDSCxDQUFDO0lBRUQsWUFBWSxDQUFDLFFBQWtCO1FBQzdCLE1BQU0sS0FBSyxHQUFlLEVBQUUsQ0FBQztRQUM3QixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLFVBQVUsR0FBRyxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQ2xHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLEVBQUUsVUFBVSxHQUFHLFVBQVUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7UUFDcEcsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsYUFBYSxDQUFDLFFBQWtCO1FBQzlCLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFO1lBQ2hCLFFBQVEsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQ3hDO1FBQ0QsT0FBTyxVQUFVLEdBQUcsUUFBUSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDO0lBQ2xELENBQUM7Q0FDRixDQUFBOztZQXpDMkIsWUFBWTtZQUFxQixpQkFBaUI7WUFBaUIsYUFBYTs7QUFGcEY7SUFBckIsU0FBUyxDQUFDLFNBQVMsQ0FBQzt3REFBcUI7QUFGL0IsdUJBQXVCO0lBakRuQyxTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUscUJBQXFCO1FBQy9CLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0E0Q1Q7S0FDRixDQUFDO0dBRVcsdUJBQXVCLENBNkNuQztTQTdDWSx1QkFBdUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgVmlld0NoaWxkLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE1vZGVsU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL21vZGVsLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb250cm9sbGVyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvbnRyb2xsZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIFJlc291cmNlIH0gZnJvbSAnLi4vc2VydmljZXMvb2JqZWN0cyc7XHJcbmltcG9ydCB7IEhlbHBlclNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9oZWxwZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi4vbWVudS9tZW5pLWl0ZW0uY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnc3RpLXJlc291cmNlcy1wYW5lbCcsXHJcbiAgdGVtcGxhdGU6IGBcclxuICAgIDxkaXYgI2VsZW1lbnQgc3R5bGU9XCJ6LWluZGV4OiAzXCJcclxuICAgICAgW3N0eWxlLmRpc3BsYXldPVwidGhpcy5tb2RlbC5jb250cm9scy5yZXNvdXJjZXNQYW5lbC52aXNpYmxlID8gJycgOiAnbm9uZSdcIlxyXG4gICAgICBbc3R5bGUuZm9udEZhbWlseV09XCJtb2RlbC5vcHRpb25zLnRvb2xiYXIuZm9udEZhbWlseVwiXHJcbiAgICAgIFtzdHlsZS5mb250Q29sb3JdPVwibW9kZWwub3B0aW9ucy50b29sYmFyLmZvbnRDb2xvclwiXHJcbiAgICAgIFtjbGFzc109XCInc3RpSnNWaWV3ZXJUb29sQmFyJyArIChtb2RlbC5vcHRpb25zLnRvb2xiYXIuZGlzcGxheU1vZGUgPT0gJ1NlcGFyYXRlZCcgPyAnIHN0aUpzVmlld2VyVG9vbEJhclNlcGFyYXRlZCcgOiAnJylcIj5cclxuICAgICAgPGRpdiBbc3R5bGUucGFkZGluZ1RvcF09XCJtb2RlbC5vcHRpb25zLnRvb2xiYXIuZGlzcGxheU1vZGUgPT0gJ1NpbXBsZScgPyAnMnB4JyA6ICcnXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInN0aUpzVmlld2VyVG9vbEJhclRhYmxlXCIgc3R5bGU9XCJib3gtc2l6aW5nOiBib3JkZXItYm94OyBkaXNwbGF5OiB0YWJsZTtcIlxyXG4gICAgICAgICAgW3N0eWxlLmJvcmRlcl09XCJtb2RlbC5vcHRpb25zLnRvb2xiYXIuZGlzcGxheU1vZGUgPT0gJ1NlcGFyYXRlZCcgPyAnMHB4JyA6ICcnXCI+XHJcbiAgICAgICAgICA8dGFibGUgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCI+XHJcbiAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICA8dGQgKm5nRm9yPVwibGV0IHJlc291cmNlIG9mIG1vZGVsLnJlcG9ydFBhcmFtcy5yZXNvdXJjZXNcIiBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgPHN0aS1idXR0b24gW2NhcHRpb25dPVwicmVzb3VyY2UubmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgW2NhcHRpb24yXT1cImhlbHBlci5nZXRIdW1hbkZpbGVTaXplKHJlc291cmNlLnNpemUsIDEpXCJcclxuICAgICAgICAgICAgICAgICAgICBbaW1hZ2VOYW1lXT1cImdldFJlc291cmNlSW1hZ2UocmVzb3VyY2UudHlwZSlcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtzdHlsZU5hbWVdPVwiJ3N0aUpzVmlld2VyRm9ybUJ1dHRvbidcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtoZWlnaHRdPVwiJ2F1dG8nXCJcclxuICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIiczcHggMCAzcHggM3B4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW2lubmVyVGFibGVXaWR0aF09XCInMTAwJSdcIlxyXG4gICAgICAgICAgICAgICAgICAgIFttaW5XaWR0aF09XCInODBweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uQWxpZ25dPVwiJ2xlZnQnXCJcclxuICAgICAgICAgICAgICAgICAgICBbY2FwdGlvblBhZGRpbmdMZWZ0XT1cIiczcHgnXCJcclxuICAgICAgICAgICAgICAgICAgICBbY2FwdGlvbk1heFdpZHRoXT1cIicxNTBweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uTGluZUhlaWdodF09XCInMTRweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgIFtjYXB0aW9uV2hpdGVTcGFjZV09XCInbm93cmFwJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25PdmVyZmxvd109XCInaGlkZGVuJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25UZXh0T3ZlcmZsb3ddPVwiJ2VsbGlwc2lzJ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW2ltYWdlQ2VsbFdpZHRoXT1cIicxcHgnXCJcclxuICAgICAgICAgICAgICAgICAgICBbaW1hZ2VDZWxsUGFkZGluZ109XCInNHB4IDhweCA0cHggNHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgW21lbnVJdGVtc109XCJnZXRNZW51SXRlbXMocmVzb3VyY2UpXCJcclxuICAgICAgICAgICAgICAgICAgICBbcmVzb3VyY2VCdXR0b25dPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgW2ltYWdlU2l6ZXNXaWR0aF09XCIzMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgW2ltYWdlU2l6ZXNIZWlnaHRdPVwiMzJcIlxyXG4gICAgICAgICAgICAgICAgICAgIFthY3Rpb25OYW1lXT1cImdldEFjdGlvbk5hbWUocmVzb3VyY2UpXCJcclxuICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cImFjdGlvbihyZXNvdXJjZSlcIj5cclxuICAgICAgICAgICAgICAgICAgPC9zdGktYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICBgXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VzUGFuZWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICBAVmlld0NoaWxkKCdlbGVtZW50JykgZWxlbWVudDogRWxlbWVudFJlZjtcclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIG1vZGVsOiBNb2RlbFNlcnZpY2UsIHB1YmxpYyBjb250cm9sbGVyOiBDb250cm9sbGVyU2VydmljZSwgcHVibGljIGhlbHBlcjogSGVscGVyU2VydmljZSkge1xyXG4gICAgY29udHJvbGxlci5nZXRNZXNzYWdlKCkuc3Vic2NyaWJlKChtZXNzYWdlOiBNZXNzYWdlKSA9PiB7XHJcbiAgICAgIGlmIChtZXNzYWdlLmFjdGlvbiA9PT0gJ0dldFJlcG9ydCcgfHwgbWVzc2FnZS5hY3Rpb24gPT09ICdPcGVuUmVwb3J0Jykge1xyXG4gICAgICAgIHRoaXMubW9kZWwuY29udHJvbHMucmVzb3VyY2VzUGFuZWwudmlzaWJsZSA9IHRoaXMubW9kZWwucmVwb3J0UGFyYW1zLnJlc291cmNlcz8ubGVuZ3RoID4gMDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm1vZGVsLmNvbnRyb2xzLnJlc291cmNlc1BhbmVsLmVsID0gdGhpcy5lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgYWN0aW9uKHJlc291cmNlOiBSZXNvdXJjZSkge1xyXG4gICAgY29uc3QgcmVzVHlwZXNBbGxvd2VkVmlld0luQnJvd3NlciA9IFsnSW1hZ2UnLCAnUGRmJywgJ1R4dCddO1xyXG4gICAgY29uc3Qgdmlld1R5cGUgPSByZXNUeXBlc0FsbG93ZWRWaWV3SW5Ccm93c2VyLmluZGV4T2YocmVzb3VyY2UudHlwZSkgPj0gMCA/ICdWaWV3JyA6ICdTYXZlRmlsZSc7XHJcbiAgICB0aGlzLmNvbnRyb2xsZXIucG9zdFJlcG9ydFJlc291cmNlKHJlc291cmNlLm5hbWUsIHRoaXMubW9kZWwub3B0aW9ucy5qc01vZGUgPyAnU2F2ZUZpbGUnIDogdmlld1R5cGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0UmVzb3VyY2VJbWFnZShyZXNvdXJjZVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAodGhpcy5tb2RlbC5pbWcoJ0JpZ1Jlc291cmNlJyArIHJlc291cmNlVHlwZSArICcucG5nJykgIT09ICcnKSB7XHJcbiAgICAgIHJldHVybiAnQmlnUmVzb3VyY2UnICsgcmVzb3VyY2VUeXBlICsgJy5wbmcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICdCaWdSZXNvdXJjZS5wbmcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TWVudUl0ZW1zKHJlc291cmNlOiBSZXNvdXJjZSk6IE1lbnVJdGVtW10ge1xyXG4gICAgY29uc3QgaXRlbXM6IE1lbnVJdGVtW10gPSBbXTtcclxuICAgIGl0ZW1zLnB1c2goeyBuYW1lOiAnUmVzb3VyY2UnICsgJ1ZpZXcnLCBjYXB0aW9uOiB0aGlzLm1vZGVsLmxvYygnQnV0dG9uVmlldycpLCB2YWx1ZTogcmVzb3VyY2UgfSk7XHJcbiAgICBpdGVtcy5wdXNoKHsgbmFtZTogJ1Jlc291cmNlJyArICdTYXZlRmlsZScsIGNhcHRpb246IHRoaXMubW9kZWwubG9jKCdTYXZlRmlsZScpLCB2YWx1ZTogcmVzb3VyY2UgfSk7XHJcbiAgICByZXR1cm4gaXRlbXM7XHJcbiAgfVxyXG5cclxuICBnZXRBY3Rpb25OYW1lKHJlc291cmNlOiBSZXNvdXJjZSk6IHN0cmluZyB7XHJcbiAgICBpZiAoIXJlc291cmNlLmlkKSB7XHJcbiAgICAgIHJlc291cmNlLmlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICdyZXNvdXJjZScgKyByZXNvdXJjZS5uYW1lICsgcmVzb3VyY2UuaWQ7XHJcbiAgfVxyXG59XHJcbiJdfQ==