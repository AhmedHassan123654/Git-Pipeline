import { __decorate } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { ModelService } from '../services/model.service';
import { FormService } from '../forms/form.service';
import { ExportService } from '../services/export.service';
import { CollectionsService } from '../services/collections.service';
let DocumentSecurityMenuComponent = class DocumentSecurityMenuComponent {
    constructor(model, formService, exportService, collections) {
        this.model = model;
        this.formService = formService;
        this.exportService = exportService;
        this.collections = collections;
    }
    ngOnInit() { }
    getTextBoxType() {
        var _a;
        return ((_a = this.formService.form) === null || _a === void 0 ? void 0 : _a.name) === 'exportForm' ? 'password' : '';
    }
    updateUserAccessPrivileges() {
        const privileges = [];
        if (this.allowPrintDocument.isChecked) {
            privileges.push('PrintDocument');
        }
        if (this.allowModifyContents.isChecked) {
            privileges.push('ModifyContents');
        }
        if (this.allowCopyTextAndGraphics.isChecked) {
            privileges.push('CopyTextAndGraphics');
        }
        if (this.allowAddOrModifyTextAnnotations.isChecked) {
            privileges.push('AddOrModifyTextAnnotations');
        }
        this.exportService.exportSettings.UserAccessPrivileges = privileges.join(',');
    }
    getUserAccessPrivileges(name) {
        var _a, _b, _c;
        return ((_a = this.exportService.exportSettings) === null || _a === void 0 ? void 0 : _a.UserAccessPrivileges) === 'All' || ((_c = (_b = this.exportService.exportSettings) === null || _b === void 0 ? void 0 : _b.UserAccessPrivileges) === null || _c === void 0 ? void 0 : _c.indexOf(name)) >= 0;
    }
};
DocumentSecurityMenuComponent.ctorParameters = () => [
    { type: ModelService },
    { type: FormService },
    { type: ExportService },
    { type: CollectionsService }
];
__decorate([
    ViewChild('AllowPrintDocument')
], DocumentSecurityMenuComponent.prototype, "allowPrintDocument", void 0);
__decorate([
    ViewChild('AllowModifyContents')
], DocumentSecurityMenuComponent.prototype, "allowModifyContents", void 0);
__decorate([
    ViewChild('AllowCopyTextAndGraphics')
], DocumentSecurityMenuComponent.prototype, "allowCopyTextAndGraphics", void 0);
__decorate([
    ViewChild('AllowAddOrModifyTextAnnotations')
], DocumentSecurityMenuComponent.prototype, "allowAddOrModifyTextAnnotations", void 0);
DocumentSecurityMenuComponent = __decorate([
    Component({
        selector: 'sti-document-security-menu',
        template: `
    <table class="stiJsViewerClearAllStyles" cellpadding="0" cellspacing="0" style="width: 100%;">
                  <tbody>
                    <tr class="stiJsViewerClearAllStyles">
                      <td style="padding: 0px 8px; min-width: 150px;" [attr.title]="model.loc('UserPasswordTooltip')">
                        {{model.loc('UserPassword')}}
                      </td>
                      <td class="stiJsViewerClearAllStyles">
                        <sti-text-box
                           [width]="160"
                           [tooltip]="model.loc('UserPasswordTooltip')"
                           [margin]="'8px 8px 2px 8px'"
                           [type]="getTextBoxType()"
                           [value]="exportService.exportSettings?.PasswordInputUser"
                           (onchange)="exportService.exportSettings.PasswordInputUser =  $event.value">
                        </sti-text-box>
                      </td>
                    </tr>

                    <tr class="stiJsViewerClearAllStyles" [attr.title]="model.loc('OwnerPasswordTooltip')">
                      <td style="padding: 0px 8px; min-width: 150px;">
                        {{model.loc('OwnerPassword')}}
                      </td>
                      <td class="stiJsViewerClearAllStyles">
                        <sti-text-box
                           [width]="160"
                           [tooltip]="model.loc('OwnerPasswordTooltip')"
                           [margin]="'2px 8px 2px 8px'"
                           [type]="getTextBoxType()"
                           [value]="exportService.exportSettings?.PasswordInputOwner"
                           (onchange)="exportService.exportSettings.PasswordInputOwner =  $event.value">
                        </sti-text-box>
                      </td>
                    </tr>

                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-check-box #AllowPrintDocument
                           [captionText]="model.loc('AllowPrintDocument')"
                           [tooltip]="model.loc('AllowPrintDocumentTooltip')"
                           [margin]="'4px 8px 4px 8px'"
                           [isChecked]="getUserAccessPrivileges('PrintDocument')"
                           (action)="updateUserAccessPrivileges()">
                        </sti-check-box>
                      </td>
                    </tr>

                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-check-box #AllowModifyContents
                           [captionText]="model.loc('AllowModifyContents')"
                           [tooltip]="model.loc('AllowModifyContentsTooltip')"
                           [margin]="'4px 8px 4px 8px'"
                           [isChecked]="getUserAccessPrivileges('ModifyContents')"
                           (action)="updateUserAccessPrivileges()">
                        </sti-check-box>
                      </td>
                    </tr>

                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-check-box #AllowCopyTextAndGraphics
                           [captionText]="model.loc('AllowCopyTextAndGraphics')"
                           [tooltip]="model.loc('AllowCopyTextAndGraphicsTooltip')"
                           [margin]="'4px 8px 4px 8px'"
                           [isChecked]="getUserAccessPrivileges('CopyTextAndGraphics')"
                           (action)="updateUserAccessPrivileges()">
                        </sti-check-box>
                      </td>
                    </tr>

                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" colspan="2">
                        <sti-check-box #AllowAddOrModifyTextAnnotations
                           [captionText]="model.loc('AllowAddOrModifyTextAnnotations')"
                           [tooltip]="model.loc('AllowAddOrModifyTextAnnotationsTooltip')"
                           [margin]="'4px 8px 4px 8px'"
                           [isChecked]="getUserAccessPrivileges('AddOrModifyTextAnnotations')"
                           (action)="updateUserAccessPrivileges()">
                        </sti-check-box>
                      </td>
                    </tr>
                    <tr class="stiJsViewerClearAllStyles">
                      <td class="stiJsViewerClearAllStyles" style="padding: 0px 8px; min-width: 150px;" [attr.title]="model.loc('EncryptionKeyLengthTooltip')">
                        {{model.loc('EncryptionKeyLength')}}
                      </td>
                      <td>
                        <sti-drop-down-list-for-export-form
                           [width]="160"
                           [items]="collections.getEncryptionKeyLengthItems()"
                           [key]="exportService.exportSettings?.KeyLength"
                           [margin]="'2px 8px 4px 8px'"
                           (action)="exportService.exportSettings.KeyLength = $event.key">
                        </sti-drop-down-list-for-export-form>
                      </td>
                    </tr>
                  </tbody>
                </table>
`
    })
], DocumentSecurityMenuComponent);
export { DocumentSecurityMenuComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jdW1lbnQtc2VjdXJpdHktbWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL21lbnUvZG9jdW1lbnQtc2VjdXJpdHktbWVudS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUN6RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBMEdyRSxJQUFhLDZCQUE2QixHQUExQyxNQUFhLDZCQUE2QjtJQU94QyxZQUFtQixLQUFtQixFQUFTLFdBQXdCLEVBQVMsYUFBNEIsRUFBUyxXQUErQjtRQUFqSSxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBQVMsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFBUyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFTLGdCQUFXLEdBQVgsV0FBVyxDQUFvQjtJQUFJLENBQUM7SUFFekosUUFBUSxLQUFLLENBQUM7SUFFZCxjQUFjOztRQUNaLE9BQU8sT0FBQSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksMENBQUUsSUFBSSxNQUFLLFlBQVksQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDeEUsQ0FBQztJQUVELDBCQUEwQjtRQUN4QixNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7UUFDdEIsSUFBSSxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxFQUFFO1lBQUUsVUFBVSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztTQUFFO1FBQzVFLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsRUFBRTtZQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztTQUFFO1FBQzlFLElBQUksSUFBSSxDQUFDLHdCQUF3QixDQUFDLFNBQVMsRUFBRTtZQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQztTQUFFO1FBQ3hGLElBQUksSUFBSSxDQUFDLCtCQUErQixDQUFDLFNBQVMsRUFBRTtZQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsQ0FBQztTQUFFO1FBQ3RHLElBQUksQ0FBQyxhQUFhLENBQUMsY0FBYyxDQUFDLG9CQUFvQixHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEYsQ0FBQztJQUVELHVCQUF1QixDQUFDLElBQVk7O1FBQ2xDLE9BQU8sT0FBQSxJQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsMENBQUUsb0JBQW9CLE1BQUssS0FBSyxJQUFJLGFBQUEsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLDBDQUFFLG9CQUFvQiwwQ0FBRSxPQUFPLENBQUMsSUFBSSxNQUFLLENBQUMsQ0FBQztJQUMxSixDQUFDO0NBQ0YsQ0FBQTs7WUFwQjJCLFlBQVk7WUFBc0IsV0FBVztZQUF3QixhQUFhO1lBQXNCLGtCQUFrQjs7QUFMbkg7SUFBaEMsU0FBUyxDQUFDLG9CQUFvQixDQUFDO3lFQUF1QztBQUNyQztJQUFqQyxTQUFTLENBQUMscUJBQXFCLENBQUM7MEVBQXdDO0FBQ2xDO0lBQXRDLFNBQVMsQ0FBQywwQkFBMEIsQ0FBQzsrRUFBNkM7QUFDckM7SUFBN0MsU0FBUyxDQUFDLGlDQUFpQyxDQUFDO3NGQUFvRDtBQUx0Riw2QkFBNkI7SUF2R3pDLFNBQVMsQ0FBQztRQUNULFFBQVEsRUFBRSw0QkFBNEI7UUFDdEMsUUFBUSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQWtHWDtLQUNBLENBQUM7R0FFVyw2QkFBNkIsQ0EyQnpDO1NBM0JZLDZCQUE2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbW9kZWwuc2VydmljZSc7XHJcbmltcG9ydCB7IEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi4vZm9ybXMvZm9ybS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRXhwb3J0U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2V4cG9ydC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQ29sbGVjdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvY29sbGVjdGlvbnMuc2VydmljZSc7XHJcbmltcG9ydCB7IENoZWNrYm94Q29tcG9uZW50IH0gZnJvbSAnLi4vY29udHJvbHMvY2hlY2tib3guY29tcG9uZW50JztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnc3RpLWRvY3VtZW50LXNlY3VyaXR5LW1lbnUnLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8dGFibGUgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIj5cclxuICAgICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDBweCA4cHg7IG1pbi13aWR0aDogMTUwcHg7XCIgW2F0dHIudGl0bGVdPVwibW9kZWwubG9jKCdVc2VyUGFzc3dvcmRUb29sdGlwJylcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3ttb2RlbC5sb2MoJ1VzZXJQYXNzd29yZCcpfX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktdGV4dC1ib3hcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3dpZHRoXT1cIjE2MFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cIm1vZGVsLmxvYygnVXNlclBhc3N3b3JkVG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInOHB4IDhweCAycHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0eXBlXT1cImdldFRleHRCb3hUeXBlKClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVdPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncz8uUGFzc3dvcmRJbnB1dFVzZXJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAob25jaGFuZ2UpPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5QYXNzd29yZElucHV0VXNlciA9ICAkZXZlbnQudmFsdWVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktdGV4dC1ib3g+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBbYXR0ci50aXRsZV09XCJtb2RlbC5sb2MoJ093bmVyUGFzc3dvcmRUb29sdGlwJylcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDBweCA4cHg7IG1pbi13aWR0aDogMTUwcHg7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7bW9kZWwubG9jKCdPd25lclBhc3N3b3JkJyl9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS10ZXh0LWJveFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwiMTYwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdPd25lclBhc3N3b3JkVG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInMnB4IDhweCAycHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0eXBlXT1cImdldFRleHRCb3hUeXBlKClcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdmFsdWVdPVwiZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncz8uUGFzc3dvcmRJbnB1dE93bmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uY2hhbmdlKT1cImV4cG9ydFNlcnZpY2UuZXhwb3J0U2V0dGluZ3MuUGFzc3dvcmRJbnB1dE93bmVyID0gICRldmVudC52YWx1ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS10ZXh0LWJveD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIGNvbHNwYW49XCIyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdGktY2hlY2stYm94ICNBbGxvd1ByaW50RG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25UZXh0XT1cIm1vZGVsLmxvYygnQWxsb3dQcmludERvY3VtZW50JylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ0FsbG93UHJpbnREb2N1bWVudFRvb2x0aXAnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXJnaW5dPVwiJzRweCA4cHggNHB4IDhweCdcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbaXNDaGVja2VkXT1cImdldFVzZXJBY2Nlc3NQcml2aWxlZ2VzKCdQcmludERvY3VtZW50JylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cInVwZGF0ZVVzZXJBY2Nlc3NQcml2aWxlZ2VzKClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktY2hlY2stYm94PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1jaGVjay1ib3ggI0FsbG93TW9kaWZ5Q29udGVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NhcHRpb25UZXh0XT1cIm1vZGVsLmxvYygnQWxsb3dNb2RpZnlDb250ZW50cycpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Rvb2x0aXBdPVwibW9kZWwubG9jKCdBbGxvd01vZGlmeUNvbnRlbnRzVG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInNHB4IDhweCA0cHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpc0NoZWNrZWRdPVwiZ2V0VXNlckFjY2Vzc1ByaXZpbGVnZXMoJ01vZGlmeUNvbnRlbnRzJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAoYWN0aW9uKT1cInVwZGF0ZVVzZXJBY2Nlc3NQcml2aWxlZ2VzKClcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktY2hlY2stYm94PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJzdGlKc1ZpZXdlckNsZWFyQWxsU3R5bGVzXCIgY29sc3Bhbj1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0aS1jaGVjay1ib3ggI0FsbG93Q29weVRleHRBbmRHcmFwaGljc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvblRleHRdPVwibW9kZWwubG9jKCdBbGxvd0NvcHlUZXh0QW5kR3JhcGhpY3MnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt0b29sdGlwXT1cIm1vZGVsLmxvYygnQWxsb3dDb3B5VGV4dEFuZEdyYXBoaWNzVG9vbHRpcCcpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hcmdpbl09XCInNHB4IDhweCA0cHggOHB4J1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpc0NoZWNrZWRdPVwiZ2V0VXNlckFjY2Vzc1ByaXZpbGVnZXMoJ0NvcHlUZXh0QW5kR3JhcGhpY3MnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwidXBkYXRlVXNlckFjY2Vzc1ByaXZpbGVnZXMoKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1jaGVjay1ib3g+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInN0aUpzVmlld2VyQ2xlYXJBbGxTdHlsZXNcIiBjb2xzcGFuPVwiMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLWNoZWNrLWJveCAjQWxsb3dBZGRPck1vZGlmeVRleHRBbm5vdGF0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbY2FwdGlvblRleHRdPVwibW9kZWwubG9jKCdBbGxvd0FkZE9yTW9kaWZ5VGV4dEFubm90YXRpb25zJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbdG9vbHRpcF09XCJtb2RlbC5sb2MoJ0FsbG93QWRkT3JNb2RpZnlUZXh0QW5ub3RhdGlvbnNUb29sdGlwJylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIic0cHggOHB4IDRweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lzQ2hlY2tlZF09XCJnZXRVc2VyQWNjZXNzUHJpdmlsZWdlcygnQWRkT3JNb2RpZnlUZXh0QW5ub3RhdGlvbnMnKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3Rpb24pPVwidXBkYXRlVXNlckFjY2Vzc1ByaXZpbGVnZXMoKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0aS1jaGVjay1ib3g+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwic3RpSnNWaWV3ZXJDbGVhckFsbFN0eWxlc1wiIHN0eWxlPVwicGFkZGluZzogMHB4IDhweDsgbWluLXdpZHRoOiAxNTBweDtcIiBbYXR0ci50aXRsZV09XCJtb2RlbC5sb2MoJ0VuY3J5cHRpb25LZXlMZW5ndGhUb29sdGlwJylcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3ttb2RlbC5sb2MoJ0VuY3J5cHRpb25LZXlMZW5ndGgnKX19XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3RpLWRyb3AtZG93bi1saXN0LWZvci1leHBvcnQtZm9ybVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbd2lkdGhdPVwiMTYwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2l0ZW1zXT1cImNvbGxlY3Rpb25zLmdldEVuY3J5cHRpb25LZXlMZW5ndGhJdGVtcygpXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgW2tleV09XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzPy5LZXlMZW5ndGhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBbbWFyZ2luXT1cIicycHggOHB4IDRweCA4cHgnXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFjdGlvbik9XCJleHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzLktleUxlbmd0aCA9ICRldmVudC5rZXlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zdGktZHJvcC1kb3duLWxpc3QtZm9yLWV4cG9ydC1mb3JtPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgICAgICAgPC90YWJsZT5cclxuYFxyXG59KVxyXG5cclxuZXhwb3J0IGNsYXNzIERvY3VtZW50U2VjdXJpdHlNZW51Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcclxuXHJcbiAgQFZpZXdDaGlsZCgnQWxsb3dQcmludERvY3VtZW50JykgYWxsb3dQcmludERvY3VtZW50OiBDaGVja2JveENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdBbGxvd01vZGlmeUNvbnRlbnRzJykgYWxsb3dNb2RpZnlDb250ZW50czogQ2hlY2tib3hDb21wb25lbnQ7XHJcbiAgQFZpZXdDaGlsZCgnQWxsb3dDb3B5VGV4dEFuZEdyYXBoaWNzJykgYWxsb3dDb3B5VGV4dEFuZEdyYXBoaWNzOiBDaGVja2JveENvbXBvbmVudDtcclxuICBAVmlld0NoaWxkKCdBbGxvd0FkZE9yTW9kaWZ5VGV4dEFubm90YXRpb25zJykgYWxsb3dBZGRPck1vZGlmeVRleHRBbm5vdGF0aW9uczogQ2hlY2tib3hDb21wb25lbnQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtb2RlbDogTW9kZWxTZXJ2aWNlLCBwdWJsaWMgZm9ybVNlcnZpY2U6IEZvcm1TZXJ2aWNlLCBwdWJsaWMgZXhwb3J0U2VydmljZTogRXhwb3J0U2VydmljZSwgcHVibGljIGNvbGxlY3Rpb25zOiBDb2xsZWN0aW9uc1NlcnZpY2UpIHsgfVxyXG5cclxuICBuZ09uSW5pdCgpIHsgfVxyXG5cclxuICBnZXRUZXh0Qm94VHlwZSgpIHtcclxuICAgIHJldHVybiB0aGlzLmZvcm1TZXJ2aWNlLmZvcm0/Lm5hbWUgPT09ICdleHBvcnRGb3JtJyA/ICdwYXNzd29yZCcgOiAnJztcclxuICB9XHJcblxyXG4gIHVwZGF0ZVVzZXJBY2Nlc3NQcml2aWxlZ2VzKCkge1xyXG4gICAgY29uc3QgcHJpdmlsZWdlcyA9IFtdO1xyXG4gICAgaWYgKHRoaXMuYWxsb3dQcmludERvY3VtZW50LmlzQ2hlY2tlZCkgeyBwcml2aWxlZ2VzLnB1c2goJ1ByaW50RG9jdW1lbnQnKTsgfVxyXG4gICAgaWYgKHRoaXMuYWxsb3dNb2RpZnlDb250ZW50cy5pc0NoZWNrZWQpIHsgcHJpdmlsZWdlcy5wdXNoKCdNb2RpZnlDb250ZW50cycpOyB9XHJcbiAgICBpZiAodGhpcy5hbGxvd0NvcHlUZXh0QW5kR3JhcGhpY3MuaXNDaGVja2VkKSB7IHByaXZpbGVnZXMucHVzaCgnQ29weVRleHRBbmRHcmFwaGljcycpOyB9XHJcbiAgICBpZiAodGhpcy5hbGxvd0FkZE9yTW9kaWZ5VGV4dEFubm90YXRpb25zLmlzQ2hlY2tlZCkgeyBwcml2aWxlZ2VzLnB1c2goJ0FkZE9yTW9kaWZ5VGV4dEFubm90YXRpb25zJyk7IH1cclxuICAgIHRoaXMuZXhwb3J0U2VydmljZS5leHBvcnRTZXR0aW5ncy5Vc2VyQWNjZXNzUHJpdmlsZWdlcyA9IHByaXZpbGVnZXMuam9pbignLCcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckFjY2Vzc1ByaXZpbGVnZXMobmFtZTogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzPy5Vc2VyQWNjZXNzUHJpdmlsZWdlcyA9PT0gJ0FsbCcgfHwgdGhpcy5leHBvcnRTZXJ2aWNlLmV4cG9ydFNldHRpbmdzPy5Vc2VyQWNjZXNzUHJpdmlsZWdlcz8uaW5kZXhPZihuYW1lKSA+PSAwO1xyXG4gIH1cclxufVxyXG4iXX0=