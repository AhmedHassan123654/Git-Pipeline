import { __decorate } from "tslib";
import { Injectable } from '@angular/core';
import { ModelService } from './model.service';
let StylesService = class StylesService {
    constructor(model) {
        this.model = model;
        this.pagesCss = {};
    }
    setupStyle(style, id) {
        var _a;
        if (this.pagesCss[id] == null) {
            this.pagesCss[id] = document.createElement('STYLE');
            this.pagesCss[id].id = ((_a = this.model.options) === null || _a === void 0 ? void 0 : _a.viewerId) + 'Styles';
            this.pagesCss[id].setAttribute('type', 'text/css');
            this.model.controls.head.appendChild(this.pagesCss[id]);
        }
        if (this.pagesCss[id].styleSheet) {
            this.pagesCss[id].styleSheet.cssText = style;
        }
        else {
            this.pagesCss[id].innerHTML = style;
        }
    }
    addCustomFontStyles(customFonts) {
        if (!customFonts) {
            return;
        }
        let existsStyles = [];
        try {
            existsStyles = document.getElementsByTagName('head')[0].getElementsByTagName('style');
        }
        catch (e) { }
        customFonts.forEach((customFont) => {
            if (customFont.contentForCss && customFont.originalFontFamily) {
                const style = document.createElement('style');
                style.innerHTML = `@font-face {\r\nfont-family: '${customFont.originalFontFamily}';\r\n src: url(${customFont.contentForCss});\r\n }`;
                let existsThisStyle = false;
                for (const estyle of existsStyles) {
                    if (estyle.innerHTML.indexOf(`font-family: '${customFont.originalFontFamily}'`) > 0) {
                        existsThisStyle = true;
                        break;
                    }
                }
                if (!existsThisStyle) {
                    document.getElementsByTagName('head')[0].appendChild(style);
                }
            }
        });
    }
    addChartScript(script) {
        const currChartScripts = document.getElementById(this.model.options.viewerId + 'chartScriptJsViewer');
        if (currChartScripts) {
            this.model.controls.head.removeChild(currChartScripts);
        }
        if (script) {
            const chartScripts = document.createElement('Script');
            chartScripts.setAttribute('type', 'text/javascript');
            chartScripts.id = this.model.options.viewerId + 'chartScriptJsViewer';
            chartScripts.textContent = script;
            this.model.controls.head.appendChild(chartScripts);
        }
    }
};
StylesService.ctorParameters = () => [
    { type: ModelService }
];
StylesService = __decorate([
    Injectable()
], StylesService);
export { StylesService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3R5bGVzLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL3N0eWxlcy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUcvQyxJQUFhLGFBQWEsR0FBMUIsTUFBYSxhQUFhO0lBR3hCLFlBQW9CLEtBQW1CO1FBQW5CLFVBQUssR0FBTCxLQUFLLENBQWM7UUFGL0IsYUFBUSxHQUFHLEVBQUUsQ0FBQztJQUVxQixDQUFDO0lBRXJDLFVBQVUsQ0FBQyxLQUFhLEVBQUUsRUFBVTs7UUFDekMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRTtZQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDcEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsT0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sMENBQUUsUUFBUSxJQUFHLFFBQVEsQ0FBQztZQUMvRCxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDbkQsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDekQ7UUFDRCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFO1lBQ2hDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7U0FDOUM7YUFBTTtZQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztTQUNyQztJQUNILENBQUM7SUFFTSxtQkFBbUIsQ0FBQyxXQUFrQjtRQUMzQyxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQUUsT0FBTztTQUFFO1FBRTdCLElBQUksWUFBWSxHQUFRLEVBQUUsQ0FBQztRQUMzQixJQUFJO1lBQ0YsWUFBWSxHQUFHLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUN2RjtRQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQUc7UUFFZixXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsVUFBZSxFQUFFLEVBQUU7WUFDdEMsSUFBSSxVQUFVLENBQUMsYUFBYSxJQUFJLFVBQVUsQ0FBQyxrQkFBa0IsRUFBRTtnQkFDN0QsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDOUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxpQ0FBaUMsVUFBVSxDQUFDLGtCQUFrQixtQkFBbUIsVUFBVSxDQUFDLGFBQWEsVUFBVSxDQUFDO2dCQUV0SSxJQUFJLGVBQWUsR0FBRyxLQUFLLENBQUM7Z0JBRTVCLEtBQUssTUFBTSxNQUFNLElBQUksWUFBWSxFQUFFO29CQUNqQyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLGlCQUFpQixVQUFVLENBQUMsa0JBQWtCLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTt3QkFDbkYsZUFBZSxHQUFHLElBQUksQ0FBQzt3QkFDdkIsTUFBTTtxQkFDUDtpQkFDRjtnQkFFRCxJQUFJLENBQUMsZUFBZSxFQUFFO29CQUNwQixRQUFRLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUM3RDthQUNGO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBR00sY0FBYyxDQUFDLE1BQWM7UUFDbEMsTUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBRyxxQkFBcUIsQ0FBQyxDQUFDO1FBQ3RHLElBQUksZ0JBQWdCLEVBQUU7WUFDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1NBQ3hEO1FBRUQsSUFBSSxNQUFNLEVBQUU7WUFDVixNQUFNLFlBQVksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3RELFlBQVksQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLGlCQUFpQixDQUFDLENBQUM7WUFDckQsWUFBWSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEdBQUcscUJBQXFCLENBQUM7WUFDdEUsWUFBWSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7WUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztTQUNwRDtJQUNILENBQUM7Q0FHRixDQUFBOztZQTlENEIsWUFBWTs7QUFINUIsYUFBYTtJQUR6QixVQUFVLEVBQUU7R0FDQSxhQUFhLENBaUV6QjtTQWpFWSxhQUFhIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBNb2RlbFNlcnZpY2UgfSBmcm9tICcuL21vZGVsLnNlcnZpY2UnO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgU3R5bGVzU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBwYWdlc0NzcyA9IHt9O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1vZGVsOiBNb2RlbFNlcnZpY2UpIHsgfVxyXG5cclxuICBwdWJsaWMgc2V0dXBTdHlsZShzdHlsZTogc3RyaW5nLCBpZDogc3RyaW5nKSB7XHJcbiAgICBpZiAodGhpcy5wYWdlc0Nzc1tpZF0gPT0gbnVsbCkge1xyXG4gICAgICB0aGlzLnBhZ2VzQ3NzW2lkXSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NUWUxFJyk7XHJcbiAgICAgIHRoaXMucGFnZXNDc3NbaWRdLmlkID0gdGhpcy5tb2RlbC5vcHRpb25zPy52aWV3ZXJJZCArICdTdHlsZXMnO1xyXG4gICAgICB0aGlzLnBhZ2VzQ3NzW2lkXS5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKTtcclxuICAgICAgdGhpcy5tb2RlbC5jb250cm9scy5oZWFkLmFwcGVuZENoaWxkKHRoaXMucGFnZXNDc3NbaWRdKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBhZ2VzQ3NzW2lkXS5zdHlsZVNoZWV0KSB7XHJcbiAgICAgIHRoaXMucGFnZXNDc3NbaWRdLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHN0eWxlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wYWdlc0Nzc1tpZF0uaW5uZXJIVE1MID0gc3R5bGU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYWRkQ3VzdG9tRm9udFN0eWxlcyhjdXN0b21Gb250czogYW55W10pIHtcclxuICAgIGlmICghY3VzdG9tRm9udHMpIHsgcmV0dXJuOyB9XHJcblxyXG4gICAgbGV0IGV4aXN0c1N0eWxlczogYW55ID0gW107XHJcbiAgICB0cnkge1xyXG4gICAgICBleGlzdHNTdHlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdHlsZScpO1xyXG4gICAgfSBjYXRjaCAoZSkgeyB9XHJcblxyXG4gICAgY3VzdG9tRm9udHMuZm9yRWFjaCgoY3VzdG9tRm9udDogYW55KSA9PiB7XHJcbiAgICAgIGlmIChjdXN0b21Gb250LmNvbnRlbnRGb3JDc3MgJiYgY3VzdG9tRm9udC5vcmlnaW5hbEZvbnRGYW1pbHkpIHtcclxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XHJcbiAgICAgICAgc3R5bGUuaW5uZXJIVE1MID0gYEBmb250LWZhY2Uge1xcclxcbmZvbnQtZmFtaWx5OiAnJHtjdXN0b21Gb250Lm9yaWdpbmFsRm9udEZhbWlseX0nO1xcclxcbiBzcmM6IHVybCgke2N1c3RvbUZvbnQuY29udGVudEZvckNzc30pO1xcclxcbiB9YDtcclxuXHJcbiAgICAgICAgbGV0IGV4aXN0c1RoaXNTdHlsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGVzdHlsZSBvZiBleGlzdHNTdHlsZXMpIHtcclxuICAgICAgICAgIGlmIChlc3R5bGUuaW5uZXJIVE1MLmluZGV4T2YoYGZvbnQtZmFtaWx5OiAnJHtjdXN0b21Gb250Lm9yaWdpbmFsRm9udEZhbWlseX0nYCkgPiAwKSB7XHJcbiAgICAgICAgICAgIGV4aXN0c1RoaXNTdHlsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFleGlzdHNUaGlzU3R5bGUpIHtcclxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoc3R5bGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGFkZENoYXJ0U2NyaXB0KHNjcmlwdDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjdXJyQ2hhcnRTY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5tb2RlbC5vcHRpb25zLnZpZXdlcklkICsgJ2NoYXJ0U2NyaXB0SnNWaWV3ZXInKTtcclxuICAgIGlmIChjdXJyQ2hhcnRTY3JpcHRzKSB7XHJcbiAgICAgIHRoaXMubW9kZWwuY29udHJvbHMuaGVhZC5yZW1vdmVDaGlsZChjdXJyQ2hhcnRTY3JpcHRzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2NyaXB0KSB7XHJcbiAgICAgIGNvbnN0IGNoYXJ0U2NyaXB0cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NjcmlwdCcpO1xyXG4gICAgICBjaGFydFNjcmlwdHMuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xyXG4gICAgICBjaGFydFNjcmlwdHMuaWQgPSB0aGlzLm1vZGVsLm9wdGlvbnMudmlld2VySWQgKyAnY2hhcnRTY3JpcHRKc1ZpZXdlcic7XHJcbiAgICAgIGNoYXJ0U2NyaXB0cy50ZXh0Q29udGVudCA9IHNjcmlwdDtcclxuICAgICAgdGhpcy5tb2RlbC5jb250cm9scy5oZWFkLmFwcGVuZENoaWxkKGNoYXJ0U2NyaXB0cyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuIl19