import { __decorate } from "tslib";
import { Injectable } from '@angular/core';
import { ModelService } from './model.service';
import { AnimationService } from './animation.service';
import { DateTimeObject } from './objects';
let HelperService = class HelperService {
    constructor(model, animationService) {
        this.model = model;
        this.animationService = animationService;
    }
    val(value, def) {
        return value != null && value.trim() !== '' ? value : (def || '');
    }
    findPosY(obj, mainClassName, noScroll) {
        let curtop = noScroll ? 0 : this.getScrollYOffset(obj, mainClassName);
        if (obj.offsetParent) {
            while (obj.className !== mainClassName) {
                curtop += obj.offsetTop;
                if (!obj.offsetParent) {
                    break;
                }
                obj = obj.offsetParent;
            }
        }
        else if (obj.y) {
            curtop += obj.y;
        }
        return curtop;
    }
    getScrollYOffset(obj, mainClassName) {
        let scrolltop = 0;
        if (obj.parentElement) {
            while (obj.className !== mainClassName) {
                if ('scrollTop' in obj) {
                    scrolltop -= obj.scrollTop;
                }
                if (!obj.parentElement) {
                    break;
                }
                obj = obj.parentElement;
            }
        }
        return scrolltop;
    }
    findPosX(obj, mainClassName, noScroll) {
        let curleft = noScroll ? 0 : this.getScrollXOffset(obj, mainClassName);
        if (obj.offsetParent) {
            while (obj.className !== mainClassName) {
                curleft += obj.offsetLeft;
                if (!obj.offsetParent) {
                    break;
                }
                obj = obj.offsetParent;
            }
        }
        else if (obj.x) {
            curleft += obj.x;
        }
        return curleft;
    }
    getScrollXOffset(obj, mainClassName) {
        let scrollleft = 0;
        if (obj.parentElement) {
            while (obj.className !== mainClassName) {
                if ('scrollLeft' in obj) {
                    scrollleft -= obj.scrollLeft;
                }
                if (!obj.parentElement) {
                    break;
                }
                obj = obj.parentElement;
            }
        }
        return scrollleft;
    }
    showHelpWindow(url) {
        let helpLanguage = 'en';
        switch (this.model.options.cultureName) {
            case 'ru': helpLanguage = 'ru';
            // case 'de': helpLanguage = 'de';
        }
        this.openNewWindow('https://www.stimulsoft.com/' + helpLanguage + '/documentation/online/' + url);
    }
    openNewWindow(url, name, specs) {
        return window.open(url, name, specs);
    }
    scrollToAnchor(anchorName, componentGuid) {
        let aHyperlinks = this.model.controls.reportPanel.el.nativeElement.getElementsByTagName("a");
        const identicalAnchors = [];
        if (anchorName) {
            anchorName = anchorName.replace(/!!#92/g, '\\');
        }
        if (componentGuid) {
            for (let i = 0; i < aHyperlinks.length; i++) {
                if (aHyperlinks[i].getAttribute('guid') === componentGuid) {
                    identicalAnchors.push(aHyperlinks[i]);
                }
            }
        }
        if (identicalAnchors.length === 0) {
            let guidIndex = anchorName.indexOf("#GUID#");
            if (identicalAnchors.length == 0) {
                let aHyperlinks = this.model.controls.reportPanel.el.nativeElement.getElementsByTagName("a");
                for (var i = 0; i < aHyperlinks.length; i++) {
                    if (aHyperlinks[i].name && ((guidIndex >= 0 && (aHyperlinks[i].name.indexOf(anchorName.substring(guidIndex + 6)) >= 0 || anchorName.substring(0, guidIndex) == aHyperlinks[i].name)) || aHyperlinks[i].name == anchorName))
                        identicalAnchors.push(aHyperlinks[i]);
                }
            }
        }
        if (identicalAnchors.length > 0) {
            const anchor = identicalAnchors[0];
            const anchorParent = anchor.parentElement || anchor;
            let anchorHeight = anchorParent.offsetHeight;
            const anchorOffsetTop = anchorParent.offsetTop;
            identicalAnchors.forEach((identicalAnchor) => {
                const nextAnchorParent = identicalAnchor.parentElement || identicalAnchor;
                if (nextAnchorParent.offsetTop > anchorOffsetTop) {
                    anchorHeight = Math.max(anchorHeight, nextAnchorParent.offsetTop - anchorOffsetTop + nextAnchorParent.offsetHeight);
                }
            });
            const date = new Date();
            const endTime = date.getTime() + this.model.options.scrollDuration;
            const targetTop = this.findPosY(anchor, this.model.options.appearance.scrollbarsMode ? 'stiJsViewerReportPanel' : null, true) - anchorParent.offsetHeight * 2;
            this.animationService.showAnimationForScroll(this.model.controls.reportPanel.el.nativeElement, targetTop, endTime, () => {
                var _a;
                const page = this.getPageFromAnchorElement(anchor);
                const anchorParentTopPos = this.findPosY(anchorParent, 'stiJsViewerReportPanel', true);
                const pageTopPos = page ? this.findPosY(page, 'stiJsViewerReportPanel', true) : anchorParentTopPos;
                this.removeBookmarksLabel();
                const label = document.createElement('div');
                this.model.controls.bookmarksLabel = label;
                label.className = 'stiJsViewerBookmarksLabel';
                const labelMargin = 20 * (this.model.reportParams.zoom / 100);
                const labelWidth = page ? page.offsetWidth - labelMargin - 6 : anchorParent.offsetWidth;
                const labelHeight = anchorHeight - 2;
                label.style.width = labelWidth + 'px';
                label.style.height = labelHeight + 'px';
                const margins = (_a = page.pageAttributes.margins) === null || _a === void 0 ? void 0 : _a.replace('px', '').split(' ');
                const pageLeftMargin = page.pageAttributes.margins ? this.strToInt(margins[3]) : 0;
                const pageTopMargin = page.pageAttributes.margins ? this.strToInt(margins[0]) : 0;
                label.style.marginLeft = (labelMargin / 2 - pageLeftMargin) + 'px';
                label.style.marginTop = (anchorParentTopPos - pageTopPos - pageTopMargin - (this.model.reportParams.zoom / 100) - 1) + 'px';
                page.insertBefore(label, page.childNodes[0]);
            });
        }
    }
    removeBookmarksLabel() {
        if (this.model.controls.bookmarksLabel) {
            this.model.controls.bookmarksLabel.parentElement.removeChild(this.model.controls.bookmarksLabel);
            this.model.controls.bookmarksLabel = null;
        }
    }
    getPageFromAnchorElement(anchorElement) {
        let obj = anchorElement;
        while (obj.parentElement) {
            if (obj.className && obj.className.indexOf('stiJsViewerPage') === 0) {
                return obj;
            }
            obj = obj.parentElement;
        }
        return obj;
    }
    strToInt(value) {
        const result = parseInt(value, 10);
        return result || 0;
    }
    strToDouble(value) {
        if (value === null) {
            return null;
        }
        const result = parseFloat(value.toString().replace(',', '.').trim());
        return result || 0;
    }
    copyObject(o) {
        if (!o || 'object' !== typeof o) {
            return o;
        }
        const c = 'function' === typeof o.pop ? [] : {};
        let p;
        let v;
        for (p in o) {
            if (o.hasOwnProperty(p)) {
                v = o[p];
                if (v && 'object' === typeof v) {
                    c[p] = this.copyObject(v);
                }
                else {
                    c[p] = v;
                }
            }
        }
        return c;
    }
    getCountObjects(objectArray) {
        let count = 0;
        if (objectArray) {
            for (const singleObject in objectArray) {
                count++;
            }
        }
        return count;
    }
    replaceMonths(value) {
        for (let i = 1; i <= 12; i++) {
            let enName = '';
            let locName = '';
            switch (i) {
                case 1:
                    enName = 'January';
                    locName = this.model.loc('MonthJanuary');
                    break;
                case 2:
                    enName = 'February';
                    locName = this.model.loc('MonthFebruary');
                    break;
                case 3:
                    enName = 'March';
                    locName = this.model.loc('MonthMarch');
                    break;
                case 4:
                    enName = 'April';
                    locName = this.model.loc('MonthApril');
                    break;
                case 5:
                    enName = 'May';
                    locName = this.model.loc('MonthMay');
                    break;
                case 6:
                    enName = 'June';
                    locName = this.model.loc('MonthJune');
                    break;
                case 7:
                    enName = 'July';
                    locName = this.model.loc('MonthJuly');
                    break;
                case 8:
                    enName = 'August';
                    locName = this.model.loc('MonthAugust');
                    break;
                case 9:
                    enName = 'September';
                    locName = this.model.loc('MonthSeptember');
                    break;
                case 10:
                    enName = 'October';
                    locName = this.model.loc('MonthOctober');
                    break;
                case 11:
                    enName = 'November';
                    locName = this.model.loc('MonthNovember');
                    break;
                case 12:
                    enName = 'December';
                    locName = this.model.loc('MonthDecember');
                    break;
            }
            const enShortName = enName.substring(0, 3);
            const locShortName = locName.substring(0, 3);
            value = value.replace(enName, i).replace(enName.toLowerCase(), i).replace(enShortName, i).replace(enShortName.toLowerCase(), i);
            value = value.replace(locName, i).replace(locName.toLowerCase(), i).replace(locShortName, i).replace(locShortName.toLowerCase(), i);
        }
        return value;
    }
    getDate(dateTimeObj) {
        return new Date(dateTimeObj.year, dateTimeObj.month - 1, dateTimeObj.day, dateTimeObj.hours, dateTimeObj.minutes, dateTimeObj.seconds);
    }
    getDateTimeObject(date) {
        if (!date) {
            date = new Date();
        }
        const dateTimeObject = new DateTimeObject();
        dateTimeObject.year = date.getFullYear();
        dateTimeObject.month = date.getMonth() + 1;
        dateTimeObject.day = date.getDate();
        dateTimeObject.hours = date.getHours();
        dateTimeObject.minutes = date.getMinutes();
        dateTimeObject.seconds = date.getSeconds();
        return dateTimeObject;
    }
    getDateTimeFromString(value, format) {
        const charIsDigit = (ch) => {
            return ('0123456789'.indexOf(ch) >= 0);
        };
        if (!value) {
            return new Date();
        }
        value = this.replaceMonths(value);
        let dateTime = new Date();
        // If the date format is not specified, then deserializator for getting date and time is applied
        if (format === null) {
            format = 'dd.MM.yyyy hh:mm:ss';
        }
        // Otherwise the format is parsed. Now only numeric date and time formats are supported
        let year = 1970;
        let month = 1;
        let day = 1;
        let hour = 0;
        let minute = 0;
        let second = 0;
        let millisecond = 0;
        let char = '';
        let pos = 0;
        const values = [];
        // Parse date and time into separate numeric values
        while (pos < value.length) {
            char = value.charAt(pos);
            if (charIsDigit(char)) {
                values.push(char);
                pos++;
                while (pos < value.length && charIsDigit(value.charAt(pos))) {
                    values[values.length - 1] += value.charAt(pos);
                    pos++;
                }
                values[values.length - 1] = this.strToInt(values[values.length - 1]);
            }
            pos++;
        }
        pos = 0;
        let charCount = 0;
        let index = -1;
        let is12hour = false;
        // Parsing format and replacement of appropriate values of date and time
        while (pos < format.length) {
            char = format.charAt(pos);
            charCount = 0;
            if (char === 'Y' || char === 'y' || char === 'M' || char === 'd' || char === 'h' || char === 'H' ||
                char === 'm' || char === 's' || char === 'f' || char === 'F' || char === 't' || char === 'z') {
                index++;
                while (pos < format.length && format.charAt(pos) === char) {
                    pos++;
                    charCount++;
                }
            }
            switch (char) {
                case 'Y': // full year
                    year = values[index];
                    break;
                case 'y': // year
                    if (values[index] < 1000) {
                        year = 2000 + values[index];
                    }
                    else {
                        year = values[index];
                    }
                    break;
                case 'M': // month
                    month = values[index];
                    break;
                case 'd': // day
                    day = values[index];
                    break;
                case 'h': // (hour 12)
                    is12hour = true;
                    hour = values[index];
                    break;
                case 'H': // (hour 24)
                    hour = values[index];
                    break;
                case 'm': // minute
                    minute = values[index];
                    break;
                case 's': // second
                    second = values[index];
                    break;
                case 'f': // second fraction
                case 'F': // second fraction, trailing zeroes are trimmed
                    millisecond = values[index];
                    break;
                case 't': // PM or AM
                    if (value.toLowerCase().indexOf('am') >= 0 && hour === 12) {
                        hour = 0;
                    }
                    if (value.toLowerCase().indexOf('pm') >= 0 && hour < 12) {
                        hour += 12;
                    }
                    break;
                default:
                    pos++;
                    break;
            }
        }
        dateTime = new Date(year || new Date().getFullYear(), month - 1 || 0, day || 1, hour || 0, minute || 0, second, millisecond || 0);
        if (!dateTime || isNaN(dateTime)) {
            return new Date();
        }
        return dateTime;
    }
    getStringDateTime(object, dateTimeType) {
        if (dateTimeType === 'Date') {
            object.hours = 0;
            object.minutes = 0;
            object.seconds = 0;
        }
        return object.month + '/' + object.day + '/' + object.year + ' ' +
            (object.hours > 12 ? object.hours - 12 : object.hours) + ':' + object.minutes + ':' + object.seconds + ' ' +
            (object.hours < 12 ? 'AM' : 'PM');
    }
    dateTimeObjectToString(dateTimeObject, typeDateTimeObject) {
        const date = new Date(dateTimeObject.year, dateTimeObject.month - 1, dateTimeObject.day, dateTimeObject.hours, dateTimeObject.minutes, dateTimeObject.seconds);
        if (this.model.options.appearance.parametersPanelDateFormat !== '') {
            return this.formatDate(date, this.model.options.appearance.parametersPanelDateFormat);
        }
        return this.dateToLocaleString(date, typeDateTimeObject);
    }
    dateToLocaleString(date, dateTimeType) {
        const timeString = date.toLocaleTimeString();
        const isAmericanFormat = timeString.toLowerCase().indexOf('am') >= 0 || timeString.toLowerCase().indexOf('pm') >= 0;
        let formatDate = isAmericanFormat ? 'MM/dd/yyyy' : 'dd.MM.yyyy';
        const yyyy = date.getFullYear();
        const yy = yyyy.toString().substring(2);
        const M = date.getMonth() + 1;
        const MM = M < 10 ? '0' + M : M;
        const d = date.getDate();
        const dd = d < 10 ? '0' + d : d;
        formatDate = formatDate.replace(/yyyy/i, yyyy);
        formatDate = formatDate.replace(/yy/i, yy);
        formatDate = formatDate.replace(/MM/i, MM);
        formatDate = formatDate.replace(/M/i, M);
        formatDate = formatDate.replace(/dd/i, dd);
        formatDate = formatDate.replace(/d/i, d);
        let h = date.getHours();
        let tt = '';
        if (isAmericanFormat) {
            tt = h < 12 ? ' AM' : ' PM';
            h = h > 12 ? h - 12 : h;
            if (h === 0) {
                h = 12;
            }
        }
        else {
            h = h < 10 ? '0' + h : h;
        }
        let m = date.getMinutes();
        m = m < 10 ? '0' + m : m;
        let s = date.getSeconds();
        s = s < 10 ? '0' + s : s;
        const formatTime = h + ':' + m + ':' + s + tt;
        if (dateTimeType === 'Time') {
            return formatTime;
        }
        if (dateTimeType === 'Date') {
            return formatDate;
        }
        return formatDate + ' ' + formatTime;
    }
    formatDate(formatDate, formatString) {
        const yyyy = formatDate.getFullYear();
        const yy = yyyy.toString().substring(2);
        const m = formatDate.getMonth() + 1;
        const mm = m < 10 ? '0' + m : m;
        const d = formatDate.getDate();
        const dd = d < 10 ? '0' + d : d;
        const h = formatDate.getHours();
        const hh = h < 10 ? '0' + h : h;
        const h12 = h > 12 ? h - 12 : (h > 0 ? h : 12);
        const hh12 = h12 < 10 ? '0' + h12 : h12;
        const n = formatDate.getMinutes();
        const nn = n < 10 ? '0' + n : n;
        const s = formatDate.getSeconds();
        const ss = s < 10 ? '0' + s : s;
        const tt = h < 12 ? 'AM' : 'PM';
        formatString = formatString.replace(/yyyy/gi, yyyy);
        formatString = formatString.replace(/yy/gi, yy);
        formatString = formatString.replace(/Y/, yyyy);
        formatString = formatString.replace(/MM/g, mm);
        formatString = formatString.replace(/M/g, m);
        formatString = formatString.replace(/dd/g, dd);
        formatString = formatString.replace(/d/g, d);
        formatString = formatString.replace(/hh/g, hh12);
        formatString = formatString.replace(/h/g, h12);
        formatString = formatString.replace(/HH/g, hh);
        formatString = formatString.replace(/H/g, h);
        formatString = formatString.replace(/mm/g, nn);
        formatString = formatString.replace(/m/g, n);
        formatString = formatString.replace(/ss/g, ss);
        formatString = formatString.replace(/s/g, s);
        formatString = formatString.replace(/tt/gi, tt);
        formatString = formatString.replace(/t/gi, tt.substr(0, 1));
        return formatString;
    }
    getStringKey(key, params) {
        if (key === null) {
            return '';
        }
        return ((params.type === 'DateTime') ? this.dateTimeObjectToString(key, params.dateTimeType) : key);
    }
    stringToTime(timeStr) {
        const timeArray = timeStr.split(':');
        const time = { hours: 0, minutes: 0, seconds: 0 };
        time.hours = this.strToInt(timeArray[0]);
        if (timeArray.length > 1) {
            time.minutes = this.strToInt(timeArray[1]);
        }
        if (timeArray.length > 2) {
            time.seconds = this.strToInt(timeArray[2]);
        }
        if (time.hours < 0) {
            time.hours = 0;
        }
        if (time.minutes < 0) {
            time.minutes = 0;
        }
        if (time.seconds < 0) {
            time.seconds = 0;
        }
        if (time.hours > 23) {
            time.hours = 23;
        }
        if (time.minutes > 59) {
            time.minutes = 59;
        }
        if (time.seconds > 59) {
            time.seconds = 59;
        }
        return time;
    }
    newGuid() {
        const chars = '0123456789abcdefghijklmnopqrstuvwxyz'.split('');
        const uuid = [];
        const rnd = Math.random;
        let r;
        uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';
        uuid[14] = '4';
        for (let i = 0; i < 36; i++) {
            if (!uuid[i]) {
                r = 0 | rnd() * 16;
                uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r & 0xf];
            }
        }
        return uuid.join('');
    }
    getCountDaysOfMonth(year, month) {
        const countDaysInMonth = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        let count = countDaysInMonth[month];
        if (month === 1) {
            if (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) {
                count = 29;
            }
            else {
                count = 28;
            }
        }
        return count;
    }
    setObjectToCenter(object, defaultTop) {
        const leftPos = (this.model.viewerSize.width / 2 - object.offsetWidth / 2);
        const topPos = this.model.options.appearance.fullScreenMode ? (this.model.viewerSize.height / 2 - object.offsetHeight / 2) : (defaultTop ? defaultTop : 250);
        return { left: Math.max(leftPos, 0), top: Math.max(topPos, 0) };
    }
    checkCloudAuthorization(action) {
        return true;
    }
    getCookie_(name) {
        const cookie = ' ' + document.cookie;
        const search = ' ' + name + '=';
        let setStr = null;
        let offset = 0;
        let end = 0;
        if (cookie.length > 0) {
            offset = cookie.indexOf(search);
            if (offset !== -1) {
                offset += search.length;
                end = cookie.indexOf(';', offset);
                if (end === -1) {
                    end = cookie.length;
                }
                setStr = unescape(cookie.substring(offset, end));
            }
        }
        return setStr;
    }
    getCookie(name) {
        if (this.model.options.standaloneJsMode || typeof localStorage === 'undefined' || name.indexOf('sti_') == 0 || name.indexOf('login') == 0) {
            return this.getCookie_(name);
        }
        let value = localStorage.getItem(name);
        if (value != null) {
            return value;
        }
        else {
            value = this.getCookie_(name);
            if (value != null) {
                this.removeCookie(name);
                localStorage.setItem(name, value);
            }
            return value;
        }
    }
    removeCookie(name) {
        document.cookie = name + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/';
    }
    setCookie(name, value, path, domain, secure, expires) {
        if (this.model.options.standaloneJsMode || typeof localStorage === 'undefined' || name.indexOf('sti_') === 0 || name.indexOf('login') === 0) {
            // save to cookies
            if (value && typeof (value) === 'string' && value.length >= 4096) {
                return;
            }
            const pathName = location.pathname;
            const expDate = new Date();
            expDate.setTime(expDate.getTime() + (365 * 24 * 3600 * 1000));
            document.cookie = name + '=' + escape(value) +
                '; expires=' + (expires || expDate['toGMTString']()) +
                ((path) ? '; path=' + path : '; path=/') +
                ((domain) ? '; domain=' + domain : '') +
                ((secure) ? '; secure' : '');
        }
        else {
            // save to localstorage
            localStorage.setItem(name, value);
        }
    }
    getNavigatorName() {
        if (!navigator) {
            return 'Unknown';
        }
        const userAgent = navigator.userAgent;
        if (userAgent.indexOf('Edge') >= 0) {
            return 'Edge';
        }
        if (userAgent.indexOf('MSIE') >= 0 || userAgent.indexOf('Trident') >= 0) {
            return 'MSIE';
        }
        if (userAgent.indexOf('Gecko') >= 0) {
            if (userAgent.indexOf('Chrome') >= 0) {
                return 'Chrome';
            }
            if (userAgent.indexOf('Safari') >= 0) {
                return 'Safari';
            }
            return 'Mozilla';
        }
        if (userAgent.indexOf('Opera') >= 0) {
            return 'Opera';
        }
    }
    isTouchDevice() {
        return ('ontouchstart' in document.documentElement);
    }
    isMobileDevice() {
        return /iPhone|iPad|iPod|Macintosh|Android|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    getHumanFileSize(value, decimals) {
        const i = Math.floor(Math.log(value) / Math.log(1024));
        return ((value / Math.pow(1024, i)).toFixed(decimals)) + ' ' + ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'][i];
    }
    getZoomMenuItems() {
        const items = [{ name: 'Zoom25', caption: '25%', img: '' },
            { name: 'Zoom50', caption: '50%', img: '' },
            { name: 'Zoom75', caption: '75%', img: '' },
            { name: 'Zoom100', caption: '100%', img: '' },
            { name: 'Zoom150', caption: '150%', img: '' },
            { name: 'Zoom200', caption: '200%', img: '' }];
        if (this.model.options.toolbar.displayMode !== 'Separated') {
            items.push({ type: 'separator' });
            items.push({ name: 'ZoomOnePage', caption: this.model.loc('ZoomOnePage'), img: 'ZoomOnePage.png' });
            items.push({ name: 'ZoomPageWidth', caption: this.model.loc('ZoomPageWidth'), img: 'ZoomPageWidth.png' });
        }
        return items;
    }
    get helpLinks() {
        return {
            Print: 'user-manual/index.html?viewer_reports.htm#toolbar',
            Save: 'user-manual/index.html?viewer_reports.htm#toolbar',
            SendEmail: 'user-manual/index.html?viewer_reports.htm#toolbar',
            Bookmarks: 'user-manual/index.html?viewer_reports.htm#toolbar',
            Parameters: 'user-manual/index.html?viewer_reports.htm#toolbar',
            FirstPage: 'user-manual/index.html?viewer_reports.htm#statusbar',
            PrevPage: 'user-manual/index.html?viewer_reports.htm#statusbar',
            NextPage: 'user-manual/index.html?viewer_reports.htm#statusbar',
            LastPage: 'user-manual/index.html?viewer_reports.htm#statusbar',
            FullScreen: 'user-manual/index.html?viewer_reports.htm#toolbar',
            Zoom: 'user-manual/index.html?viewer_reports.htm#statusbar',
            ViewMode: 'user-manual/index.html?viewer_reports.htm#displayingmode',
            Editor: 'user-manual/index.html?viewer_reports.htm#toolbar',
            Find: 'user-manual/index.html?viewer_reports.htm#searchpanel',
            DashboardToolbar: 'user-manual/index.html?viewer_dashboards.htm#controlbuttonsofthedashboard',
            DashboardElementToolbar: 'user-manual/index.html?viewer_dashboards.htm#elementcontrols',
            DashboardExport: 'user-manual/index.html?exports_dashboards.htm',
            DashboardPdfExport: 'user-manual/index.html?exports_dashboards.htm#pdfexportsettings',
            DashboardExcelExport: 'user-manual/index.html?exports_dashboards.htm#excelexportsettings',
            DashboardImageExport: 'user-manual/index.html?exports_dashboards.htm#imageexportsettings',
            DashboardDataExport: 'user-manual/index.html?exports_dashboards.htm#exportsettingsofdata'
        };
    }
    getBackText(withoutBrackets) {
        const backText = String.fromCharCode(84) + 'r' + String.fromCharCode(105) + 'a';
        if (withoutBrackets) {
            return backText + String.fromCharCode(108);
        }
        return String.fromCharCode(91) + backText + String.fromCharCode(108) + String.fromCharCode(93);
    }
};
HelperService.ctorParameters = () => [
    { type: ModelService },
    { type: AnimationService }
];
HelperService = __decorate([
    Injectable()
], HelperService);
export { HelperService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9zdGltdWxzb2Z0LXZpZXdlci1hbmd1bGFyLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL2hlbHBlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUN2RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBSTNDLElBQWEsYUFBYSxHQUExQixNQUFhLGFBQWE7SUFFeEIsWUFBb0IsS0FBbUIsRUFBVSxnQkFBa0M7UUFBL0QsVUFBSyxHQUFMLEtBQUssQ0FBYztRQUFVLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7SUFBSSxDQUFDO0lBRWpGLEdBQUcsQ0FBQyxLQUFhLEVBQUUsR0FBWTtRQUNwQyxPQUFPLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRU0sUUFBUSxDQUFDLEdBQVEsRUFBRSxhQUFzQixFQUFFLFFBQWtCO1FBQ2xFLElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1FBQ3RFLElBQUksR0FBRyxDQUFDLFlBQVksRUFBRTtZQUNwQixPQUFPLEdBQUcsQ0FBQyxTQUFTLEtBQUssYUFBYSxFQUFFO2dCQUN0QyxNQUFNLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQztnQkFDeEIsSUFBSSxDQUFDLEdB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QUFZLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMvQyxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDL0MsWUFBWSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzdDLFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMvQyxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0MsWUFBWSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQy9DLFlBQVksR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM3QyxZQUFZLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDaEQsWUFBWSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFNUQsT0FBTyxZQUFZLENBQUM7SUFDdEIsQ0FBQztJQUVNLFlBQVksQ0FBQyxHQUFXLEVBQUUsTUFBTTtRQUNyQyxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7WUFDaEIsT0FBTyxFQUFFLENBQUM7U0FDWDtRQUVELE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0RyxDQUFDO0lBRU0sWUFBWSxDQUFDLE9BQWU7UUFDakMsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQyxNQUFNLElBQUksR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7UUFFbEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFBRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FBRTtRQUN6RSxJQUFJLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQUUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQUU7UUFDekUsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1NBQUU7UUFDdkMsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO1NBQUU7UUFDM0MsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO1NBQUU7UUFFM0MsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsRUFBRTtZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDekMsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1NBQUU7UUFDN0MsSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsRUFBRTtZQUFFLElBQUksQ0FBQyxPQUFPLEdBQUcs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b250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi9tb2RlbC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQW5pbWF0aW9uU2VydmljZSB9IGZyb20gJy4vYW5pbWF0aW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBEYXRlVGltZU9iamVjdCB9IGZyb20gJy4vb2JqZWN0cyc7XHJcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAnLi4vbWVudS9tZW5pLWl0ZW0uY29tcG9uZW50JztcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEhlbHBlclNlcnZpY2Uge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1vZGVsOiBNb2RlbFNlcnZpY2UsIHByaXZhdGUgYW5pbWF0aW9uU2VydmljZTogQW5pbWF0aW9uU2VydmljZSkgeyB9XHJcblxyXG4gIHB1YmxpYyB2YWwodmFsdWU6IHN0cmluZywgZGVmPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHZhbHVlLnRyaW0oKSAhPT0gJycgPyB2YWx1ZSA6IChkZWYgfHwgJycpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGZpbmRQb3NZKG9iajogYW55LCBtYWluQ2xhc3NOYW1lPzogc3RyaW5nLCBub1Njcm9sbD86IGJvb2xlYW4pIHtcclxuICAgIGxldCBjdXJ0b3AgPSBub1Njcm9sbCA/IDAgOiB0aGlzLmdldFNjcm9sbFlPZmZzZXQob2JqLCBtYWluQ2xhc3NOYW1lKTtcclxuICAgIGlmIChvYmoub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgIHdoaWxlIChvYmouY2xhc3NOYW1lICE9PSBtYWluQ2xhc3NOYW1lKSB7XHJcbiAgICAgICAgY3VydG9wICs9IG9iai5vZmZzZXRUb3A7XHJcbiAgICAgICAgaWYgKCFvYmoub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqID0gb2JqLm9mZnNldFBhcmVudDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChvYmoueSkge1xyXG4gICAgICBjdXJ0b3AgKz0gb2JqLnk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3VydG9wO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFNjcm9sbFlPZmZzZXQob2JqOiBhbnksIG1haW5DbGFzc05hbWU6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICBsZXQgc2Nyb2xsdG9wID0gMDtcclxuICAgIGlmIChvYmoucGFyZW50RWxlbWVudCkge1xyXG4gICAgICB3aGlsZSAob2JqLmNsYXNzTmFtZSAhPT0gbWFpbkNsYXNzTmFtZSkge1xyXG4gICAgICAgIGlmICgnc2Nyb2xsVG9wJyBpbiBvYmopIHtcclxuICAgICAgICAgIHNjcm9sbHRvcCAtPSBvYmouc2Nyb2xsVG9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW9iai5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqID0gb2JqLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2Nyb2xsdG9wO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGZpbmRQb3NYKG9iajogYW55LCBtYWluQ2xhc3NOYW1lOiBzdHJpbmcsIG5vU2Nyb2xsPzogYm9vbGVhbikge1xyXG4gICAgbGV0IGN1cmxlZnQgPSBub1Njcm9sbCA/IDAgOiB0aGlzLmdldFNjcm9sbFhPZmZzZXQob2JqLCBtYWluQ2xhc3NOYW1lKTtcclxuICAgIGlmIChvYmoub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgIHdoaWxlIChvYmouY2xhc3NOYW1lICE9PSBtYWluQ2xhc3NOYW1lKSB7XHJcbiAgICAgICAgY3VybGVmdCArPSBvYmoub2Zmc2V0TGVmdDtcclxuICAgICAgICBpZiAoIW9iai5vZmZzZXRQYXJlbnQpIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmogPSBvYmoub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG9iai54KSB7XHJcbiAgICAgIGN1cmxlZnQgKz0gb2JqLng7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3VybGVmdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRTY3JvbGxYT2Zmc2V0KG9iajogYW55LCBtYWluQ2xhc3NOYW1lOiBzdHJpbmcpIHtcclxuICAgIGxldCBzY3JvbGxsZWZ0ID0gMDtcclxuICAgIGlmIChvYmoucGFyZW50RWxlbWVudCkge1xyXG4gICAgICB3aGlsZSAob2JqLmNsYXNzTmFtZSAhPT0gbWFpbkNsYXNzTmFtZSkge1xyXG4gICAgICAgIGlmICgnc2Nyb2xsTGVmdCcgaW4gb2JqKSB7XHJcbiAgICAgICAgICBzY3JvbGxsZWZ0IC09IG9iai5zY3JvbGxMZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW9iai5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgb2JqID0gb2JqLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc2Nyb2xsbGVmdDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzaG93SGVscFdpbmRvdyh1cmw6IHN0cmluZykge1xyXG4gICAgbGV0IGhlbHBMYW5ndWFnZSA9ICdlbic7XHJcbiAgICBzd2l0Y2ggKHRoaXMubW9kZWwub3B0aW9ucy5jdWx0dXJlTmFtZSkge1xyXG4gICAgICBjYXNlICdydSc6IGhlbHBMYW5ndWFnZSA9ICdydSc7XHJcbiAgICAgIC8vIGNhc2UgJ2RlJzogaGVscExhbmd1YWdlID0gJ2RlJztcclxuICAgIH1cclxuICAgIHRoaXMub3Blbk5ld1dpbmRvdygnaHR0cHM6Ly93d3cuc3RpbXVsc29mdC5jb20vJyArIGhlbHBMYW5ndWFnZSArICcvZG9jdW1lbnRhdGlvbi9vbmxpbmUvJyArIHVybCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgb3Blbk5ld1dpbmRvdyh1cmw6IHN0cmluZywgbmFtZT86IHN0cmluZywgc3BlY3M/OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiB3aW5kb3cub3Blbih1cmwsIG5hbWUsIHNwZWNzKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzY3JvbGxUb0FuY2hvcihhbmNob3JOYW1lOiBzdHJpbmcsIGNvbXBvbmVudEd1aWQ/OiBzdHJpbmcpIHtcclxuICAgIGxldCBhSHlwZXJsaW5rcyA9IHRoaXMubW9kZWwuY29udHJvbHMucmVwb3J0UGFuZWwuZWwubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImFcIik7XHJcbiAgICBjb25zdCBpZGVudGljYWxBbmNob3JzID0gW107XHJcbiAgICBpZiAoYW5jaG9yTmFtZSkge1xyXG4gICAgICBhbmNob3JOYW1lID0gYW5jaG9yTmFtZS5yZXBsYWNlKC8hISM5Mi9nLCAnXFxcXCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChjb21wb25lbnRHdWlkKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYUh5cGVybGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoYUh5cGVybGlua3NbaV0uZ2V0QXR0cmlidXRlKCdndWlkJykgPT09IGNvbXBvbmVudEd1aWQpIHtcclxuICAgICAgICAgIGlkZW50aWNhbEFuY2hvcnMucHVzaChhSHlwZXJsaW5rc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlkZW50aWNhbEFuY2hvcnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGxldCBndWlkSW5kZXggPSBhbmNob3JOYW1lLmluZGV4T2YoXCIjR1VJRCNcIik7XHJcblxyXG4gICAgICBpZiAoaWRlbnRpY2FsQW5jaG9ycy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIGxldCBhSHlwZXJsaW5rcyA9IHRoaXMubW9kZWwuY29udHJvbHMucmVwb3J0UGFuZWwuZWwubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImFcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhSHlwZXJsaW5rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGFIeXBlcmxpbmtzW2ldLm5hbWUgJiYgKChndWlkSW5kZXggPj0gMCAmJiAoYUh5cGVybGlua3NbaV0ubmFtZS5pbmRleE9mKGFuY2hvck5hbWUuc3Vic3RyaW5nKGd1aWRJbmRleCArIDYpKSA+PSAwIHx8IGFuY2hvck5hbWUuc3Vic3RyaW5nKDAsIGd1aWRJbmRleCkgPT0gYUh5cGVybGlua3NbaV0ubmFtZSkpIHx8IGFIeXBlcmxpbmtzW2ldLm5hbWUgPT0gYW5jaG9yTmFtZSkpXHJcbiAgICAgICAgICAgIGlkZW50aWNhbEFuY2hvcnMucHVzaChhSHlwZXJsaW5rc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlkZW50aWNhbEFuY2hvcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBhbmNob3IgPSBpZGVudGljYWxBbmNob3JzWzBdO1xyXG4gICAgICBjb25zdCBhbmNob3JQYXJlbnQgPSBhbmNob3IucGFyZW50RWxlbWVudCB8fCBhbmNob3I7XHJcbiAgICAgIGxldCBhbmNob3JIZWlnaHQgPSBhbmNob3JQYXJlbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICBjb25zdCBhbmNob3JPZmZzZXRUb3AgPSBhbmNob3JQYXJlbnQub2Zmc2V0VG9wO1xyXG5cclxuICAgICAgaWRlbnRpY2FsQW5jaG9ycy5mb3JFYWNoKChpZGVudGljYWxBbmNob3IpID0+IHtcclxuICAgICAgICBjb25zdCBuZXh0QW5jaG9yUGFyZW50ID0gaWRlbnRpY2FsQW5jaG9yLnBhcmVudEVsZW1lbnQgfHwgaWRlbnRpY2FsQW5jaG9yO1xyXG4gICAgICAgIGlmIChuZXh0QW5jaG9yUGFyZW50Lm9mZnNldFRvcCA+IGFuY2hvck9mZnNldFRvcCkge1xyXG4gICAgICAgICAgYW5jaG9ySGVpZ2h0ID0gTWF0aC5tYXgoYW5jaG9ySGVpZ2h0LCBuZXh0QW5jaG9yUGFyZW50Lm9mZnNldFRvcCAtIGFuY2hvck9mZnNldFRvcCArIG5leHRBbmNob3JQYXJlbnQub2Zmc2V0SGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBkYXRlLmdldFRpbWUoKSArIHRoaXMubW9kZWwub3B0aW9ucy5zY3JvbGxEdXJhdGlvbjtcclxuICAgICAgY29uc3QgdGFyZ2V0VG9wID0gdGhpcy5maW5kUG9zWShhbmNob3IsIHRoaXMubW9kZWwub3B0aW9ucy5hcHBlYXJhbmNlLnNjcm9sbGJhcnNNb2RlID8gJ3N0aUpzVmlld2VyUmVwb3J0UGFuZWwnIDogbnVsbCwgdHJ1ZSkgLSBhbmNob3JQYXJlbnQub2Zmc2V0SGVpZ2h0ICogMjtcclxuXHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uU2VydmljZS5zaG93QW5pbWF0aW9uRm9yU2Nyb2xsKHRoaXMubW9kZWwuY29udHJvbHMucmVwb3J0UGFuZWwuZWwubmF0aXZlRWxlbWVudCwgdGFyZ2V0VG9wLCBlbmRUaW1lLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcGFnZSA9IHRoaXMuZ2V0UGFnZUZyb21BbmNob3JFbGVtZW50KGFuY2hvcik7XHJcbiAgICAgICAgY29uc3QgYW5jaG9yUGFyZW50VG9wUG9zID0gdGhpcy5maW5kUG9zWShhbmNob3JQYXJlbnQsICdzdGlKc1ZpZXdlclJlcG9ydFBhbmVsJywgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgcGFnZVRvcFBvcyA9IHBhZ2UgPyB0aGlzLmZpbmRQb3NZKHBhZ2UsICdzdGlKc1ZpZXdlclJlcG9ydFBhbmVsJywgdHJ1ZSkgOiBhbmNob3JQYXJlbnRUb3BQb3M7XHJcblxyXG4gICAgICAgIHRoaXMucmVtb3ZlQm9va21hcmtzTGFiZWwoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLm1vZGVsLmNvbnRyb2xzLmJvb2ttYXJrc0xhYmVsID0gbGFiZWw7XHJcbiAgICAgICAgbGFiZWwuY2xhc3NOYW1lID0gJ3N0aUpzVmlld2VyQm9va21hcmtzTGFiZWwnO1xyXG5cclxuICAgICAgICBjb25zdCBsYWJlbE1hcmdpbiA9IDIwICogKHRoaXMubW9kZWwucmVwb3J0UGFyYW1zLnpvb20gLyAxMDApO1xyXG4gICAgICAgIGNvbnN0IGxhYmVsV2lkdGggPSBwYWdlID8gcGFnZS5vZmZzZXRXaWR0aCAtIGxhYmVsTWFyZ2luIC0gNiA6IGFuY2hvclBhcmVudC5vZmZzZXRXaWR0aDtcclxuICAgICAgICBjb25zdCBsYWJlbEhlaWdodCA9IGFuY2hvckhlaWdodCAtIDI7XHJcbiAgICAgICAgbGFiZWwuc3R5bGUud2lkdGggPSBsYWJlbFdpZHRoICsgJ3B4JztcclxuICAgICAgICBsYWJlbC5zdHlsZS5oZWlnaHQgPSBsYWJlbEhlaWdodCArICdweCc7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hcmdpbnMgPSBwYWdlLnBhZ2VBdHRyaWJ1dGVzLm1hcmdpbnM/LnJlcGxhY2UoJ3B4JywgJycpLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgY29uc3QgcGFnZUxlZnRNYXJnaW4gPSBwYWdlLnBhZ2VBdHRyaWJ1dGVzLm1hcmdpbnMgPyB0aGlzLnN0clRvSW50KG1hcmdpbnNbM10pIDogMDtcclxuICAgICAgICBjb25zdCBwYWdlVG9wTWFyZ2luID0gcGFnZS5wYWdlQXR0cmlidXRlcy5tYXJnaW5zID8gdGhpcy5zdHJUb0ludChtYXJnaW5zWzBdKSA6IDA7XHJcbiAgICAgICAgbGFiZWwuc3R5bGUubWFyZ2luTGVmdCA9IChsYWJlbE1hcmdpbiAvIDIgLSBwYWdlTGVmdE1hcmdpbikgKyAncHgnO1xyXG4gICAgICAgIGxhYmVsLnN0eWxlLm1hcmdpblRvcCA9IChhbmNob3JQYXJlbnRUb3BQb3MgLSBwYWdlVG9wUG9zIC0gcGFnZVRvcE1hcmdpbiAtICh0aGlzLm1vZGVsLnJlcG9ydFBhcmFtcy56b29tIC8gMTAwKSAtIDEpICsgJ3B4JztcclxuXHJcbiAgICAgICAgcGFnZS5pbnNlcnRCZWZvcmUobGFiZWwsIHBhZ2UuY2hpbGROb2Rlc1swXSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbW92ZUJvb2ttYXJrc0xhYmVsKCkge1xyXG4gICAgaWYgKHRoaXMubW9kZWwuY29udHJvbHMuYm9va21hcmtzTGFiZWwpIHtcclxuICAgICAgdGhpcy5tb2RlbC5jb250cm9scy5ib29rbWFya3NMYWJlbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMubW9kZWwuY29udHJvbHMuYm9va21hcmtzTGFiZWwpO1xyXG4gICAgICB0aGlzLm1vZGVsLmNvbnRyb2xzLmJvb2ttYXJrc0xhYmVsID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRQYWdlRnJvbUFuY2hvckVsZW1lbnQoYW5jaG9yRWxlbWVudDogYW55KSB7XHJcbiAgICBsZXQgb2JqID0gYW5jaG9yRWxlbWVudDtcclxuICAgIHdoaWxlIChvYmoucGFyZW50RWxlbWVudCkge1xyXG4gICAgICBpZiAob2JqLmNsYXNzTmFtZSAmJiBvYmouY2xhc3NOYW1lLmluZGV4T2YoJ3N0aUpzVmlld2VyUGFnZScpID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgfVxyXG4gICAgICBvYmogPSBvYmoucGFyZW50RWxlbWVudDtcclxuICAgIH1cclxuICAgIHJldHVybiBvYmo7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RyVG9JbnQodmFsdWU6IGFueSk6IG51bWJlciB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xyXG4gICAgcmV0dXJuIHJlc3VsdCB8fCAwO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0clRvRG91YmxlKHZhbHVlOiBhbnkpOiBudW1iZXIge1xyXG4gICAgaWYgKHZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzdWx0ID0gcGFyc2VGbG9hdCh2YWx1ZS50b1N0cmluZygpLnJlcGxhY2UoJywnLCAnLicpLnRyaW0oKSk7XHJcbiAgICByZXR1cm4gcmVzdWx0IHx8IDA7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgY29weU9iamVjdChvOiBhbnkpOiBhbnkge1xyXG4gICAgaWYgKCFvIHx8ICdvYmplY3QnICE9PSB0eXBlb2Ygbykge1xyXG4gICAgICByZXR1cm4gbztcclxuICAgIH1cclxuICAgIGNvbnN0IGMgPSAnZnVuY3Rpb24nID09PSB0eXBlb2Ygby5wb3AgPyBbXSA6IHt9O1xyXG4gICAgbGV0IHA7XHJcbiAgICBsZXQgdjtcclxuICAgIGZvciAocCBpbiBvKSB7XHJcbiAgICAgIGlmIChvLmhhc093blByb3BlcnR5KHApKSB7XHJcbiAgICAgICAgdiA9IG9bcF07XHJcbiAgICAgICAgaWYgKHYgJiYgJ29iamVjdCcgPT09IHR5cGVvZiB2KSB7XHJcbiAgICAgICAgICBjW3BdID0gdGhpcy5jb3B5T2JqZWN0KHYpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjW3BdID0gdjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldENvdW50T2JqZWN0cyhvYmplY3RBcnJheTogYW55KTogbnVtYmVyIHtcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBpZiAob2JqZWN0QXJyYXkpIHtcclxuICAgICAgZm9yIChjb25zdCBzaW5nbGVPYmplY3QgaW4gb2JqZWN0QXJyYXkpIHtcclxuICAgICAgICBjb3VudCsrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY291bnQ7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgcmVwbGFjZU1vbnRocyh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDEyOyBpKyspIHtcclxuICAgICAgbGV0IGVuTmFtZSA9ICcnO1xyXG4gICAgICBsZXQgbG9jTmFtZSA9ICcnO1xyXG4gICAgICBzd2l0Y2ggKGkpIHtcclxuICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICBlbk5hbWUgPSAnSmFudWFyeSc7XHJcbiAgICAgICAgICBsb2NOYW1lID0gdGhpcy5tb2RlbC5sb2MoJ01vbnRoSmFudWFyeScpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgIGVuTmFtZSA9ICdGZWJydWFyeSc7XHJcbiAgICAgICAgICBsb2NOYW1lID0gdGhpcy5tb2RlbC5sb2MoJ01vbnRoRmVicnVhcnknKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICBlbk5hbWUgPSAnTWFyY2gnO1xyXG4gICAgICAgICAgbG9jTmFtZSA9IHRoaXMubW9kZWwubG9jKCdNb250aE1hcmNoJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgZW5OYW1lID0gJ0FwcmlsJztcclxuICAgICAgICAgIGxvY05hbWUgPSB0aGlzLm1vZGVsLmxvYygnTW9udGhBcHJpbCcpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgIGVuTmFtZSA9ICdNYXknO1xyXG4gICAgICAgICAgbG9jTmFtZSA9IHRoaXMubW9kZWwubG9jKCdNb250aE1heScpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgIGVuTmFtZSA9ICdKdW5lJztcclxuICAgICAgICAgIGxvY05hbWUgPSB0aGlzLm1vZGVsLmxvYygnTW9udGhKdW5lJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgZW5OYW1lID0gJ0p1bHknO1xyXG4gICAgICAgICAgbG9jTmFtZSA9IHRoaXMubW9kZWwubG9jKCdNb250aEp1bHknKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICBlbk5hbWUgPSAnQXVndXN0JztcclxuICAgICAgICAgIGxvY05hbWUgPSB0aGlzLm1vZGVsLmxvYygnTW9udGhBdWd1c3QnKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICBlbk5hbWUgPSAnU2VwdGVtYmVyJztcclxuICAgICAgICAgIGxvY05hbWUgPSB0aGlzLm1vZGVsLmxvYygnTW9udGhTZXB0ZW1iZXInKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgZW5OYW1lID0gJ09jdG9iZXInO1xyXG4gICAgICAgICAgbG9jTmFtZSA9IHRoaXMubW9kZWwubG9jKCdNb250aE9jdG9iZXInKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgZW5OYW1lID0gJ05vdmVtYmVyJztcclxuICAgICAgICAgIGxvY05hbWUgPSB0aGlzLm1vZGVsLmxvYygnTW9udGhOb3ZlbWJlcicpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICBlbk5hbWUgPSAnRGVjZW1iZXInO1xyXG4gICAgICAgICAgbG9jTmFtZSA9IHRoaXMubW9kZWwubG9jKCdNb250aERlY2VtYmVyJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZW5TaG9ydE5hbWUgPSBlbk5hbWUuc3Vic3RyaW5nKDAsIDMpO1xyXG4gICAgICBjb25zdCBsb2NTaG9ydE5hbWUgPSBsb2NOYW1lLnN1YnN0cmluZygwLCAzKTtcclxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGVuTmFtZSwgaSBhcyBhbnkpLnJlcGxhY2UoZW5OYW1lLnRvTG93ZXJDYXNlKCksIGkgYXMgYW55KS5yZXBsYWNlKGVuU2hvcnROYW1lLCBpIGFzIGFueSkucmVwbGFjZShlblNob3J0TmFtZS50b0xvd2VyQ2FzZSgpLCBpIGFzIGFueSk7XHJcbiAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShsb2NOYW1lLCBpIGFzIGFueSkucmVwbGFjZShsb2NOYW1lLnRvTG93ZXJDYXNlKCksIGkgYXMgYW55KS5yZXBsYWNlKGxvY1Nob3J0TmFtZSwgaSBhcyBhbnkpLnJlcGxhY2UobG9jU2hvcnROYW1lLnRvTG93ZXJDYXNlKCksIGkgYXMgYW55KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGF0ZShkYXRlVGltZU9iajogRGF0ZVRpbWVPYmplY3QpOiBEYXRlIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVGltZU9iai55ZWFyLCBkYXRlVGltZU9iai5tb250aCAtIDEsIGRhdGVUaW1lT2JqLmRheSwgZGF0ZVRpbWVPYmouaG91cnMsIGRhdGVUaW1lT2JqLm1pbnV0ZXMsIGRhdGVUaW1lT2JqLnNlY29uZHMpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldERhdGVUaW1lT2JqZWN0KGRhdGU/OiBEYXRlKSB7XHJcbiAgICBpZiAoIWRhdGUpIHsgZGF0ZSA9IG5ldyBEYXRlKCk7IH1cclxuICAgIGNvbnN0IGRhdGVUaW1lT2JqZWN0OiBEYXRlVGltZU9iamVjdCA9IG5ldyBEYXRlVGltZU9iamVjdCgpO1xyXG4gICAgZGF0ZVRpbWVPYmplY3QueWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGRhdGVUaW1lT2JqZWN0Lm1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgIGRhdGVUaW1lT2JqZWN0LmRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgZGF0ZVRpbWVPYmplY3QuaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XHJcbiAgICBkYXRlVGltZU9iamVjdC5taW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICBkYXRlVGltZU9iamVjdC5zZWNvbmRzID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcblxyXG4gICAgcmV0dXJuIGRhdGVUaW1lT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldERhdGVUaW1lRnJvbVN0cmluZyh2YWx1ZTogc3RyaW5nLCBmb3JtYXQ6IHN0cmluZyk6IGFueSB7XHJcbiAgICBjb25zdCBjaGFySXNEaWdpdCA9IChjaDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIHJldHVybiAoJzAxMjM0NTY3ODknLmluZGV4T2YoY2gpID49IDApO1xyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgdmFsdWUgPSB0aGlzLnJlcGxhY2VNb250aHModmFsdWUpO1xyXG5cclxuICAgIGxldCBkYXRlVGltZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gICAgLy8gSWYgdGhlIGRhdGUgZm9ybWF0IGlzIG5vdCBzcGVjaWZpZWQsIHRoZW4gZGVzZXJpYWxpemF0b3IgZm9yIGdldHRpbmcgZGF0ZSBhbmQgdGltZSBpcyBhcHBsaWVkXHJcbiAgICBpZiAoZm9ybWF0ID09PSBudWxsKSB7XHJcbiAgICAgIGZvcm1hdCA9ICdkZC5NTS55eXl5IGhoOm1tOnNzJztcclxuICAgIH1cclxuICAgIC8vIE90aGVyd2lzZSB0aGUgZm9ybWF0IGlzIHBhcnNlZC4gTm93IG9ubHkgbnVtZXJpYyBkYXRlIGFuZCB0aW1lIGZvcm1hdHMgYXJlIHN1cHBvcnRlZFxyXG5cclxuICAgIGxldCB5ZWFyID0gMTk3MDtcclxuICAgIGxldCBtb250aCA9IDE7XHJcbiAgICBsZXQgZGF5ID0gMTtcclxuICAgIGxldCBob3VyID0gMDtcclxuICAgIGxldCBtaW51dGUgPSAwO1xyXG4gICAgbGV0IHNlY29uZCA9IDA7XHJcbiAgICBsZXQgbWlsbGlzZWNvbmQgPSAwO1xyXG5cclxuICAgIGxldCBjaGFyID0gJyc7XHJcbiAgICBsZXQgcG9zID0gMDtcclxuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xyXG5cclxuICAgIC8vIFBhcnNlIGRhdGUgYW5kIHRpbWUgaW50byBzZXBhcmF0ZSBudW1lcmljIHZhbHVlc1xyXG4gICAgd2hpbGUgKHBvcyA8IHZhbHVlLmxlbmd0aCkge1xyXG4gICAgICBjaGFyID0gdmFsdWUuY2hhckF0KHBvcyk7XHJcbiAgICAgIGlmIChjaGFySXNEaWdpdChjaGFyKSkge1xyXG4gICAgICAgIHZhbHVlcy5wdXNoKGNoYXIpO1xyXG4gICAgICAgIHBvcysrO1xyXG5cclxuICAgICAgICB3aGlsZSAocG9zIDwgdmFsdWUubGVuZ3RoICYmIGNoYXJJc0RpZ2l0KHZhbHVlLmNoYXJBdChwb3MpKSkge1xyXG4gICAgICAgICAgdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSArPSB2YWx1ZS5jaGFyQXQocG9zKTtcclxuICAgICAgICAgIHBvcysrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSA9IHRoaXMuc3RyVG9JbnQodmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHBvcysrO1xyXG4gICAgfVxyXG5cclxuICAgIHBvcyA9IDA7XHJcbiAgICBsZXQgY2hhckNvdW50ID0gMDtcclxuICAgIGxldCBpbmRleCA9IC0xO1xyXG4gICAgbGV0IGlzMTJob3VyID0gZmFsc2U7XHJcblxyXG4gICAgLy8gUGFyc2luZyBmb3JtYXQgYW5kIHJlcGxhY2VtZW50IG9mIGFwcHJvcHJpYXRlIHZhbHVlcyBvZiBkYXRlIGFuZCB0aW1lXHJcbiAgICB3aGlsZSAocG9zIDwgZm9ybWF0Lmxlbmd0aCkge1xyXG4gICAgICBjaGFyID0gZm9ybWF0LmNoYXJBdChwb3MpO1xyXG4gICAgICBjaGFyQ291bnQgPSAwO1xyXG5cclxuICAgICAgaWYgKGNoYXIgPT09ICdZJyB8fCBjaGFyID09PSAneScgfHwgY2hhciA9PT0gJ00nIHx8IGNoYXIgPT09ICdkJyB8fCBjaGFyID09PSAnaCcgfHwgY2hhciA9PT0gJ0gnIHx8XHJcbiAgICAgICAgY2hhciA9PT0gJ20nIHx8IGNoYXIgPT09ICdzJyB8fCBjaGFyID09PSAnZicgfHwgY2hhciA9PT0gJ0YnIHx8IGNoYXIgPT09ICd0JyB8fCBjaGFyID09PSAneicpIHtcclxuICAgICAgICBpbmRleCsrO1xyXG5cclxuICAgICAgICB3aGlsZSAocG9zIDwgZm9ybWF0Lmxlbmd0aCAmJiBmb3JtYXQuY2hhckF0KHBvcykgPT09IGNoYXIpIHtcclxuICAgICAgICAgIHBvcysrO1xyXG4gICAgICAgICAgY2hhckNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBzd2l0Y2ggKGNoYXIpIHtcclxuICAgICAgICBjYXNlICdZJzogLy8gZnVsbCB5ZWFyXHJcbiAgICAgICAgICB5ZWFyID0gdmFsdWVzW2luZGV4XTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICd5JzogLy8geWVhclxyXG4gICAgICAgICAgaWYgKHZhbHVlc1tpbmRleF0gPCAxMDAwKSB7XHJcbiAgICAgICAgICAgIHllYXIgPSAyMDAwICsgdmFsdWVzW2luZGV4XTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHllYXIgPSB2YWx1ZXNbaW5kZXhdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ00nOiAvLyBtb250aFxyXG4gICAgICAgICAgbW9udGggPSB2YWx1ZXNbaW5kZXhdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ2QnOiAvLyBkYXlcclxuICAgICAgICAgIGRheSA9IHZhbHVlc1tpbmRleF07XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAnaCc6IC8vIChob3VyIDEyKVxyXG4gICAgICAgICAgaXMxMmhvdXIgPSB0cnVlO1xyXG4gICAgICAgICAgaG91ciA9IHZhbHVlc1tpbmRleF07XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAnSCc6IC8vIChob3VyIDI0KVxyXG4gICAgICAgICAgaG91ciA9IHZhbHVlc1tpbmRleF07XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgY2FzZSAnbSc6IC8vIG1pbnV0ZVxyXG4gICAgICAgICAgbWludXRlID0gdmFsdWVzW2luZGV4XTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICdzJzogLy8gc2Vjb25kXHJcbiAgICAgICAgICBzZWNvbmQgPSB2YWx1ZXNbaW5kZXhdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIGNhc2UgJ2YnOiAvLyBzZWNvbmQgZnJhY3Rpb25cclxuICAgICAgICBjYXNlICdGJzogLy8gc2Vjb25kIGZyYWN0aW9uLCB0cmFpbGluZyB6ZXJvZXMgYXJlIHRyaW1tZWRcclxuICAgICAgICAgIG1pbGxpc2Vjb25kID0gdmFsdWVzW2luZGV4XTtcclxuICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBjYXNlICd0JzogLy8gUE0gb3IgQU1cclxuICAgICAgICAgIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2FtJykgPj0gMCAmJiBob3VyID09PSAxMikgeyBob3VyID0gMDsgfVxyXG4gICAgICAgICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigncG0nKSA+PSAwICYmIGhvdXIgPCAxMikgeyBob3VyICs9IDEyOyB9XHJcbiAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHBvcysrO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkYXRlVGltZSA9IG5ldyBEYXRlKHllYXIgfHwgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBtb250aCAtIDEgfHwgMCwgZGF5IHx8IDEsIGhvdXIgfHwgMCwgbWludXRlIHx8IDAsIHNlY29uZCwgbWlsbGlzZWNvbmQgfHwgMCk7XHJcblxyXG4gICAgaWYgKCFkYXRlVGltZSB8fCBpc05hTihkYXRlVGltZSBhcyBhbnkpKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRlVGltZTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRTdHJpbmdEYXRlVGltZShvYmplY3QsIGRhdGVUaW1lVHlwZSkge1xyXG4gICAgaWYgKGRhdGVUaW1lVHlwZSA9PT0gJ0RhdGUnKSB7XHJcbiAgICAgIG9iamVjdC5ob3VycyA9IDA7XHJcbiAgICAgIG9iamVjdC5taW51dGVzID0gMDtcclxuICAgICAgb2JqZWN0LnNlY29uZHMgPSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iamVjdC5tb250aCArICcvJyArIG9iamVjdC5kYXkgKyAnLycgKyBvYmplY3QueWVhciArICcgJyArXHJcbiAgICAgIChvYmplY3QuaG91cnMgPiAxMiA/IG9iamVjdC5ob3VycyAtIDEyIDogb2JqZWN0LmhvdXJzKSArICc6JyArIG9iamVjdC5taW51dGVzICsgJzonICsgb2JqZWN0LnNlY29uZHMgKyAnICcgK1xyXG4gICAgICAob2JqZWN0LmhvdXJzIDwgMTIgPyAnQU0nIDogJ1BNJyk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGF0ZVRpbWVPYmplY3RUb1N0cmluZyhkYXRlVGltZU9iamVjdCwgdHlwZURhdGVUaW1lT2JqZWN0Pykge1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVUaW1lT2JqZWN0LnllYXIsIGRhdGVUaW1lT2JqZWN0Lm1vbnRoIC0gMSwgZGF0ZVRpbWVPYmplY3QuZGF5LCBkYXRlVGltZU9iamVjdC5ob3VycywgZGF0ZVRpbWVPYmplY3QubWludXRlcywgZGF0ZVRpbWVPYmplY3Quc2Vjb25kcyk7XHJcblxyXG4gICAgaWYgKHRoaXMubW9kZWwub3B0aW9ucy5hcHBlYXJhbmNlLnBhcmFtZXRlcnNQYW5lbERhdGVGb3JtYXQgIT09ICcnKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdERhdGUoZGF0ZSwgdGhpcy5tb2RlbC5vcHRpb25zLmFwcGVhcmFuY2UucGFyYW1ldGVyc1BhbmVsRGF0ZUZvcm1hdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZGF0ZVRvTG9jYWxlU3RyaW5nKGRhdGUsIHR5cGVEYXRlVGltZU9iamVjdCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZGF0ZVRvTG9jYWxlU3RyaW5nKGRhdGUsIGRhdGVUaW1lVHlwZT8pOiBzdHJpbmcge1xyXG4gICAgY29uc3QgdGltZVN0cmluZyA9IGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XHJcbiAgICBjb25zdCBpc0FtZXJpY2FuRm9ybWF0ID0gdGltZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2FtJykgPj0gMCB8fCB0aW1lU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigncG0nKSA+PSAwO1xyXG4gICAgbGV0IGZvcm1hdERhdGUgPSBpc0FtZXJpY2FuRm9ybWF0ID8gJ01NL2RkL3l5eXknIDogJ2RkLk1NLnl5eXknO1xyXG5cclxuICAgIGNvbnN0IHl5eXkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCB5eSA9IHl5eXkudG9TdHJpbmcoKS5zdWJzdHJpbmcoMik7XHJcbiAgICBjb25zdCBNID0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgIGNvbnN0IE1NID0gTSA8IDEwID8gJzAnICsgTSA6IE07XHJcbiAgICBjb25zdCBkID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICBjb25zdCBkZCA9IGQgPCAxMCA/ICcwJyArIGQgOiBkO1xyXG5cclxuICAgIGZvcm1hdERhdGUgPSBmb3JtYXREYXRlLnJlcGxhY2UoL3l5eXkvaSwgeXl5eSk7XHJcbiAgICBmb3JtYXREYXRlID0gZm9ybWF0RGF0ZS5yZXBsYWNlKC95eS9pLCB5eSk7XHJcbiAgICBmb3JtYXREYXRlID0gZm9ybWF0RGF0ZS5yZXBsYWNlKC9NTS9pLCBNTSk7XHJcbiAgICBmb3JtYXREYXRlID0gZm9ybWF0RGF0ZS5yZXBsYWNlKC9NL2ksIE0pO1xyXG4gICAgZm9ybWF0RGF0ZSA9IGZvcm1hdERhdGUucmVwbGFjZSgvZGQvaSwgZGQpO1xyXG4gICAgZm9ybWF0RGF0ZSA9IGZvcm1hdERhdGUucmVwbGFjZSgvZC9pLCBkKTtcclxuXHJcbiAgICBsZXQgaCA9IGRhdGUuZ2V0SG91cnMoKTtcclxuICAgIGxldCB0dCA9ICcnO1xyXG5cclxuICAgIGlmIChpc0FtZXJpY2FuRm9ybWF0KSB7XHJcbiAgICAgIHR0ID0gaCA8IDEyID8gJyBBTScgOiAnIFBNJztcclxuICAgICAgaCA9IGggPiAxMiA/IGggLSAxMiA6IGg7XHJcbiAgICAgIGlmIChoID09PSAwKSB7XHJcbiAgICAgICAgaCA9IDEyO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoID0gaCA8IDEwID8gJzAnICsgaCA6IGg7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG0gPSBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgIG0gPSBtIDwgMTAgPyAnMCcgKyBtIDogbTtcclxuICAgIGxldCBzID0gZGF0ZS5nZXRTZWNvbmRzKCk7XHJcbiAgICBzID0gcyA8IDEwID8gJzAnICsgcyA6IHM7XHJcblxyXG4gICAgY29uc3QgZm9ybWF0VGltZSA9IGggKyAnOicgKyBtICsgJzonICsgcyArIHR0O1xyXG5cclxuICAgIGlmIChkYXRlVGltZVR5cGUgPT09ICdUaW1lJykge1xyXG4gICAgICByZXR1cm4gZm9ybWF0VGltZTtcclxuICAgIH1cclxuICAgIGlmIChkYXRlVGltZVR5cGUgPT09ICdEYXRlJykge1xyXG4gICAgICByZXR1cm4gZm9ybWF0RGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZm9ybWF0RGF0ZSArICcgJyArIGZvcm1hdFRpbWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZm9ybWF0RGF0ZShmb3JtYXREYXRlLCBmb3JtYXRTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCB5eXl5ID0gZm9ybWF0RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgY29uc3QgeXkgPSB5eXl5LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIpO1xyXG4gICAgY29uc3QgbSA9IGZvcm1hdERhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBjb25zdCBtbSA9IG0gPCAxMCA/ICcwJyArIG0gOiBtO1xyXG4gICAgY29uc3QgZCA9IGZvcm1hdERhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgY29uc3QgZGQgPSBkIDwgMTAgPyAnMCcgKyBkIDogZDtcclxuXHJcbiAgICBjb25zdCBoID0gZm9ybWF0RGF0ZS5nZXRIb3VycygpO1xyXG4gICAgY29uc3QgaGggPSBoIDwgMTAgPyAnMCcgKyBoIDogaDtcclxuICAgIGNvbnN0IGgxMiA9IGggPiAxMiA/IGggLSAxMiA6IChoID4gMCA/IGggOiAxMik7XHJcbiAgICBjb25zdCBoaDEyID0gaDEyIDwgMTAgPyAnMCcgKyBoMTIgOiBoMTI7XHJcbiAgICBjb25zdCBuID0gZm9ybWF0RGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICBjb25zdCBubiA9IG4gPCAxMCA/ICcwJyArIG4gOiBuO1xyXG4gICAgY29uc3QgcyA9IGZvcm1hdERhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgY29uc3Qgc3MgPSBzIDwgMTAgPyAnMCcgKyBzIDogcztcclxuICAgIGNvbnN0IHR0ID0gaCA8IDEyID8gJ0FNJyA6ICdQTSc7XHJcblxyXG4gICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoL3l5eXkvZ2ksIHl5eXkpO1xyXG4gICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoL3l5L2dpLCB5eSk7XHJcbiAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSgvWS8sIHl5eXkpO1xyXG4gICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoL01NL2csIG1tKTtcclxuICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5yZXBsYWNlKC9NL2csIG0pO1xyXG4gICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoL2RkL2csIGRkKTtcclxuICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5yZXBsYWNlKC9kL2csIGQpO1xyXG4gICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoL2hoL2csIGhoMTIpO1xyXG4gICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoL2gvZywgaDEyKTtcclxuICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5yZXBsYWNlKC9ISC9nLCBoaCk7XHJcbiAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSgvSC9nLCBoKTtcclxuICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5yZXBsYWNlKC9tbS9nLCBubik7XHJcbiAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSgvbS9nLCBuKTtcclxuICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5yZXBsYWNlKC9zcy9nLCBzcyk7XHJcbiAgICBmb3JtYXRTdHJpbmcgPSBmb3JtYXRTdHJpbmcucmVwbGFjZSgvcy9nLCBzKTtcclxuICAgIGZvcm1hdFN0cmluZyA9IGZvcm1hdFN0cmluZy5yZXBsYWNlKC90dC9naSwgdHQpO1xyXG4gICAgZm9ybWF0U3RyaW5nID0gZm9ybWF0U3RyaW5nLnJlcGxhY2UoL3QvZ2ksIHR0LnN1YnN0cigwLCAxKSk7XHJcblxyXG4gICAgcmV0dXJuIGZvcm1hdFN0cmluZztcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRTdHJpbmdLZXkoa2V5OiBzdHJpbmcsIHBhcmFtcyk6IHN0cmluZyB7XHJcbiAgICBpZiAoa2V5ID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKChwYXJhbXMudHlwZSA9PT0gJ0RhdGVUaW1lJykgPyB0aGlzLmRhdGVUaW1lT2JqZWN0VG9TdHJpbmcoa2V5LCBwYXJhbXMuZGF0ZVRpbWVUeXBlKSA6IGtleSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RyaW5nVG9UaW1lKHRpbWVTdHI6IHN0cmluZykge1xyXG4gICAgY29uc3QgdGltZUFycmF5ID0gdGltZVN0ci5zcGxpdCgnOicpO1xyXG4gICAgY29uc3QgdGltZSA9IHsgaG91cnM6IDAsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfTtcclxuXHJcbiAgICB0aW1lLmhvdXJzID0gdGhpcy5zdHJUb0ludCh0aW1lQXJyYXlbMF0pO1xyXG4gICAgaWYgKHRpbWVBcnJheS5sZW5ndGggPiAxKSB7IHRpbWUubWludXRlcyA9IHRoaXMuc3RyVG9JbnQodGltZUFycmF5WzFdKTsgfVxyXG4gICAgaWYgKHRpbWVBcnJheS5sZW5ndGggPiAyKSB7IHRpbWUuc2Vjb25kcyA9IHRoaXMuc3RyVG9JbnQodGltZUFycmF5WzJdKTsgfVxyXG4gICAgaWYgKHRpbWUuaG91cnMgPCAwKSB7IHRpbWUuaG91cnMgPSAwOyB9XHJcbiAgICBpZiAodGltZS5taW51dGVzIDwgMCkgeyB0aW1lLm1pbnV0ZXMgPSAwOyB9XHJcbiAgICBpZiAodGltZS5zZWNvbmRzIDwgMCkgeyB0aW1lLnNlY29uZHMgPSAwOyB9XHJcblxyXG4gICAgaWYgKHRpbWUuaG91cnMgPiAyMykgeyB0aW1lLmhvdXJzID0gMjM7IH1cclxuICAgIGlmICh0aW1lLm1pbnV0ZXMgPiA1OSkgeyB0aW1lLm1pbnV0ZXMgPSA1OTsgfVxyXG4gICAgaWYgKHRpbWUuc2Vjb25kcyA+IDU5KSB7IHRpbWUuc2Vjb25kcyA9IDU5OyB9XHJcblxyXG4gICAgcmV0dXJuIHRpbWU7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgbmV3R3VpZCgpIHtcclxuICAgIGNvbnN0IGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicuc3BsaXQoJycpO1xyXG4gICAgY29uc3QgdXVpZCA9IFtdO1xyXG4gICAgY29uc3Qgcm5kID0gTWF0aC5yYW5kb207XHJcbiAgICBsZXQgcjtcclxuICAgIHV1aWRbOF0gPSB1dWlkWzEzXSA9IHV1aWRbMThdID0gdXVpZFsyM10gPSAnLSc7XHJcbiAgICB1dWlkWzE0XSA9ICc0JztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM2OyBpKyspIHtcclxuICAgICAgaWYgKCF1dWlkW2ldKSB7XHJcbiAgICAgICAgciA9IDAgfCBybmQoKSAqIDE2O1xyXG4gICAgICAgIHV1aWRbaV0gPSBjaGFyc1soaSA9PT0gMTkpID8gKHIgJiAweDMpIHwgMHg4IDogciAmIDB4Zl07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdXVpZC5qb2luKCcnKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRDb3VudERheXNPZk1vbnRoKHllYXI6IG51bWJlciwgbW9udGg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICBjb25zdCBjb3VudERheXNJbk1vbnRoID0gWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xyXG4gICAgbGV0IGNvdW50ID0gY291bnREYXlzSW5Nb250aFttb250aF07XHJcblxyXG4gICAgaWYgKG1vbnRoID09PSAxKSB7XHJcbiAgICAgIGlmICh5ZWFyICUgNCA9PT0gMCAmJiAoeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwKSkge1xyXG4gICAgICAgIGNvdW50ID0gMjk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY291bnQgPSAyODtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvdW50O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldE9iamVjdFRvQ2VudGVyKG9iamVjdDogYW55LCBkZWZhdWx0VG9wPzogbnVtYmVyKTogYW55IHtcclxuICAgIGNvbnN0IGxlZnRQb3MgPSAodGhpcy5tb2RlbC52aWV3ZXJTaXplLndpZHRoIC8gMiAtIG9iamVjdC5vZmZzZXRXaWR0aCAvIDIpO1xyXG4gICAgY29uc3QgdG9wUG9zID0gdGhpcy5tb2RlbC5vcHRpb25zLmFwcGVhcmFuY2UuZnVsbFNjcmVlbk1vZGUgPyAodGhpcy5tb2RlbC52aWV3ZXJTaXplLmhlaWdodCAvIDIgLSBvYmplY3Qub2Zmc2V0SGVpZ2h0IC8gMikgOiAoZGVmYXVsdFRvcCA/IGRlZmF1bHRUb3AgOiAyNTApO1xyXG4gICAgcmV0dXJuIHsgbGVmdDogTWF0aC5tYXgobGVmdFBvcywgMCksIHRvcDogTWF0aC5tYXgodG9wUG9zLCAwKSB9O1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGNoZWNrQ2xvdWRBdXRob3JpemF0aW9uKGFjdGlvbik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENvb2tpZV8obmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGNvb2tpZSA9ICcgJyArIGRvY3VtZW50LmNvb2tpZTtcclxuICAgIGNvbnN0IHNlYXJjaCA9ICcgJyArIG5hbWUgKyAnPSc7XHJcbiAgICBsZXQgc2V0U3RyID0gbnVsbDtcclxuICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgbGV0IGVuZCA9IDA7XHJcbiAgICBpZiAoY29va2llLmxlbmd0aCA+IDApIHtcclxuICAgICAgb2Zmc2V0ID0gY29va2llLmluZGV4T2Yoc2VhcmNoKTtcclxuICAgICAgaWYgKG9mZnNldCAhPT0gLTEpIHtcclxuICAgICAgICBvZmZzZXQgKz0gc2VhcmNoLmxlbmd0aDtcclxuICAgICAgICBlbmQgPSBjb29raWUuaW5kZXhPZignOycsIG9mZnNldCk7XHJcbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIHtcclxuICAgICAgICAgIGVuZCA9IGNvb2tpZS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFN0ciA9IHVuZXNjYXBlKGNvb2tpZS5zdWJzdHJpbmcob2Zmc2V0LCBlbmQpKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNldFN0cjtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRDb29raWUobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmICh0aGlzLm1vZGVsLm9wdGlvbnMuc3RhbmRhbG9uZUpzTW9kZSB8fCB0eXBlb2YgbG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJyB8fCBuYW1lLmluZGV4T2YoJ3N0aV8nKSA9PSAwIHx8IG5hbWUuaW5kZXhPZignbG9naW4nKSA9PSAwKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldENvb2tpZV8obmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSk7XHJcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YWx1ZSA9IHRoaXMuZ2V0Q29va2llXyhuYW1lKTtcclxuICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcclxuICAgICAgICB0aGlzLnJlbW92ZUNvb2tpZShuYW1lKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCB2YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHJlbW92ZUNvb2tpZShuYW1lOiBzdHJpbmcpIHtcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UOyBwYXRoPS8nO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldENvb2tpZShuYW1lOiBzdHJpbmcsIHZhbHVlLCBwYXRoPywgZG9tYWluPywgc2VjdXJlPywgZXhwaXJlcz8pIHtcclxuICAgIGlmICh0aGlzLm1vZGVsLm9wdGlvbnMuc3RhbmRhbG9uZUpzTW9kZSB8fCB0eXBlb2YgbG9jYWxTdG9yYWdlID09PSAndW5kZWZpbmVkJyB8fCBuYW1lLmluZGV4T2YoJ3N0aV8nKSA9PT0gMCB8fCBuYW1lLmluZGV4T2YoJ2xvZ2luJykgPT09IDApIHtcclxuICAgICAgLy8gc2F2ZSB0byBjb29raWVzXHJcbiAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgKHZhbHVlKSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID49IDQwOTYpIHsgcmV0dXJuOyB9XHJcbiAgICAgIGNvbnN0IHBhdGhOYW1lID0gbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgICAgIGNvbnN0IGV4cERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBleHBEYXRlLnNldFRpbWUoZXhwRGF0ZS5nZXRUaW1lKCkgKyAoMzY1ICogMjQgKiAzNjAwICogMTAwMCkpO1xyXG4gICAgICBkb2N1bWVudC5jb29raWUgPSBuYW1lICsgJz0nICsgZXNjYXBlKHZhbHVlKSArXHJcbiAgICAgICAgJzsgZXhwaXJlcz0nICsgKGV4cGlyZXMgfHwgZXhwRGF0ZVsndG9HTVRTdHJpbmcnXSgpKSArXHJcbiAgICAgICAgKChwYXRoKSA/ICc7IHBhdGg9JyArIHBhdGggOiAnOyBwYXRoPS8nKSArXHJcbiAgICAgICAgKChkb21haW4pID8gJzsgZG9tYWluPScgKyBkb21haW4gOiAnJykgK1xyXG4gICAgICAgICgoc2VjdXJlKSA/ICc7IHNlY3VyZScgOiAnJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBzYXZlIHRvIGxvY2Fsc3RvcmFnZVxyXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0TmF2aWdhdG9yTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgaWYgKCFuYXZpZ2F0b3IpIHsgcmV0dXJuICdVbmtub3duJzsgfVxyXG4gICAgY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHJcbiAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ0VkZ2UnKSA+PSAwKSB7IHJldHVybiAnRWRnZSc7IH1cclxuICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignTVNJRScpID49IDAgfHwgdXNlckFnZW50LmluZGV4T2YoJ1RyaWRlbnQnKSA+PSAwKSB7IHJldHVybiAnTVNJRSc7IH1cclxuICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignR2Vja28nKSA+PSAwKSB7XHJcbiAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPj0gMCkgeyByZXR1cm4gJ0Nocm9tZSc7IH1cclxuICAgICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+PSAwKSB7IHJldHVybiAnU2FmYXJpJzsgfVxyXG4gICAgICByZXR1cm4gJ01vemlsbGEnO1xyXG4gICAgfVxyXG4gICAgaWYgKHVzZXJBZ2VudC5pbmRleE9mKCdPcGVyYScpID49IDApIHsgcmV0dXJuICdPcGVyYSc7IH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBpc1RvdWNoRGV2aWNlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuICgnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGlzTW9iaWxlRGV2aWNlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIC9pUGhvbmV8aVBhZHxpUG9kfE1hY2ludG9zaHxBbmRyb2lkfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0SHVtYW5GaWxlU2l6ZSh2YWx1ZTogbnVtYmVyLCBkZWNpbWFsczogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGgubG9nKDEwMjQpKTtcclxuICAgIHJldHVybiAoKHZhbHVlIC8gTWF0aC5wb3coMTAyNCwgaSkpLnRvRml4ZWQoZGVjaW1hbHMpKSArICcgJyArIFsnQicsICdLQicsICdNQicsICdHQicsICdUQicsICdQQicsICdFQicsICdaQicsICdZQiddW2ldO1xyXG4gIH1cclxuXHJcbiAgZ2V0Wm9vbU1lbnVJdGVtcygpOiBhbnkge1xyXG4gICAgY29uc3QgaXRlbXM6IE1lbnVJdGVtW10gPSBbeyBuYW1lOiAnWm9vbTI1JywgY2FwdGlvbjogJzI1JScsIGltZzogJycgfSxcclxuICAgIHsgbmFtZTogJ1pvb201MCcsIGNhcHRpb246ICc1MCUnLCBpbWc6ICcnIH0sXHJcbiAgICB7IG5hbWU6ICdab29tNzUnLCBjYXB0aW9uOiAnNzUlJywgaW1nOiAnJyB9LFxyXG4gICAgeyBuYW1lOiAnWm9vbTEwMCcsIGNhcHRpb246ICcxMDAlJywgaW1nOiAnJyB9LFxyXG4gICAgeyBuYW1lOiAnWm9vbTE1MCcsIGNhcHRpb246ICcxNTAlJywgaW1nOiAnJyB9LFxyXG4gICAgeyBuYW1lOiAnWm9vbTIwMCcsIGNhcHRpb246ICcyMDAlJywgaW1nOiAnJyB9XTtcclxuXHJcbiAgICBpZiAodGhpcy5tb2RlbC5vcHRpb25zLnRvb2xiYXIuZGlzcGxheU1vZGUgIT09ICdTZXBhcmF0ZWQnKSB7XHJcbiAgICAgIGl0ZW1zLnB1c2goeyB0eXBlOiAnc2VwYXJhdG9yJyB9KTtcclxuICAgICAgaXRlbXMucHVzaCh7IG5hbWU6ICdab29tT25lUGFnZScsIGNhcHRpb246IHRoaXMubW9kZWwubG9jKCdab29tT25lUGFnZScpLCBpbWc6ICdab29tT25lUGFnZS5wbmcnIH0pO1xyXG4gICAgICBpdGVtcy5wdXNoKHsgbmFtZTogJ1pvb21QYWdlV2lkdGgnLCBjYXB0aW9uOiB0aGlzLm1vZGVsLmxvYygnWm9vbVBhZ2VXaWR0aCcpLCBpbWc6ICdab29tUGFnZVdpZHRoLnBuZycgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaXRlbXM7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0IGhlbHBMaW5rcygpOiBhbnkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgUHJpbnQ6ICd1c2VyLW1hbnVhbC9pbmRleC5odG1sP3ZpZXdlcl9yZXBvcnRzLmh0bSN0b29sYmFyJyxcclxuICAgICAgU2F2ZTogJ3VzZXItbWFudWFsL2luZGV4Lmh0bWw/dmlld2VyX3JlcG9ydHMuaHRtI3Rvb2xiYXInLFxyXG4gICAgICBTZW5kRW1haWw6ICd1c2VyLW1hbnVhbC9pbmRleC5odG1sP3ZpZXdlcl9yZXBvcnRzLmh0bSN0b29sYmFyJyxcclxuICAgICAgQm9va21hcmtzOiAndXNlci1tYW51YWwvaW5kZXguaHRtbD92aWV3ZXJfcmVwb3J0cy5odG0jdG9vbGJhcicsXHJcbiAgICAgIFBhcmFtZXRlcnM6ICd1c2VyLW1hbnVhbC9pbmRleC5odG1sP3ZpZXdlcl9yZXBvcnRzLmh0bSN0b29sYmFyJyxcclxuICAgICAgRmlyc3RQYWdlOiAndXNlci1tYW51YWwvaW5kZXguaHRtbD92aWV3ZXJfcmVwb3J0cy5odG0jc3RhdHVzYmFyJyxcclxuICAgICAgUHJldlBhZ2U6ICd1c2VyLW1hbnVhbC9pbmRleC5odG1sP3ZpZXdlcl9yZXBvcnRzLmh0bSNzdGF0dXNiYXInLFxyXG4gICAgICBOZXh0UGFnZTogJ3VzZXItbWFudWFsL2luZGV4Lmh0bWw/dmlld2VyX3JlcG9ydHMuaHRtI3N0YXR1c2JhcicsXHJcbiAgICAgIExhc3RQYWdlOiAndXNlci1tYW51YWwvaW5kZXguaHRtbD92aWV3ZXJfcmVwb3J0cy5odG0jc3RhdHVzYmFyJyxcclxuICAgICAgRnVsbFNjcmVlbjogJ3VzZXItbWFudWFsL2luZGV4Lmh0bWw/dmlld2VyX3JlcG9ydHMuaHRtI3Rvb2xiYXInLFxyXG4gICAgICBab29tOiAndXNlci1tYW51YWwvaW5kZXguaHRtbD92aWV3ZXJfcmVwb3J0cy5odG0jc3RhdHVzYmFyJyxcclxuICAgICAgVmlld01vZGU6ICd1c2VyLW1hbnVhbC9pbmRleC5odG1sP3ZpZXdlcl9yZXBvcnRzLmh0bSNkaXNwbGF5aW5nbW9kZScsXHJcbiAgICAgIEVkaXRvcjogJ3VzZXItbWFudWFsL2luZGV4Lmh0bWw/dmlld2VyX3JlcG9ydHMuaHRtI3Rvb2xiYXInLFxyXG4gICAgICBGaW5kOiAndXNlci1tYW51YWwvaW5kZXguaHRtbD92aWV3ZXJfcmVwb3J0cy5odG0jc2VhcmNocGFuZWwnLFxyXG4gICAgICBEYXNoYm9hcmRUb29sYmFyOiAndXNlci1tYW51YWwvaW5kZXguaHRtbD92aWV3ZXJfZGFzaGJvYXJkcy5odG0jY29udHJvbGJ1dHRvbnNvZnRoZWRhc2hib2FyZCcsXHJcbiAgICAgIERhc2hib2FyZEVsZW1lbnRUb29sYmFyOiAndXNlci1tYW51YWwvaW5kZXguaHRtbD92aWV3ZXJfZGFzaGJvYXJkcy5odG0jZWxlbWVudGNvbnRyb2xzJyxcclxuICAgICAgRGFzaGJvYXJkRXhwb3J0OiAndXNlci1tYW51YWwvaW5kZXguaHRtbD9leHBvcnRzX2Rhc2hib2FyZHMuaHRtJyxcclxuICAgICAgRGFzaGJvYXJkUGRmRXhwb3J0OiAndXNlci1tYW51YWwvaW5kZXguaHRtbD9leHBvcnRzX2Rhc2hib2FyZHMuaHRtI3BkZmV4cG9ydHNldHRpbmdzJyxcclxuICAgICAgRGFzaGJvYXJkRXhjZWxFeHBvcnQ6ICd1c2VyLW1hbnVhbC9pbmRleC5odG1sP2V4cG9ydHNfZGFzaGJvYXJkcy5odG0jZXhjZWxleHBvcnRzZXR0aW5ncycsXHJcbiAgICAgIERhc2hib2FyZEltYWdlRXhwb3J0OiAndXNlci1tYW51YWwvaW5kZXguaHRtbD9leHBvcnRzX2Rhc2hib2FyZHMuaHRtI2ltYWdlZXhwb3J0c2V0dGluZ3MnLFxyXG4gICAgICBEYXNoYm9hcmREYXRhRXhwb3J0OiAndXNlci1tYW51YWwvaW5kZXguaHRtbD9leHBvcnRzX2Rhc2hib2FyZHMuaHRtI2V4cG9ydHNldHRpbmdzb2ZkYXRhJ1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRCYWNrVGV4dCh3aXRob3V0QnJhY2tldHM/OiBib29sZWFuKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGJhY2tUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZSg4NCkgKyAncicgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKDEwNSkgKyAnYSc7XHJcbiAgICBpZiAod2l0aG91dEJyYWNrZXRzKSB7XHJcbiAgICAgIHJldHVybiBiYWNrVGV4dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoMTA4KTtcclxuICAgIH1cclxuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDkxKSArIGJhY2tUZXh0ICsgU3RyaW5nLmZyb21DaGFyQ29kZSgxMDgpICsgU3RyaW5nLmZyb21DaGFyQ29kZSg5Myk7XHJcbiAgfVxyXG59XHJcbiJdfQ==