<app-breadcrumbs></app-breadcrumbs>
<form name="OrderInsuranceform" class="" #frmRef="ngForm" (ngSubmit)="(frmRef.form.valid)" novalidate>
  <app-pagetransactions
    (afterPag)="afterPag($event)"
    (quickEvents)="quickEvents($event)"
    [request]="request"
    [form]="frmRef"
    [service]="service"
    [formobj]="responseobj"
    [pagename]="pagename"
    [pageNumber]="pageNumber"></app-pagetransactions>

  <div class="col-md-12">
    <div class="ms-panel-fh">
      <div class="cont">
        <div class="ms-panel-body-1 clearfix">
          <div style="background: #fff" class="tab-content ms-panel">
            <div role="tabpanel" class="tab-pane active show fade in" id="tab133">
              <div class="col-xl-12 col-md-12 col-xs-12">
                <div class="p-2 row">
                  <div class="col-md-12">
                    <div class="row align-items-center">
                      <!--insurance Num-->
                      <div class="col-md-6 mb-3">
                        <div class="row pr-xs-0">
                          <div class="col-md-4 d-flex justify-content-start align-items-center label1">
                            <label for="OrderInsuranceNumber">{{ "Shared.insuranceNum" | translate }} : </label>
                          </div>
                          <div class="col-md-8 paddingLeftz">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <i class="fas fa-clipboard-list fs-16" aria-hidden="true"></i>
                              </div>
                              <div class="input-group" >
                                <input
                                  type="number"
                                  class="form-control col-md-6"
                                  id="OrderInsuranceNumber"
                                  name="OrderInsuranceNumber"
                                  #OrderInsuranceNumber="ngModel"
                                  [(ngModel)]="responseobj.OrderInsuranceNumber"
                                  disabled
                                  [required]="isRequired" />
                                  <select
                                  [(ngModel)]="responseobj.OrderInsuranceNumber"
                                  class="form-select col-md-2 borderRadius paytype-Insurance"
                                  #OrderInsuranceSelect="ngModel"
                                  (ngModelChange)="getInsuranceForReturn()"
                                  name="OrderInsuranceNumber" *ngIf="hasManyInsurance">
                                  <option
                                    *ngFor="let insurance of this.responseobj"
                                    [ngValue]="insurance.OrderInsuranceNumber">
                                    {{ insurance.OrderInsuranceNumber }}
                                  </option>
                                </select >
                                <button
                                  type="button"
                                  (click)="getInsuranceForReturn()"
                                  class="btn btn-success has-icon m-0 btnEdit col-md-4 mr-auto">
                                  {{ "Shared.DowntoUse" | translate }}
                                </button>
                              </div>
                              <div
                                class=""
                                *ngIf="
                                  (frmRef.submitted && OrderInsuranceNumber.invalid) ||
                                  (OrderInsuranceNumber.invalid && OrderInsuranceNumber.touched)
                                ">
                                <div class="alert alert-danger editAlertCash" *ngIf="OrderInsuranceNumber.errors.required">
                                  Order Insurance Number Is required
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--OrderInsuranceDate-->
                      <div class="col-md-6 mb-3">
                        <div class="row justify-content-start align-items-center">
                          <div class="col-md-4">
                            <label for="validationCustom19"> {{ "Shared.OrderInsuranceDate" | translate }} : </label>
                          </div>
                          <div class="col-md-8">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <i class="fa fa-calendar" aria-hidden="true"></i>
                              </div>
                              <div class="input-group">
                                <ejs-datepicker
                                  readonly
                                  class="pAsolute absolutePosition form-control borderRadius"
                                  format="dd/MM/yyyy"
                                  name="OrderInsuranceDate"
                                  #OrderInsuranceDate="ngModel"
                                  [(ngModel)]="responseobj.OrderInsuranceDate"
                                  class="form-control borderRadius Prelative"
                                  id="OrderInsuranceDate"
                                  placeholder="mm/dd/yyyy"
                                  [required]="isRequired"></ejs-datepicker>
                              </div>
                              <div
                                class=""
                                *ngIf="
                                  (frmRef.submitted && OrderInsuranceDate.invalid) ||
                                  (OrderInsuranceDate.invalid && OrderInsuranceDate.touched)
                                ">
                                <div
                                  class="alert alert-danger editAlertCash"
                                  *ngIf="OrderInsuranceDate.errors.required">
                                  Order Insurance Date Is required
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--OrderInsuranceCustomer-->
                      <!-- <div class="col-md-6 mb-3">
                        <div class="row pl-xs-0 pl-sm-0">
                          <div class="col-md-4 d-flex justify-content-start align-items-center label1">
                            <label for="validationCustom18"> {{ "manageorder.Customer" | translate }} : </label>
                          </div>
                          <div class="col-md-8 paddingLeftz">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <img alt="" src="assets/images/sort (2).png" srcset="" />
                              </div>

                              <div class="input-group positionEdit">
                                <div class="input-group">
                                  <input
                                    name="OrderInsuranceCustomer"
                                    #OrderInsuranceCustomer="ngModel"
                                    [(ngModel)]="responseobj.OrderInsuranceCustomer"
                                    id="OrderInsuranceCustomer_id"
                                    class="form-control borderRadius"
                                    readonly />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div> -->
                       <!--customer-->
                       <!-- <div class="col-md-6 mb-3">
                        <div class="row pr-xs-0">
                          <div class="col-md-4 d-flex justify-content-start align-items-center label1">
                            <label for="name"> {{ "manageorder.Customer" | translate }} : </label>
                          </div>
                          <div class="col-md-8 paddingLeftz">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <i class="fas fa-user" aria-hidden="true"></i>
                              </div>
                              <div class="input-group">
                                <input
                                  class="form-control"
                                  type="text"
                                  [(ngModel)]="searchCustomer"
                                  (keyup)="filterCustomers($event)"
                                  [ngModelOptions]="{ standalone: true }"
                                  [placeholder]="'Shared.searchByPhoneorNumber' | translate"
                                  [disabled]="!enableChiled" />
                                <select
                                  [(ngModel)]="responseobj.CustomerDocumentId"
                                  class="form-select borderRadius paytype-Insurance"
                                  #CustomerDocumentId="ngModel"
                                  (ngModelChange)="setCustomer(responseobj.CustomerDocumentId)"
                                  name="CustomerDocumentId"
                                  [required]="isRequired"
                                  [disabled]="!enableChiled">
                                  <option
                                    *ngFor="let customer of customers"
                                    [ngValue]="customer.DocumentId"
                                    [disabled]="!enableChiled">
                                    {{ customer.Name }}
                                  </option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div> -->
                      <!-- ///////////customer2 -->
                      <div class="col-md-6 mb-3">
                        <div class="row justify-content-start align-items-center">
                          <div class="col-md-4">
                            <label for="validationCustom19"> {{ "manageorder.Customer" | translate }} : </label>
                          </div>
                          <div class="col-md-8">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <i class="fa fa-calendar" aria-hidden="true"></i>
                              </div>
                              <div class="input-group">
                                <ejs-combobox
                                  name="CustomerDocumentId"
                                  #CustomerDocumentId="ngModel"
                                  [(ngModel)]="responseobj.CustomerDocumentId"
                                  (filtering)='filterCustomers($event)'
                                  [allowFiltering]="true"
                                  [autofill]="true"
                                  (ngModelChange)="setCustomer(responseobj.CustomerDocumentId)"
                                  (change)="clearCustomer($event)"
                                  [dataSource]="customers"
                                  [fields]="customerFlds"
                                  [required]="isRequired"
                                  [disabled]="!enableChiled"
                                  class="form-control borderRadius"
                                  [placeholder]="'Shared.searchByPhoneorNumber' | translate"
                                  id="CustomerDocumentId_id"></ejs-combobox>
                              </div>
                              <!-- <div
                                class="alert alert-danger editAlertCash"
                                *ngIf="
                                  (frmRef.submitted && CustomerDocumentId.invalid) ||
                                  (CustomerDocumentId.invalid && CustomerDocumentId.touched)
                                ">
                                <div *ngIf="CustomerDocumentId.errors.required">Customer Is Required</div>
                              </div> -->
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--OrderInsuranceCustomerPhone-->
                      <div class="col-md-6 mb-3">
                        <div class="row pl-xs-0 pl-sm-0">
                          <div class="col-md-4 d-flex justify-content-start align-items-center label1">
                            <label for="validationCustom18"> {{ "UserProfile.PhoneNumber" | translate }} : </label>
                          </div>
                          <div class="col-md-8 paddingLeftz">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <img alt="" src="assets/images/sort (2).png" srcset="" />
                              </div>

                              <div class="input-group positionEdit">
                                <div class="input-group">
                                  <input
                                    name="OrderInsuranceCustomerPhone"
                                    #OrderInsuranceCustomerPhone="ngModel"
                                    [(ngModel)]="responseobj.OrderInsuranceCustomerPhone"
                                    id="OrderInsuranceCustomerPhone_id"
                                    class="form-control borderRadius"
                                    readonly />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--ReturnInsuranceNum-->
                      <div class="col-md-6 mb-3">
                        <div class="row pl-xs-0 pl-sm-0">
                          <div class="col-md-4 d-flex justify-content-start align-items-center label1">
                            <label for="validationCustom18"> {{ "Shared.ReturnInsuranceNum" | translate }} : </label>
                          </div>
                          <div class="col-md-8 paddingLeftz">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <img alt="" src="assets/images/sort (2).png" srcset="" />
                              </div>

                              <div class="input-group positionEdit">
                                <div class="input-group">
                                  <input
                                    [numbersOnly]="responseobj.SerialNumber"
                                    [allowDecimals]="false"
                                    name="SerialNumber"
                                    #SerialNumber="ngModel"
                                    [(ngModel)]="responseobj.SerialNumber"
                                    id="SerialNumber_id"
                                    class="form-control borderRadius"
                                    disabled
                                    readonly />
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!--ReturnInsurancedate-->
                      <div class="col-md-6 mb-3">
                        <div class="row justify-content-start align-items-center">
                          <div class="col-md-4">
                            <label for="validationCustom19"> {{ "Shared.ReturnInsurancedate" | translate }} : </label>
                          </div>
                          <div class="col-md-8">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <i class="fa fa-calendar" aria-hidden="true"></i>
                              </div>
                              <div class="input-group">
                                <ejs-datepicker
                                  readonly
                                  class="pAsolute absolutePosition form-control borderRadius"
                                  format="dd/MM/yyyy"
                                  name="ReturnInsuranceDate"
                                  #ReturnInsuranceDate="ngModel"
                                  [(ngModel)]="responseobj.ReturnInsuranceDate"
                                  class="form-control borderRadius Prelative"
                                  id="ReturnInsuranceDate"
                                  placeholder="mm/dd/yyyy"
                                  [enabled]="false"
                                  [required]="isRequired"></ejs-datepicker>
                              </div>
                              <div
                                class=""
                                *ngIf="
                                  (frmRef.submitted && ReturnInsuranceDate.invalid) ||
                                  (ReturnInsuranceDate.invalid && ReturnInsuranceDate.touched)
                                ">
                                <div
                                  class="alert alert-danger editAlertCash"
                                  *ngIf="ReturnInsuranceDate.errors.required">
                                  Return Insurance Date Is required
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--Select Payment Type-->
                      <div class="col-md-6 mb-3">
                        <div class="row pr-xs-0">
                          <div class="col-md-4 d-flex justify-content-start align-items-center label1">
                            <label for="validationCustom19"> {{ "Shared.paytype" | translate }} : </label>
                          </div>
                          <div class="col-md-8 paddingLeftz">
                            <div class="input-group editInputGroup">
                              <div class="input-group-addon">
                                <i class="fas fa-user" aria-hidden="true"></i>
                              </div>
                              <div class="input-group">
                                <!-- <ejs-combobox
                                  name="PayTypeDocumentId"
                                  #PayTypeDocumentId="ngModel"
                                  [(ngModel)]="responseobj.PayTypeDocumentId"
                                  [allowFiltering]="true"
                                  [autofill]="true"
                                  [dataSource]="responseobj.PayTypes"
                                  placeholder="Select Payment Type"
                                  [fields]="Flds"
                                  class="form-control borderRadius"
                                  id="PayTypeDocument_Id"
                                  [enabled]="false"
                                  [required]="isRequired"></ejs-combobox> -->
                                  <ejs-dropdownlist    
                                    class="form-control borderRadius paytype-Insurance"
                                    name="PayTypeDocumentId"
                                    #PayTypeDocumentId="ngModel"
                                    [(ngModel)]="responseobj.PayTypeDocumentId"
                                    [dataSource]="responseobj.PayTypes"
                                    placeholder="Select Payment Type"
                                    [fields]="Flds"
                                    class="form-control borderRadius"
                                    id="PayTypeDocument_Id"
                                    [enabled]="false"
                                    [required]="isRequired"
                                    [placeholder]='waterMark' [popupHeight]='height'></ejs-dropdownlist>
                              </div>

                              <div
                                class=""
                                *ngIf="
                                  (frmRef.submitted && PayTypeDocumentId.invalid) ||
                                  (PayTypeDocumentId.invalid && PayTypeDocumentId.touched)
                                ">
                                <div class="alert alert-danger editAlertCash" *ngIf="PayTypeDocumentId.errors.required">
                                  Payment Type Is required
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!--Notes-->
                      <div class="col-md-6 mb-3">
                        <div class="row">
                          <div class="col-md-4 d-flex justify-content-start align-items-center label1">
                            <label for="exampleFormControlTextarea1"> {{ "kds.Note" | translate }} : </label>
                          </div>
                          <div class="col-md-8 paddingLeftz">
                            <div class="input-group editInputGroup">
                              <textarea
                                class="form-control borderRadius"
                                [(ngModel)]="responseobj.Description"
                                name="Description"
                                disabled></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12">
                    <div class="ms-panel-body p-2">
                      <div class="col-md-12">
                        <div class="row justify-content-center">
                          <!-- Table-->
                          <div class="col-md-12">
                            <table class="table table-bordered mb-0">
                              <thead class="bg-maingreen text-center">
                                <tr>
                                  <th scope="col">
                                    {{ "Shared.Name" | translate }}
                                  </th>
                                  <th scope="col">
                                    {{ "stock.Quantity" | translate }}
                                  </th>
                                  <th scope="col">
                                    {{ "Shared.Price" | translate }}
                                  </th>
                                  <th scope="col">
                                    {{ "Reports.RemainingQuentity" | translate }}
                                  </th>
                                  <th scope="col">
                                    {{ "Shared.ReturnOrderInsuranceQuentity" | translate }}
                                  </th>
                                  <th scope="col">
                                    {{ "Shared.Total" | translate }}
                                  </th>
                                </tr>
                              </thead>
                              <tbody class="text-center editTd">
                                <tr *ngFor="let detail of returnOrderDetails; let i = index">
                                  <td>
                                    {{ detail?.InsuranceName }}
                                  </td>
                                  <td>
                                    {{ detail?.OrderInsuranceQuentity }}
                                  </td>
                                  <td>
                                    {{ detail?.OrderInsurancePrice }}
                                  </td>
                                  <td>
                                    {{ detail?.RemainingQuentity }}
                                  </td>
                                  <td>
                                    <input
                                      [numbersOnly]="detail.ReturnOrderInsuranceQuentity"
                                      [allowDecimals]="false"
                                      name="ReturnOrderInsuranceQuentity{{ i }}"
                                      #ReturnOrderInsuranceQuentity="ngModel"
                                      [(ngModel)]="detail.ReturnOrderInsuranceQuentity"
                                      (keyup)="SetReturnOrderInsurance()"
                                      [disabled]="!enableChiled" 
                                      class="btn-count"
                                      id="ReturnOrderInsuranceQuentity{{ i }}"

                                      />
                                      <!-- oninput="this.value = !!this.value && 0 && r.RemainingQuentity == 0
                                       ? [required]='isRequired' : [required]='false'" -->
                                  </td>
                                  <td>{{ detail?.Total }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                          <!--end grid-->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
<!-- Report modal -->
<div class="modal fade" id="modal-5" tabindex="-1" role="dialog" aria-labelledby="modal-1">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header borderb">
        <h5 class="modal-title has-icon ms-icon-round orangeColor restaurantName4">
          <svg
            width="28px"
            height="27px"
            version="1.1"
            id="Layer_1"
            x="0px"
            y="0px"
            viewBox="0 0 512 512"
            style="enable-background: new 0 0 512 512"
            xml:space="preserve">
            <g>
              <g>
                <path
                  d="M324.267,366.933H187.733c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h136.533
      c5.12,0,8.533-3.413,8.533-8.533S329.387,366.933,324.267,366.933z" />
              </g>
            </g>
            <g>
              <g>
                <path
                  d="M349.867,409.6H162.133c-5.12,0-8.533,3.413-8.533,8.533s3.413,8.533,8.533,8.533h187.733c5.12,0,8.533-3.413,8.533-8.533
      S354.987,409.6,349.867,409.6z" />
              </g>
            </g>
            <g>
              <g>
                <path
                  d="M375.467,452.267H136.533c-5.12,0-8.533,3.413-8.533,8.533c0,5.12,3.413,8.533,8.533,8.533h238.933
      c5.12,0,8.533-3.413,8.533-8.533C384,455.68,380.587,452.267,375.467,452.267z" />
              </g>
            </g>
            <g>
              <g>
                <path
                  d="M0,307.2v93.867c0,14.507,11.093,25.6,25.6,25.6h58.027l-12.8,64.853c-0.853,5.12,0,10.24,3.413,14.507
      S81.92,512,87.04,512h337.92c5.12,0,10.24-2.56,12.8-5.973c3.413-4.267,4.267-9.387,3.413-14.507l-12.8-64.853H486.4
      c14.507,0,25.6-11.093,25.6-25.6V307.2H0z M87.04,494.933l15.36-75.093l15.36-78.507h276.48l15.36,78.507l15.36,75.093H87.04z" />
              </g>
            </g>
            <g>
              <g>
                <path
                  d="M486.4,85.333h-59.733v102.4c0,23.893-18.773,42.667-42.667,42.667H128c-23.893,0-42.667-18.773-42.667-42.667v-102.4
      H25.6c-14.507,0-25.6,11.093-25.6,25.6v179.2h512v-179.2C512,96.427,500.907,85.333,486.4,85.333z" />
              </g>
            </g>
            <g>
              <g>
                <rect x="290.133px" y="145.067px" width="85.333px" height="34.133px" />
              </g>
            </g>
            <g>
              <g>
                <path
                  d="M401.067,85.333V17.067C401.067,7.68,393.387,0,384,0H128c-9.387,0-17.067,7.68-17.067,17.067v68.267H102.4v102.4
      c0,14.507,11.093,25.6,25.6,25.6h256c14.507,0,25.6-11.093,25.6-25.6v-102.4H401.067z M128,17.067h256v68.267H128V17.067z
        M392.533,187.733c0,5.12-3.413,8.533-8.533,8.533H281.6c-5.12,0-8.533-3.413-8.533-8.533v-51.2c0-5.12,3.413-8.533,8.533-8.533
      H384c5.12,0,8.533,3.413,8.533,8.533V187.733z" />
              </g>
            </g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
            <g></g>
          </svg>
          <span class="px-2"> Printer Setting</span>
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body">
        <form>
          <div class="row d-flex justify-content-center align-items-center">
            <div class="col-md-10 py-2">
              <div class="row justify-content-center align-items-center">
                <div class="col-md-3 d-flex justify-content-start align-items-center label1"></div>
              </div>
            </div>
          </div>
        </form>
        <div id="myviewer"></div>

        <div></div>
      </div>
    </div>
  </div>
</div>
