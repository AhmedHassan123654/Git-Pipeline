
<div class="mt-2">
  <ul class="nav nav-tabs editMainTab d-flex nav-justified pb-0" role="tablist">
    <li class="px-2" id="tab1" role="presentation">
      <a href="#tab11" aria-controls="tab11" class="active basic-info" role="tab" data-toggle="tab">
        {{ "manageorder.Customer Reservation" | translate }}
      </a>
    </li>
    <li class="px-2" id="tab2" role="presentation" (click)="GetAllCustomerOrders()">
      <a href="#tab22" aria-controls="tab22" role="tab" data-toggle="tab" class="basic-info">
        {{ "Order.reservationlist" | translate }}
      </a>
    </li>
    
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li>
      <button type="button" class="close pull-right mr-2" aria-label="Close" (click)="closeModal()">
        <span aria-hidden="true">Ã—</span>
      </button>
    </li>
  </ul>
  
</div>

<div class="cont">
  <div class="ms-panel-body-1 clearfix">
    <div style="background: #fff" class="tab-content">
      <!------------ first form ---------------->
      <div role="tabpanel" class="tab-pane active show fade in" id="tab11">
        
        <div class="modal-body">
          <form
            #frmReservationCustomer="ngForm"
            id="addCustomerOrderFormModal"
            (ngSubmit)="saveCustomerOrder(frmReservationCustomer, $event)">
            <div class="col-md-12">
              <div class="row align-items-center">
                <!-- Customer -->
                <div class="col-12 d-flex justify-content-end">
                  <button
                    type="button"
                    class="btn btn-success px-2 py-1 d-flex m-2 justify-content-center align-items-center"
                    name="OpenCustomerPOPUp"
                    (click)="addCustomer()">
                    {{ "Shared.AddCustomer" | translate }}
                  </button>
                </div>
                <div class="col-md-12 mb-3">
                  <div class="row pr-xs-0">
                    <div class="col-md-1 d-flex justify-content-start align-items-center label1">
                      <label for="CustomerDocumentId">{{ "manageorder.Customer" | translate }}:</label>
                    </div>
                    <div class="col-md-5">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fas fa-user fs-16" aria-hidden="true"></i>
                        </div>
                        <div class="input-group">
                          <input
                            type="text"
                            [(ngModel)]="searchCustomer"
                            (keyup)="filterCustomers($event)"
                            [ngModelOptions]="{ standalone: true }"
                            [placeholder]="'Shared.searchByPhoneorNumber' | translate"
                            required
                            class="form-control" />
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <select
                        [(ngModel)]="responseobj.CustomerDocumentId"
                        class="form-control borderRadius"
                        #CustomerDocumentId="ngModel"
                        (ngModelChange)="setCustomer(responseobj.CustomerDocumentId)"
                        name="CustomerDocumentId"
                        required>
                        <option *ngFor="let customer of customers" [ngValue]="customer.DocumentId">
                          {{ customer.Name }}
                        </option>
                      </select>
                      <div
                        class="alert alert-danger editAlertCash"
                        *ngIf="
                          (frmReservationCustomer.submitted && CustomerDocumentId.invalid) ||
                          (CustomerDocumentId.invalid && CustomerDocumentId.touched)
                        ">
                        <div *ngIf="CustomerDocumentId.errors.required">Customer Is Required</div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--customerPhone-->
                <div class="col-md-6 mb-3">
                  <div class="row justify-content-start align-items-center">
                    <div class="col-md-2">
                      <label for="customerPhone"> {{ "Shared.customerPhone" | translate }}: </label>
                    </div>
                    <div class="col-md-10">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fa fa-phone" aria-hidden="true"></i>
                        </div>
                        <div class="input-group">
                          <input
                            class="form-control borderRadius"
                            [(ngModel)]="modalResult.data.CustomerPhone"
                            id="customerPhone"
                            required
                            name="CustomerPhone"
                            #CustomerPhone="ngModel" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--CreationTime-->
                <div class="col-md-6 mb-3">
                  <div class="row justify-content-start align-items-center">
                    <div class="col-md-2">
                      <label for="date"> {{ "CashReceipt.Date" | translate }}: </label>
                    </div>
                    <div class="col-md-10">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fa fa-calendar" aria-hidden="true"></i>
                        </div>
                        <div class="input-group">
                          <ejs-datepicker
                            readonly
                            class="pAsolute absolutePosition form-control borderRadius"
                            format="dd/MM/yyyy"
                            name="CreationTime"
                            #CreationTime="ngModel"
                            [(ngModel)]="modalResult.data.CreationTime"
                            class="form-control borderRadius Prelative"
                            id="date"
                            placeholder="mm/dd/yyyy"></ejs-datepicker>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--received Date-->
                <div class="col-md-6 mb-3">
                  <div class="row justify-content-start align-items-center">
                    <div class="col-md-2">
                      <label for="validationCustom19"> {{ "CustomerOrder.ReceivedDate" | translate }}: </label>
                    </div>
                    <div class="col-md-10">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fa fa-calendar" aria-hidden="true"></i>
                        </div>
                        <div class="input-group">
                          <ejs-datepicker
                            class="pAsolute absolutePosition form-control borderRadius"
                            format="dd/MM/yyyy"
                            name="ReceivedDate"
                            #ReceivedDate="ngModel"
                            [(ngModel)]="modalResult.data.ReceivedDate"
                            class="form-control borderRadius Prelative"
                            id="ReceivedDate"
                            placeholder="mm/dd/yyyy"></ejs-datepicker>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--received Time-->
                <div class="col-md-6 mb-3">
                  <div class="row justify-content-start align-items-center">
                    <div class="col-md-2">
                      <label for="receivedTime"> {{ "CustomerOrder.ReceivedTime" | translate }}: </label>
                    </div>
                    <div class="col-md-10">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fas fa-clock" aria-hidden="true"></i>
                        </div>
                        <div class="input-group">
                          <ejs-timepicker [(ngModel)]="modalResult.data.ReceivedTime"
                                          name="ReceivedTime"
                                          ngDefaultControl id="ReceivedTime"
                                          class="form-control borderRadius"
                                   
                          ></ejs-timepicker>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--ReceiverName-->
                <div class="col-md-6 mb-3">
                  <div class="row d-flex pr-xs-0">
                    <div class="col-md-2 d-flex justify-content-start align-items-center label1">
                      <label for="receiverName">{{ "CustomerOrder.ReceiverName" | translate }}: </label>
                    </div>
                    <div class="col-md-10 paddingLeftz">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fas fa-user"></i>
                        </div>
                        <div class="input-group">
                          <input
                            class="form-control borderRadius"
                            [(ngModel)]="modalResult.data.ReceiverName"
                            id="receiverName"
                            name="ReceiverName"
                            #ReceiverName="ngModel" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--ReceiverPhone-->
                <div class="col-md-6 mb-3">
                  <div class="row d-flex pr-xs-0">
                    <div class="col-md-2 d-flex justify-content-start align-items-center label1">
                      <label for="receiverPhone">{{ "CustomerOrder.ReceiverPhone" | translate }}: </label>
                    </div>
                    <div class="col-md-10 paddingLeftz">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fa fa-phone" aria-hidden="true"></i>
                        </div>
                        <div class="input-group">
                          <input
                            class="form-control borderRadius"
                            [(ngModel)]="modalResult.data.ReceiverPhone"
                            id="receiverPhone"
                            name="ReceiverPhone"
                            #ReceiverPhone="ngModel" />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--PaymentType-->
                <div class="col-md-6 mb-3">
                  <div class="row pr-xs-0">
                    <div class="col-md-2 d-flex justify-content-start align-items-center label1">
                      <label for="PayTypeDocumentId">{{ "Shared.paymenttype" | translate }}:</label>
                    </div>
                    <div class="col-md-10 paddingLeftz">
                      <div class="input-group editInputGroup">
                        <div class="input-group-addon">
                          <i class="fas fa-money-check-alt fs-16" aria-hidden="true"></i>
                        </div>
                        <div class="input-group">
                          <ejs-combobox
                            name="PayTypeDocumentId"
                            #PayTypeDocumentId="ngModel"
                            [(ngModel)]="modalResult.data.PayTypeDocumentId"
                            [allowFiltering]="true"
                            [dataSource]="orderHelper.orderPayTypelist"
                            placeholder="Select Pay Type"
                            required
                            [autofill]="true"
                            (ngModelChange)="modalResult.data = recalculateOrderObject(modalResult.data)"
                            [fields]="FLG"
                            class="form-control borderRadius"
                            id="PayTypeDocumentId"></ejs-combobox>
                          <div
                            class="alert alert-danger editAlertCash"
                            *ngIf="
                              (frmReservationCustomer.submitted && PayTypeDocumentId.invalid) ||
                              (PayTypeDocumentId.invalid && PayTypeDocumentId.touched)
                            ">
                            <div *ngIf="PayTypeDocumentId.errors.required">Pay Type Is Required</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--Notes-->
                <div class="col-md-6 mb-3">
                  <div class="row">
                    <div class="col-md-2 d-flex justify-content-start align-items-center label1">
                      <label for="note"> {{ "kds.Note" | translate }}: </label>
                    </div>
                    <div class="col-md-10 paddingLeftz">
                      <div class="input-group editInputGroup">
                        <textarea
                          class="form-control borderRadius"
                          [(ngModel)]="modalResult.data.NoteForOrder"
                          name="NoteForOrder"></textarea>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">
            {{ "Shared.Cancel" | translate }}
          </button>
          <button type="submit" class="btn btn-primary" form="addCustomerOrderFormModal" value="noProducts">
            {{ "Shared.Save Without Products" | translate }}
          </button>
          <button type="submit" class="btn btn-primary" form="addCustomerOrderFormModal" value="products">
            {{ "Shared.Select Products" | translate }}
          </button>
        </div>

      </div>
      <!------------ second form ---------------->
      <div class="tab-pane fade" id="tab22">
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-bordered thead-primary text-center mb-0">
              <thead>
                <tr>
                  <th scope="col">
                    {{ "delivery.Subtotal" | translate }}
                  </th>
                  <th scope="col">
                    {{ "CustomerOrder.ReceivedDate" | translate }}
                  </th>
                  <th scope="col">
                    {{ "CustomerOrder.ReceivedTime" | translate }}
                  </th>
                  <th scope="col">
                    {{ "Reports.Customer" | translate }}
                  </th>
                  <th scope="col">
                    {{ "UserProfile.PhoneNumber" | translate }}
                  </th>
                  <th scope="col">
                    {{ "manageorder.Pay Amount" | translate }}
                  </th>
                  <!-- <th scope="col">
                    {{ "delivery.Actions" | translate }}
                  </th> -->
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let order of customrReservationOrders; let i = index">
                  <td>
                    {{ order.SubTotal | currency : " " : "symbol" : fraction : priceLang }}
                  </td>
                  <td>{{ order.Date }}</td>
                  <td>{{ order.Time }}</td>
                  <td>{{ order.CustomerName }}</td>
                  <td>
                    {{ order.ReceiverPhone ? order.ReceiverPhone : order.CustomerPhone }}
                  </td>
                  <td>
                    {{ order.PayedAmountReservation | currency : " " : "symbol" : fraction : priceLang }}
                  </td>

                  <!-- <td class="d-flex justify-content-around align-items-center">
                    <button style="width: fit-content" (click)="selectAnyOrder(order)"
                      class="btn btn-primary btnEdit m-0">
                      {{ "Shared.Select" | translate }}
                    </button>
                  </td> -->
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="modal-footer py-1 pr-3">
          <button type="button" class="btn btn-primary my-1" (click)="closeModal()">
            {{ "Shared.Close" | translate }}
          </button>
        </div>

      </div>
    </div>
  </div>
</div>

